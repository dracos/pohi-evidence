FUJ00155486
FUJ00155486

POST OFFICE ACCOUNT RELEASE NOTE Release number: RNT8601

Target Release: T86 Platform: COUNTER

Product: LFS_COUNTER 44_1

IMPORTANT: Please see the installation instructions at the end of this Release Note
Destination: Live counters after successful testing in LST

Note: —

This release note delivers Tivoli download package LFS_COUNTER version 44 1.
This package delivers the following components:

T86_WP_29300 Counter: CABSProcess can leave Counter! locked for
transactions - T86
PC0164429 FAD005948 BM stock unit was rolled over it was forced to
clear the local suspense account

Checklist for SMC/MSS-
Class Si
Lock Criteria (to be predefined)
Reboot Required? (Inform MSS) I No
(If yes, concurrency must be
changed to

I Migration Details _____I Pilot first then fullestate S
Distribute Details
Commit Details

Commit Time ~ I Default (10 minutes)
Op.Focusarticle = NA 2 = ° oo =I
Reporting Required As normal

Other special instructions

: ____Checkli
iS f products in
current release (RM to advise)

gl

INFREL to confirm that fixes are Fixes since S80 Spare rolled up in immediate
rolled up (catchup) component only; overnight commit is
incremental.

RM to acknowledge that fixes are
rolled up

For further information please see the instructions after the routing table.

Event Info

FUJ00155486

FUJ00155486
Date Raised: 29/09/2008 Originator: Tyrone Cozens
Checked by:
High level plan:
Work unit Contact Date Order
Release authorisation RM 29/09/08 1
Progress to INFREL PIT 29/09/08 2
Development for Tivoli wrapping INFREL 30/09/08 3
Advise of expected Footprint of Events as per INFREL N/A 4
SY/ION/006 (4.1)
Add file list & move to pick up point CM 30/09/08 5
Check RN prior to test wrap/check that files RM 30/09/08 6
are on CMPost
LST authorise for application to .26 rig PRE-LST 3" October 2008 7
Package for test and Install on LST .26 rig MSS/LST 06/10/08 8
Operational test fix LST 14" October 2008 9
Confirm event footprints as per SY/ION/006 LST N/A 10
(4.2)
Update PIT web page & route fault PEAKs RM 11
to originator
Authorise release to live Pilot RM 16/10/08 12
Email RDT with WP details RM 13
Package and set up jobs for Live MSS 16/10/08 14
Apply to Pilot as directed by RM MSS 16/10/08 15
Confirm event footprints from Pilot are as per SMC NA 16
SY/ION/006 (4.3)
Authorise application to rest of Live Estate RM 23/10/08 17
(ensure POL authorised and discussed date of
distribution with Ref Data)
Apply to balance of Live Estate MSS 23/10/08 18
Manage the tail to closure SMC-Desk Feb’09 19
Acknowledge installation to Live CM 19/02/09 20
Update Generic Prodlist (if necessary) RM 21
Route to MSS for LST DR update/update RM 22
DR spreadsheet
Update LST DR Counters at LEW02 MSS(LST-DR) 23
Close call RM 24
INFREL:

Package has been baselined in PVCS as LFS_CNT~44_0~44_0~44 1.
This fix is class SI (i.e. Immediate).

Package Integrity Check:

Number of files (excluding dig and sig files)
Total size (excluding dig and sig files)
Tivoli signature should be LES_COUNTER“44_1.sig

27
1,138,056 bytes
FUJ00155486
FUJ00155486

TIVOLI DOWNLOAD PACKAGE
LFS_COUNTER 44_1

COUNTER package LFS_COUNTER version 44_1

SUMMARY
This package is applicable to Live Counters at T86. It is also applicable to S80/S92 Spares used
in Branches at T86.

The overnight commit script installs the files marked in bold below, namely those delivered in
WP249300 i.e. it does not roll up any earlier versions of LFS_COUNTER.

There is also an immediate component applicable to S80/S92 Spares for box-swaps, and for new
rollout offices at the discretion of Release Management. The Catchup script rolls up all post-S80
LFS_COUNTER fixes, and installs all files in the table below:

Work Package(s) / Baseline(s)
c:\Counters\Bin\CABSProcess.exe WP29300

c:\Counters\Bin\LFS\LFSConfirm.dil WP24958
c:\Counters\Bin\LFS\LFSinterface.dil WP24778
c:\Counters\Bin\LFS\LFSNVStock.dll COUNTER_S90_V006-V000
c:\Counters\Bin\LFS\LFSPServer.dl COUNTER_S90_V006-V000
c:\Counters\Bin\LFS\LFSView.dll COUNTER_S90_V006-V000

c:\Counters\Bin\LFS\LFSEndOfDay.exe _WP24593

DISTRIBUTION INFORMATION

This fix should be packaged as a standard fix, for distribution to the Live Estate, and also as an
immediate for application via CATCHUP.BAT during rollout of spares.

As a standard fix, this package is to be run under SYSMAN2. It is to be distributed by Tivoli
normally to just the Gateway. Subsequent committal of the fix is achieved by a second related
package (SWDISTRIB) being distributed.

Details of the package containing the actual fix and a second package, responsible for forwarding
and applying the fix to slave counters, are given below:

The target path on the Counter on which the fix is to be distributed is:
C:\pathway\tivoli\distrib\LFS_COUNTER\44_1

Scripts to be run are as follows:-

After distribution: DAFTER.BAT
On Commit: None
For Regression: REGRESS.BAT

Distribution of this package and the running of DAFTER.BAT can be performed any time when
the counter is on-line. Note: the COMMIT.BAT script should not be invoked explicitly for this
package; it is executed upon successful distribution of the second package (below).

The target path for the second package is:

C:\Pathway\Tivoli\GenericCommit\LFS_COUNTER\44_1
The following files should be distributed to this directory (as per Release Note RNT8032A):
SwDistrib.dll
SwbDistrib.exe
SwDistrib*41_1.dig

Note that the above files must not be packaged as read-only.
Scripts to be run are as follows:

After distribution SwbDistrib.exe

K.V.Morley Page 3 of 7 2/19/2009
FUJ00155486
FUJ00155486

TIVOLI DOWNLOAD PACKAGE
LFS_COUNTER 44.1

Distribution of the package and the running of the SwDistrib executable performs a Commit for
the LFS_COUNTER package, and so may be performed only after the successful distribution of
the first package, as required.

The Horizon Desktop and associated services are taken down and brought back up during the
Commit, therefore it is necessary to leave sufficient time (at least 30 minutes) to allow the
Desktop to complete initialisation before retrying the commit after a failure (or regressing).

Errors will be flagged in the Application Event Log, and the error number returned to the calling

process.

CATCHUP DISTRIBUTION INFORMATION (for MSS)
This fix is held on the Delivery Share, to be picked up during rollout of spares, and applied via the
CATCHUP.BAT script.

Possible errors are as follows:

Error No Possible Reason Suggested Action

131 : (83) Error when copying old file to regress Retry, and if problem persists contact
area — all changes will be rolled back support. May indicate disk errors.

132 : (84) Error installing fix file - all changes will Retry, and if problem persists it may be
be rolled back necessary to arrange for a Counter

reboot.

133 : (85) Failed to regress named file back to Retry, and if problem persists it may be
previous version necessary to arrange for a Counter

reboot.

134 : (86) Could not register the file Ensure the counter is at the correct state,
i.e. is at the correct migration level,
before the commit is performed.

143 : (8F) Failed to delete named file on regression I Retry, and if problem persists contact
support. May indicate disk errors.

170 : (AA) Digital Signature test failed with Distribution is incomplete or corrupt —

ERRORLEVEL <error code> check contents of distribution folder, and
if necessary re-distribute.

171 : (AB) Failed to copy Tivoli SIG file to Commit I Regress / Commit has completed
directory (restoring sig files while successfully but Support should be
regressing). Can also occur in Commit, I notified of this error
when saving SIG files

175 : (AF) Failed to launch the “waiter” process Retry, and if problem persists it may be
necessary to arrange for a Counter
reboot.

181 : (B5) Unable to delete old sig file on Regress I This will not return an error to Tivoli as
the regress itself worked

200: (C8) PathwayLoad not running.

* Counter may be awaiting completion of I * Try again when Riposte Desktop up
Post Office Logon. and running.

* A new Counter may not have finished _I * Try again when configuration complete.
configuring. Reboot if the problem persists.

201: (C9) Cleardesk is running Try again outside of Cleardesk slot (3:30-

4:30am). If problem persists, reboot.

212 : (D4) <directory name> directory creation Contact Support
failure

221:(DD) I <product name> Signature file already Package already committed — no action
exists in commit required.

223 : (DF) <product name> Signature file does not I Distribution is incomplete — contact
exist in Distrib directory Support

225: (E1) Failed to establish Counter configuration I Retry, and if problem persists, contact

(ie determine whether MCO Gateway,
SCO or Slave).

Support.

K.V Morley

Page 4 of 7

2/19/2009

FUJ00155486

FUJ00155486

TIVOLI DOWNLOAD PACKAGE
LFS_COUNTER 44.1

SwbDistrib Error Codes

Error No Possible Reason Suggested Action

151 : (97) Internal error. Contact Support at BRAO1.

152 : (98) No package distribution found on any of I Distribution error. Possibly the main
the counters. package was not distributed at all.

Redistribute main package to the
chosen distribution counter at the
outlet (usually Gateway).

153 : (99) DAFTER script failed with error <error The error codes are given in the table
code>. of errors for the product.

154 : (9A) SwDistrib timed out. SwDistrib has Probably a comms problem, or the
repeatedly cycled round trying to counter(s) with the software is (are)
connect to the other counters to pull Offline.
across the software but has not been
able to connect to one, or there has been
a problem with pulling across the
software.

156 : (9C) SwDistrib delivered to invalid target Check the package has the correct
directory. It is not running at a level of target directory.
the form ...GenericCommit \ <product> \
<version >.

157 : (9D) SwDistrib digital signature check failed. The SwDistrib files in the
GenericCommit folder are incomplete
or defective. They may need
reinstalling

158 : (9E) Syntax error in middle-products name Contact Support at BRAO1.

file. Indicates an internal error.

Note - SwDistrib also produces a 221 for “Error: Commit Sig found”. This code is the same as
that used in the standard Dafter.bat script.

Information events will appear in the Event Log under source "InstallSW" as follows:

Desktop has been successfully brought down
Copied \ Registered OK

Riposte Service restart invoked

Restart of Pathway Services invoked
Desktop running again

Update process exited

K.V.Morley

Page 5 of 7

2/19/2009
TIVOLI DOWNLOAD PACKAGE
LFS_COUNTER 44.1

FUJ00155486
FUJ00155486

CM : The following files have been delivered to wsysdel01\cmpost$, under \Rel_T86$rnt8601 :
Volume in drive D is DATA

Volume Serial Number is 4893-E8F5

Directory of D:\Release\REL_T86$RNTS8601

30/09/2008 14:35 <DIR> .

30/09/2008 14:35 <DIR> a
30/09/2008 14:35 <DIR> COUNTER
0 File(s) 0 bytes

Directory of D:\Release\REL_T86$RNT8601\COUNTER

30/09/2008 14:35 <DIR> .

30/09/2008 14:35 <DIR> .
30/09/2008 14:35 <DIR> SISLFS_COUNTER
0 File(s) 0 bytes

Directory of D:\Release\REL_T86$RNT8601\COUNTER\SIS$LFS_COUNTER

30/09/2008 14:35 <DIR> .

30/09/2008 1 5 <DIR> .
30/09/2008 14:36 <DIR> 44 1$44 0
0 File(s) 0 bytes

Directory of
D:\Release\REL_T86$RNT8601\COUNTER\SI$LFS_COUNTER\44_1$44_0

30/09/2008 <DIR> :
30/09/2008 <DIR> os
25/09/2008 94,208 CABSProcess.exe
30/09/2008 5,763 CATCHUP.BAT
13/06/2005 35,840 Ccopy.exe
20/01/1999 31,744 chktask.exe
30/09/2008 8,277 COMMIT.BAT
24/05/2002 28,672 CounterCon.exe
30/09/2008 2,555 DAFTER.BAT
01/09/2004 1,142 FEXE_RGR.BAT
30/01/2004 1,393 FEXE_UPD.BAT
01/09/2004 1,217 FEXE_URB.BAT
01/09/2004 1,575 FOLE_RGR.BAT
01/09/2004 1,867 FOLE_UPD.BAT
01/09/2004 1,618 FOLE_URB.BAT
13/05/1999 28,160 launcher.exe
01/08/2007 307,200 LFSConfirm.dll
04/01/2007 102,400 LFSEndOfDay.exe
04/04/2007 135,168 LFSInterface.dll
28/07/2005 53,248 LFSNVStock.dll
06/10/2005 73,728 LFSPServer.dll
28/07/2005 40,960 LFSView.dll
30/09/2008 2 LFS_COUNTER*44_1.SIG
07/03/2005 38,400 logevt.exe
20/03/2001 542 LOGNTEVT.BAT
21/08/1996 45,136 psapi.dll
30/09/2008 6,347 REGRESS.BAT
24/04/1998 37,136 regsvr32.exe
02/02/1999 22,016 Waitasec.exe
16/02/1999 : 31,744 waiter.exe

28 File(s) 1,138,058 bytes

Total Files Listed:

K.V.Morley Page 6 of 7 2/19/2009
FUJ00155486
FUJ00155486

TIVOLI DOWNLOAD PACKAGE
LFS_COUNTER 44.1

28 File(s) 1,138,058 bytes
1l Dir(s) 29,530,963,456 bytes free

K.V.Morley Page 7 of 7 2/19/2009
