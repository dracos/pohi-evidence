FUJ00089582

FUJ00089582
oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
Document Title: DRS Host Support Guide
Document Reference: DEV/APP/SPG/0028
Release: HNG-X 14.60
Abstract: This document details the TWS scheduling of the DRS Host
processes including NWB, DCP and ETU.
Document Status: APPROVED
Author & Dept: Wing Pang & Tony Dolton
External Distribution:
Security Risk YES, see section 0.9
Assessment Confirmed
Approval Authorities:
Name Role Signature Date
Steve Parker ssc
See HNG-X Reviewers/Approvers Matrix (PGM/DCM/ION/0001) for guidance on who should approve.
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN
p copia CONFIDENCE) Ref. DEV/APP/SPG/0028
Version 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED Page No: 1 of 123
FUJ00089582

FUJ00089582
oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

0 Document Control
0.1 Table of Contents
0 DOCUMENT CONTROL.. 2
0.1 Table of Contents. 2
0.2 Document History. 8
0.3 Review Details...... 8
0.4 Associated Documents (Internal & External).
0.5 Abbreviation: 10
0.6 Glossary... 4
0.7 Changes Expected. 12
0.8 Accuracy.......... 12
0.9 Security Risk Assessment... 12
1.1 Document Overview..
1.2 DRS Data Flow Diagram.
2 INSTALLATION.....
2.1 Environment Variable: 16
2.2 Directories. 17
2.3 Unix Users. 18
2.4 Oracle Tablespaces and Raw Volumes. 19
2.5 Database Roles and Users.

2.5.1

2.5.2

2.5.3

2.5.4 DRS Workstation User Account Closur

2.5.5 I DRS Workstation User Account Unlockin:

3 TWS RESOURCES..
4 TRANSACTION VOLUMES AND DATABASE STORAGE CAPACITY....24
5 PROCESS FAILURE AND RECOVERY.........sscssssssssesssessssssetesserssetseetenses 20
5.1. Automatic re-run by TWS..
5.2 Failures due to Oracle Error. 25
5.3 Failures due to Application and System Erro 26
© Copyright Fujitsu Si FUJITSU RESTRICTED (COMMERCIAL IN
Cinited 9018 ‘yitsu Services CONFIDENCE) Ref: DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY __ Date: 19-Apr-2017

STORED PageNo: 2 of 123
DRS Host Support Guide

(ee)
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

FUJ00089582

FUJ00089582

6 NETWORK BANKING SCHEDULE DETAILG..........cccssssssssessseseereeeseeeee 26

6.1. Schedule M_DB_SRV#DRS_NWB_SOD.
6.1.1 Dependencies...
6.1.2 Process DRSC3:!

6.2 Schedule M_DB_SRV#DRS_TIDY_ORA.
6.2.1 Dependencies..........
6.2.2 Process HousekeepOrafiles.sh.

6.3 Schedule M_DB_SRV#DRS_ETU_C4LD
6.3.1 Dependencies...
6.3.2 Process DRSC305.
6.3.3 Process DRSC306.

6.4 Schedule M_DB_SRV#DRS_NWB_ANALYZ!
6.4.1 Dependencies...
6.4.2 Process DRSC368.

6.5 Schedule M_LDB_SRV#DRS_RDDS_EXTRACT.
6.5.1 Dependencies. we
6.5.2 Process DRSC364 oe

6.6 Schedule M_DB_SRV#DRS_NWB_C12_PARS.
6.6.1 Dependencies...
6.6.2 Process DRSC301

6.7 Schedule M_DB_SRV#DRS_NWB_SOB.
6.7.1 Dependencies...
6.7.2 I Process DRSC35:

6.8 Schedule M_DB_SRV#DRS_NWB_C4_PARSE.
6.8.1 Dependencies. we
6.8.2 Process DRSC302. we

6.9 Schedule M_DB_SRV#DRS_NWB_TPS_CO!
6.9.1 Dependencies...
6.9.2 Process DRSC303

6.10 Schedule M_DB_SRV#DRS_NWB_MS_NIGHT.
6.10.1 Dependencies..........

6.11. Schedule M_DB_SRV#DRS_NWB_MS_EXCPTN
6.11.1. Dependencies...
6.11.2 Process DRSC311

6.12 Schedule M_DB_SR'
6.12.1 Dependencies...
6.12.2 Process DRSC366

6.13 Schedule M_DB_SRV#DRS_NWB_REP_101
6.13.1 Dependencies...
6.13.2 Process DRSC32:
6.13.3 Process DRSC324.

6.14 Schedule M_LDB_SRV#DRS_NWB_REP_102.
6.14.1 Dependencies
6.14.2 Process DRSC:
6.14.3 Process DRSC323.
6.14.4 Process DRSC325.

6.15 Schedule M_DB_SRV#DRS_REP_000.
6.15.1 I Dependencies.

© Copyright Fujitsu Services
Limited 2015 CONFIDENCE)
Version: 5.0

UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED PageNo: 3 of 123

Ref: DEV/APP/SPG/0028
DRS Host Support Guide

(ee)
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

FUJ00089582

FUJ00089582

6.15.2 Process DRSC328.
6.16 Schedule M_DB_SRV#DRS_ADMIN.
6.16.1 Dependencies...
6.16.2 Script DRSX365.
6.17 Schedule M_DB_SRV#DRS_NWB_ADMIN
6.17.1. Dependencies...
6.17.2 Process DRSC361
6.17.3 Process DRSC368.
6.17.4 Script DRSX362...
6.18 I Schedule M_DB_SRV#DRS_NWB_TRN_ACK.
6.18.1 Dependencies
6.18.2 Process DRSC367
6.19 Schedule M_DB_SRV#DRS_COMPLETI

7 DEBIT CARD SCHEDULE DETAILS. 44

7.4 Schedule M_DB_SRV#DRS_EFT_SOD..
7.1.4 Dependencies...
7.1.2 I Process DRSC35I

7.2 Schedule M_LDB_SRV#DRS_EFT_ANALYZE.
7.2.1 Dependencies...
7.2.2 Process DRSC368.

7.3 Schedule M_DB_SRV:
7.3.1 Dependencies...
7.3.2 Process DRSC301

7.4. Schedule M_DB_SRV#DRS_EFT_PF_GEN
7.41 Dependencies...
7.4.2 Process DRSC30

7.5 Schedule M_DB_SRV#DRS_EFT_STS_C40.
7.5.1 Dependencies...
7.5.2 Process DRSC308
7.5.3 Process DRSC305.

7.6 Schedule M_DB_SRV#DRS_EFT_STS_C40
7.6.1 Dependencies...
7.6.2 Process DRSC308.
7.6.3 Process DRSC305.

7.7. Schedule M_DB_SRV#DRS_EFT_SO!
7.7.4 Dependencies...
7.7.2 Process DRSC353

7.8 Schedule M_DB_SRV#DRS_EFT_S.
7.8.1 Dependencies...
7.8.2 Process DRSC30:

7.9 Schedule M_DB_SRV#DRS_EFT_!
7.9.1 Dependencies.
7.9.2 Process DRSC305

7.10 Schedule M_DB_SRV#DR:
7.10.1 Dependencies...
7.10.2 Process DRSC306.

7.41. Schedule M_LDB_SRV#DRS_EFT_C4_PARSE.
7.11.1 Dependencies.

© Copyright Fujitsu Services (! Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) °
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017

STORED PageNo: 4 of 123
DRS Host Support Guide

(ee)
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

FUJ00089582

FUJ00089582

7.11.2 Process DRSC302.
7.12 Schedule M_DB_SRV#DRS_EFT_C4_RCPTD..
7.12.1 Dependencies...
7.12.2 Process DRSC37I
7.13 Schedule M_DB_SRV#DRS_EFT_TPS_COPY.
7.13.1 Dependencies...
7.13.2 Process DRSC303.
7.14 Schedule M_DB_SR'
7.14.1 Dependencies..........
7.14.2 Process DRSC310 [NIGHT
7.45 Schedule M_DB_SRV#DRS_EFT_MS_EXPTN.
7.15.1 Dependencies...
7.15.2 Process DRSC311
716 Schedule M_DB_SRV#DRS_EFT_REP_101..
7.16.1 Dependencies...
7.16.2 Process DRSC322
7.16.3 Process DRSC324
717. Schedule M_DB_SRV#DRS_EFT_REP_102..
7.17.1. Dependencies...
7.17.2 Process DRSC320.
7.17.3 Process DRSC323
7.17.4 Process DRSC325
7.48 Schedule M_DB_SRV#DRS_EFT_ADMIN..
7.18.1 Dependencies...
7.18.2 Process DRSC361
7.18.3 Process DRSC368.
7.18.4 Script DRSX362.s
7.18.5 DRS_EFT_AUDIT.
7.49 Schedule M_DB_SRV#DRS_EFT_TRN_ACK.
7.19.1 Dependencies...
7.19.2 Process DRSC36
7.20 Schedule M_LDB_SRV#DRS_EFT_PF_SIM.
7.20.1 Dependencies...
7.20.2 Process DRSC372

8 DRS TABLES OVERVIEW. .......ccsssssssesessssessserseeeesesssesssessensenssenesensneneaes 65

8.1 Common Tables.
8.2 System Parameters.
8.3 DRS Tables.
8.3.1 Static Data Table:
8.3.2 Control/Registry Data Tables.
8.3.3 Transaction Data Tables...

9.1 Input and Output Data Files......
9.1.1 Network Banking & Electronic Top-Ups.
9.1.2 Debit Car

9.2 Report Files..

72

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028

CONFIDENCE)
Limited 2015 Version: 5.0

UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED PageNo: 5 of 123
CONFIDENCE)

FUJ00089582

FUJ00089582

oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN &

9.2.1 Network Banking (Including ETU) and Debit Card.
9.3 Oracle Export Files for Audit, Archive and Support.
9.3.1 Network Banking and Debit Card.
9.4 DRS File Housekeeping Parameter:

10 SUPPORT USAGE OF ARCHIVE/SUPPORT EXPORT FILEG................ 78

11. BACKUP AND RECOVERY.

11.1 Backup.
11.2 Recover
11.2.1 Process Failu
11.2.2 System Failur
11.2.3. Media Failure.

12 EXTERNAL SYSTEM FAILURES/RESTARTS........:cssssseseeseeeeeeeees BO

12.1 TPS Host/Agent Failure........
12.1.1 ©112 Confirmation Agent Failure.
12.1.2 TPS Host failure...............

12.2 RDDS Host Database Failure.

12.3 TES Host Database Failure.

12.4 FTMS Report-file Transfer

12.5 TWS File Transfer Failure...

12.6 Audit Server File Transfer Failur

13. TUNING... ccccesececsssseessceseesssceessecesasensesssecesasersreseeseseseseeaneeseeesenecesesereneese 82

13.1 Oracle Tuning..
13.2 Schedule tunin:
13.2.1 Schedule parallelism.
13.2.2 Resource pools...

13.3 Main store partition tuning. 3
13.4 SQL hint tuning. 84
APPENDIX A — NETWORK BANKING TWS SCHEDULE..........ccccsssseesssereeeees 85
APPENDIX C —- TABLESPACES AND RAW VOLUMEG.........:ccssccseseseseeerseeees 87

Common Table.
Network Banking Table:
Debit Card Tables.

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) °
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017

STORED PageNo: 6 of 123
FUJ00089582

FUJ00089582
oe) DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN &
CONFIDENCE)

APPENDIX F — DRS ARCHIVING TABLE MAPPING..........ccceeceeseeeeerees 123
Oc ht Fujitsu Si FUJITSU RESTRICTED (COMMERCIAL IN pay
Limited 218 ‘ujitsu Services CONFIDENCE) reson BP PISPsIog2®

UNCONTROLLED IF PRINTED OR LOCALLY _ Date: 19-Apr-2017

STORED

PageNo: 7 of 123
FUJ00089582
FUJ00089582

DRS Host Support Guide

(ee)
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

0.2 Document History

Version No. Date Summary of Changes and Reason for Issue Associated Change -
CP/PEAK/PPRR.
Reference

01 27/7/2009 Initial build of HNG-X document from Horizon (NB/MAN/003)

02 18/8/2009 Update in response to review comments

03 29/9/2009 Further one-line change in response to comments.

04 26/10/2009 Incorporating review comments

1.0 28/10/2009 Approved version

14 25/11/2009 Update for Peak and General corrections PC0189339

1.3 21/12/2010 Additional amendment for Horizon decommissioning CP419

14 09/05/2013 Update for Channel Integration 2a P0842

1.5 15-May-2013 Minor corrections to template and reviewers CP0842

2.0 07/06/2013 Approved version

24 31/10/2014 Added SSC_TOOLS user (section 2.5.2). P1305

22 18/12/2014 Updated for comments received. Updated to match the latest

schedule (sections 6, 7 and 11, most notably 6.2 and 7.4 to 7.9).

23 21/01/2015, Updated for comments received.

3.0 21/01/2015 Version for approval. P1305 / R11.47

34 16/06/2016 Addition of <SchemeRefData> and <R3Tsmp> to payment file CP1758

3.2 18/07/2016 Updated for comments received

40 18/07/2016 Version for approval

41 15/03/2017 Reference to DAT RMAN BACKUP. R17.10

42 20/03/2017 Updated for comments received

5.0 19/04/2017 Approval version

0.3 Review Details

See HNG-X Reviewers/Approvers Matrix (PGM/DCM/ION/0001) for guidance on completing the lists
below. You may include additional reviewers if necessary, but you should generally not exclude any of the
mandatory reviewers shown in the matrix for the document type you are authoring.

Review Comments by

Review Comments to

Mandatory Review

Role

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIALIN por. DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) °
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED

PageNo: 8 of 123
ee]
FUJITSU

DRS Host Support Guide

CONFIDENCE)

FUJ00089582
FUJ00089582

FUJITSU RESTRICTED (COMMERCIAL IN

ssc

Steve Parker; sscdm¢_

Solution Design / Infrastructure Design

Pete Jobson *

Core Services Andrew Gibson*

SV&l Manager Ray Wodhams*

Optional Review

Role Name

SMC Team Jacob Cherian; FC.IN.OL_SMC_MANAGEMENT(_
Testing Manager Mark Ascott

Lead SDM Problem & Major Incident ‘Steve Bansal

Application Lead SDM, Risk and Service Introduction

Yannis Symvoulidis

R&R Principal CSA.

Tim Jones

Host Development

Tony Dolton

Host Development

Issued for Informatio!
distribution list to a minimum

Position/Role

Gareth Seemungal

Name

(*) = Reviewers that returned comments

0.4 Associated Documents (Internal & External)

ference Version Date Title Source
PGM/DCM/TEM/0001(D POA Generic Document Template Dimensions
O NOT REMOVE)
ARC/GEN/REP/0001 HNG-X Glossary Dimensions
PGM/DCM/ION/0001 RMGA HNG-X Document Dimensions
Reviewers/Approvers Role Matrix
ARC/APP/ARC/O07 HNG-X Batch Services Architecture Dimensions
DES/SYM/HLD/0016 HNG-X Scheduling High Level Design Dimensions
DES/SYM/HLD/0015 POA HNG-x Backup and Recovery High Dimensions
Level Design
ARC/SEC/ARC/0003 HNG-X Security Architecture Dimensions
DES/APP/HLD/0033 Data Reconciliation Service High Level Dimensions
Design (Delta)
DES/APP/HLD/0108 DRS Host Sizing HLD Dimensions
PGMIPASIPRO/0003 HNG-X Design and Build Methodology — Dimensions
Build and Unit Test process
DES/APP/HLD/0089 TES Host Scheduling High Level Design Dimensions
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIALIN por. DEV/APP/SPG/0028
Limited 2015 CONFIDENCE)
Version 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED PageNo: 9 of 123
FUJ00089582

FUJ00089582
oe) DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
DES/APP/HLD/0091 HNG-X Host Scheduling High Level Design I Dimensions
DES/APP/IFS/0007 Branch Database to Legacy Host Interface I Dimensions
DEV/APP/SPG/0026 TPS Host Support Guide Dimensions
DEV/INF/LLD/0043 HNG-x SAN Storage Mapping Dimensions
PAPER/O33 Horizon Capacity Management and Dimensions
Business Volumes
SVM/SEC/PRO/0006 APPLICATION FOR ACCESS TO THE Dimensions
LIVE NETWORK
EF/DES/009 Debit Card System EMIS Timestamp Dimensions
Correction Design Proposal
NB/HLD/003 NWB Data Reconciliation Service High Dimensions
Level Design
NB/HLD/026 DRS Host Application and Workstation High I Dimensions
Level Design Delta for IMPACT Release 3
NB/MAN/003 DRS Host Support Guide (Horizon) Dimensions
EF/IFS/003 DCP DRS Product Interface Specification I Dimensions
DES/APP/IFS/0006 RAC Message Flows in HNG-X Dimensions
DES/APP/SPG/3258 DAT RMAN BACKUP SUPPORT Dimensions
GUIDE

Unless a specific version is referred to above, reference should be made to the current

approved versions of the documents.

0.5 Abbreviations

Abbreviatic Definition

BCV Business Continuity Volume
BRDB Branch Database

cl Channel Integration

DcP Debit Card Project. New name for EFTPoS/Debit Card Service
DRS Data Reconciliation Service

Dw Fujitsu Services Data Warehouse

EFT EFTPoS. Old name for Debit Card Project

EMIS. Electronic Management Information Service

EOD End of Day

ETS Electronic Top-Up Service

ETU Electronic Top-Up

FTMS File Transfer Managed Service

HNG-X Horizon Next Generation

© Copyright Fujitsu Services

Limited 2015

FUJITSU RESTRICTED (COMMERCIAL IN Ref:

CONFIDENCE)
Version:
UNCONTROLLED IF PRINTED OR LOCALLY Date:
STORED

Page No:

DEV/APP/SPG/0028
5.0

19-Apr-2017

10 of 123
FUJ00089582
FUJ00089582

oe) DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
MA Merchant Acquirer (Debit Card Project specific)
MAC Message Authentication Code
Mis Management Information System
Msu Management Support Unit
NBE Network Banking Engine
NBS Network Banking Service
NsI National Savings and Investments
NWB DRS-specific abbreviation for Network Banking Service
PFG Payment File Generation
PODG Post Office Data Gateway
POL Post Office Limited
RMAN Oracle Recovery Manager
TES Transaction Enquiry Service
TIP (POLMI!) Transaction Information Project (Now known as POLMI)
TPS Transaction Processing System
Tws Tivoli Work Scheduler
XML eXtensible Mark-up Language

0.6 Glossary

DRS System Date The logical DRS business day. DRS business day falls between running DRS Start
of Day and DRS End of Day jobs. Normally same as the calendar day DRS Start of
Day was run on.

Eternus A storage system supplied by Fujitsu.

Reconciliation Date The Reconciliation Date is the date attributed to a transaction to allow PO Ltd to
reconcile. It will be set to the first available Settlement Date from the Transaction
Elements ([C112], [C12], [C4], [S], [D]) that make up that transaction. If no
Settlement Date is available, the Reconciliation Date will be set to the processing
date that the DRS first recorded any element of the transaction. If a Settlement Date
subsequently becomes available, the first available Settlement Date will replace the
processing date. However, once a transaction has been accounted for on a
reconciliation report, the Reconciliation Date will never change.

Routing Gateway The Routing Gateway as defined Network Banking Message Flows and Interfaces
[DES/APP/IFS/0006].
Run Date The DRS logical date listed on a report and shows which calendar day the data is

for. It is same as DRS System Date in all cases except NB103 reports where it is a
day (configurable) behind DRS System Date.

Settlement Date The date on which the Client has settled the transaction (in some instances a
default is set by the Banking Host). The Settlement Date will be allocated by the
Client (or failing that the Banking Host) and included in both authorisations and

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) °
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED Page No: 11 of 123
FUJ00089582
FUJ00089582

oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

confirmations. The [C4], [S], and [D] always contain a Settlement Date. Other
messages may contain a Settlement Date

0.7 Changes Expected

Cee

0.8 Accuracy

Fujitsu Services endeavours to ensure that the information contained in this document is correct but, whilst
every effort is made to ensure the accuracy of such information, it accepts no liability for any loss
(however caused) sustained as a result of any error or omission in the same.

0.9 Security Risk Assessment

Security risks have been assessed and it is considered that there are no security risks relating specifically
to this document.

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) °
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017

STORED PageNo: 12 of 123
oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

FUJ00089582

FUJ00089582

1 Introduction

1.1 Document Overview

This document describes the operational requirements of the DRS application. The document
also describes the procedures for supporting and tuning the application.

The introduction of ETU and NSI transactions at S50 are considered, for the purposes of this
document, to be a subset of Network Banking transactions. The DRS is not performing any ETU
or NSI specific functionality.

Like other pathway host systems, the DRS application has been designed to fail-over from one
data centre to the fallback data centre without the need for operator intervention. The restart
which requires an operator intervention can be done on the fall-over data centre.

DRS application performs two main functions during a business day:

14. Provide a high throughput Reconciliation Service handling Debit Card, and Network Banking
transactions in large volumes.

2. Provide an Online Database for 91 (configurable) days to support the Reconciliation Reports
and the Online Query and Resolution System.

The database schema and application modules that primarily deal with the first function have
been designed to provide high throughput and make use of parallelism in processing.

The schema objects and modules (batch and online) that facilitate the second function have
been designed to meet the query requirements with quickest response time.

Most DRS jobs that run as a part of the Network Banking and Debit Card TWS Schedules make
use of checkpoints. These checkpoints are created/maintained in the database and offer the
following benefits:

* Minimise the work that needs to be re-done in the event of fail-over from one data centre
to the other.

* Prevent duplicate report files being produced for the report clients (MSU/Audit/TIP
(POLMI)).

e Avoid re-creating transient objects and data in case of a re-start.

The DRS TWS schedule must be run once for each calendar day’. DRS records the Current
Working Day in the database in order to ensure that a process is not run twice or not skipped in
the event of fail-over from one data centre to the other.

'ETS schedule items where distinct from NBS are included in the NBS schedule

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) °
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017

STORED PageNo: 13 of 123
oe) DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

FUJ00089582
FUJ00089582

The document provides the following appendices for quick reference:
Appendix A — Network Banking TWS Schedule

Appendix B — Debit Card TWS Schedule

Appendix C - Tablespaces and Raw Volumes

Appendix D — DRS Tables

Appendix E - DRS Exceptions

Appendix F - DRS Archiving Table Mapping

Appendix G — DRS File Housekeeping Parameters

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref:

Limited 2015 CONFIDENCE)
Version:

UNCONTROLLED IF PRINTED OR LOCALLY Date:
STORED

Page No:

DEV/APP/SPG/0028
5.0

19-Apr-2017

14 of 123
FUJ00089582
FUJ00089582

oe) DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

1.2 DRS Data Flow Diagram

Audit Transactions to Transactions to POL FS &
Server and from DCSM and from TES POL MIS
Vv. - ry ry oA i

C2 Status I C4,D,S Cc4.D.S :
Audit fe I bcs Des 62 nwa Reports 4)

date SO] i a
Workstation DRS TPS
TIP Receipts

Non-palled offices

Accounting weeks I __
Client Info. cid
7 besa we

RDDS

Transactions from
Branch Database

The C12 transaction parts are input into DRS database by a batch process that runs once per
day on the Branch Database.

DCS C2 transaction parts are output to the MA through Agents using a file interface. At S75,
NBS C2 transaction parts are copied from the DRS by the TES Host application over a database
link.

The C112 transaction parts are input into DRS from TPS over a unique database link from DRS
to TPS database The DRS requires financial C112 transaction parts only, not Balance Enquiry's
or PIN changes. Furthermore a list of Non Polled Offices and TIP (POLMI) receipted Cash
Account Lines are also input into DRS from TPS. /t is believed that this data was required
historically simply to transfer the Cash Account Period to DRS. With the replacement of the
Cash Account with the BTS (Branch Trading Statement), this flow I not required. Also, at HNG-X
there will be no non-polled offices and therefore the entire feed from TPS appears to be
redundant (although still necessary as part of the DRS schedule).

NBS C4/D transaction parts are copied from the TES Host application over a database link.
These transactions are written directly into the DRS C4/D daily main and daily main exception
tables.

At S80, the cash account is replaced by the branch trading statement. This will entail removing
the NB103 report and supporting processes. Additionally some NB102 report titles will be
modified. The DRS changes are detailed in the high level design [DES/APP/HLD/0033].

The Account Week and Client Information are input into DRS from RDDS. Again, the data is
copied over a unique database link from DRS to RDDS database.

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) °
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017

STORED PageNo: 15 of 123
oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

FUJ00089582

FUJ00089582

The DRS produces a number of ASCII Text Reconciliation Reports which are transferred to the
MIS Workstation, POCL TIP (POLMI) and the Audit Server.

The Network Banking and Debit Card transactions stored in DRS database are sent to the Audit
Server in Archive format.

The DRS Workstation accesses the DRS database for MSU On-line Queries.

Within DRS Host the transaction parts C12, C4, D and S are first stored in XML format as
received from the Agents. The C112 transaction parts are copied directly from TPS transaction
table to DRS transaction table. Therefore, C112 transaction parts are not stored in XML format.

Next, the DRS Parse and Load Process parses, validates and loads the data into a set of Daily
Input tables. These tables are transient and are emptied every day. Any transaction parts which
fail the validation are stored in Daily Exceptions tables.

At S60 new functionality required the Receipt Date to be correctly set on DCS C4/D transaction
parts derived from HMS EMIS files. The full requirements are defined in Design Proposal
EF/DES/009 and implemented in schedule DRS_EFT_C4_RCPTD.

Finally, the DRS Match and Merge Process reads the Daily Input and Exceptions tables and
moves the matched and merged data into a permanent storage called DRS Main Store. The data
in DRS Main Store is kept for a configurable number of days currently set to 91 days.

All the Reconciliation Reports and MSU On-line Queries access data from DRS Main Store. The
Reconciliation Reports and MSU On-line Queries also make use of the reference data copied
from TPS and RDDS.

At S90, a new flag is introduced to C12 and C2 message parts to allow the agent payment file
generation process to distinguish Bureau transactions from sale transactions. Additionally, two
new transaction types will be introduced to support Bureau settlement. Further details of the S90
release changes are documented in HLD NB/HLD/026.

2 Installation

2.1. Environment Variables

All the DRS environment variable names and values are present in the “/home/drs/.vars” file.
When a DRS user logs in, all the variables are "exported" so that they become available to the
DRS executables.

The following table lists the name and values of all the environment variables used by DRS.

The “Accessed by” column in the table below indicates that this directory is accessed by another
application through NFS to move the data in and out of DRS. The details of the data access will
be specified in the IPDU Main Host Platform Specification or the relevant Application
Specification/User Guide.

Environment Variable Value Accessed by

ORACLE_HOME <Path-of-the-Oracle-Home>

ORACLE_SID DRS

NWB_AUDIT_OUTPUT /ovnw01/drs/trans/drsaudit AUDIT SERVER
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE)

Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017

STORED PageNo: 16 of 123
FUJ00089582

FUJ00089582
oe) DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
NWB_MSU_OUTPUT Jovnw0 1 /drs/trans/drsmsu SSC SERVER
NWB_TIP_OUTPUT Jovnw01 /drs/trans/nwbtip FTMS
NWB_NBE_INPUT Jovnw0t /drs/transinwbC4Din TWS NBE IN
NWB_SUPPORT_OUTPUT Jovnw01/drs/trans/drssupport SSC ARCHIVE SERVER
NWB_ARCHIVE_OUTPUT Ibvnw0t/drsitrans/drsarchive SSC ARCHIVE SERVER
NWB_EXPORT_LOG Jovnw01 /drs/trans/drsexplog SSC ARCHIVE SERVER
EFT_AUDIT_OUTPUT Jovnw0t /drs/trans/drsaudit AUDIT SERVER
EFT_FILE_AUDIT Jovnw0t /drs/trans/depfileaudit AUDIT SERVER
EFT_MSU_OUTPUT Jovnw01/drs/trans/drsmsu SSC SERVER/DCSM SERVER
EFT_TIP_OUTPUT Jovnw0t /drsitrans/efttip FTMS
EFT_NBE_INPUT Jovnw01/drs/trans/eftC4DSin DCSM SERVER
EFT_C2_INPUT Jovnw01/drs/trans/eftC2in DCSM SERVER
EFT_C2_OUTPUT Jovnw0t /drs/trans/eftC2out DCSM SERVER
EFT_SUPPORT_OUTPUT Jovnw01/drs/trans/drssupport SSC ARCHIVE SERVER
EFT_ARCHIVE_OUTPUT Jovnw01/drs/trans/drsarchive SSC ARCHIVE SERVER
EFT_EXPORT_LOG Jovnw01 /drs/trans/drsexplog SSC ARCHIVE SERVER
DRS_CONNECT_STR drs
DRS_PROC Japp_swidrs/c
DRS_SH Japp_swidrs/sh
DRS_SQL Japp_swidrs/sql
DRS_C12_SUM_APP_LOG Jovnw01maestro/applog
EXCP_USER ORAEXCP/EXCP123
DATA_CENTRE_CHAR w
1z GMTOBST -
1,M3.5.0/1:00:00,M10.5.0/2:00:00
NLS_DATE_FORMAT DD-MON-YYYY
NLS_LANG AMERICAN_UNITED
KINGDOM.WE8ISO8859P1
LD_LIBRARY_PATH <Path-of-the-Oracle-
Home>'lib:/ustilib:/optepelib:/usriin
clude
PATH Jbin:/ust/bin: <Path-of-Oracle-
Home>/bin:/app_swidrs/c:/app_sw/
drsish
2.2 Directories
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN por DEV/APP/SPG/0028

Limited 2015

CONFIDENCE)

UNCONTROLLED IF PRINTED OR LOCALLY

STORED

Version. 5.0
Date: 19-Apr-2017
PageNo: 17 of 123
FUJ00089582

FUJ00089582
oe) DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
Following table lists the directories for Network Banking and Debit Card. The table also shows
the minimum storage required on the file-system for these directories. The actual space
allocated could be more and will be set by the System Administrator [ISD].
Directory Name Owner Group Unix Mode Live Size (in
Mbytes)

Joracle/DRS/bdump oracle dba 750 100
Joracle/DRS/edump oracle dba 750 100
Joracle/DRS/udump oracle dba 750 100
Jarchredo/DRS oracle dba 750 20000
Jhome/drs (Home directory common I drs pathway 770 180
to all 9 DRS Unix Users)
Jovnw011/drs/trans/drsaudit drs pathway 770 1200
Jovnw01/drs/trans/drsmsu drs pathway 770 6000
Jbvnw01/drs/trans/drssupport drs pathway 770 9000
Jovnw01/drs/trans/drsarchive drs pathway 770 3000
Jovnw01/drs/trans/drsexplog drs pathway 770 200
Japp_swidrsic drs pathway 550 200
Japp_sw/drs/sh drs pathway 550 10
Japp_sw/drs/sql drs pathway 550 10
Idb_build/DRS oracle pathway 770 100
Jovnw01/drs/trans/nwbtip drs pathway 770 5500
Jovnw01/drs/trans/nwbC4Din drs pathway 770 8000
Jovnw01/drs/trans/efttip drs pathway 770 600
Jovnw01/drs/trans/eftC4DSin drs pathway 770 1500
Jovnw01/drs/trans/eftC2in drs pathway 770 200
Jovnw01/drs/trans/eftC2out drs pathway 770 1000
Jovnw01/drs/trans/depfileaudit drs pathway 770 1500
2.3 Unix Users
The following Unix users are used by DRS Application for Network Banking and Debit Card:
Unix User Name Group Home Profile

I dba /home/oracle /nomeloracle/.profile

I pathway Jnome/drs Ihome/drs/.profile
IRRELEVANT I pathway Jhomeldrs Ihomeldrs/.profile

I pathway /home/drs /homeldrs/.profile

I pathway Jhomeldrs Ihomeldrs/.profile
© Copyright FUJITSU RESTRICTED (COMMERCIAL IN Pet DEViAPPIsPasonz8

UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017

STORED PageNo: 18 of 123
FUJ00089582
FUJ00089582

oe) DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

° I pathway Jhomeldrs Inomeldrs/.profile
‘ pathway Thomeldrs Jhomel/drs/.profile
I pathway /home/drs /nomeldrs/.profile
I pathway Jhomeldrs Inomeldrs/.profile
' pathway Tnomeldrs Jnomeldrs/.profile
I pathway Jnomeldrs Inome/drs/.profile
I pathway Thomeldrs Inomeldrs/.profile

IRRELEVANT I pathway Jnome/drs Ihomeldrs/.profile
I pathway Jhomeldrs Inomeldrs/.profile
' pathway Ihome/drs Jhomeldrs/.profile
I pathway Jhomeldrs Inomeldrs/.profile
I pathway Jnomeldrs Inomeldrs/.profile
‘pathway Thomeldrs Ihome/drs/.profile
I pathway /home/drs /nomeldrs/.profile
I pathway Jhomeldrs Inomeldrs/.profile

2.4 Oracle Tablespaces and Raw Volumes

The details of storage space allocated to DRS database for both Network Banking and Debit
Card are present in Appendix C — Tablespaces and Raw Volumes.

2.5 Database Roles and Users

2.5.1 Roles

DRS has following Oracle roles which are used for both Network Banking and Debit Card:

Role Name Roles Granted ‘System Privs Description
Granted
ALT_MAIN_STOR 1. 9Fa RS-Host users
E IRRELEVANT in order to allow
addidi is of tables

DRS_RX_NWB_MAIN_STORE and

DRS_RX_EFT_MAIN_STORE
APPSUP CONNECT All System privileges I Role has been defined for use by ISD Support which will act

RESOURCE belong to the DBA as first line support team for the DRS Application
role.

AUDITOR MONITOR Role defined for use by InternaV/External auditors of the

system
BRDB_EFTUSER I CONNECT Granted to DRSBRDB interface user to allow C12 insert for
Ss
BRDB_NWBUSE I CONNECT Granted to DRSBRDB interface user to allow C12 insert for
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE)

Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED

PageNo: 19 of 123
oO
FUJITSU

FUJ00089582

FUJ00089582

DRS Host Support Guide
FUJITSU RESTRICTED (COMMERCIAL IN

CONFIDENCE)
RS NWB.
DB_MONITOR CONNECT Select Any Table Role has been defined for use by ISD Support which will act
as first line support team for the DRS Application
DRS_BATCH CONNECT Create Procedure Role is used
RESOURCE Select Any Table IRRELEVANT
Insert Any Table
Create Session
Create Public
Synonym
Update Any Table
Delete Any Table
Drop Public Synonym
Create Database Link
Create Sequence
Create Public
Database link
Create Synonym
Drop Public
Database Link
Create Table
Create View
Select Any Sequence
DRS_EXCEPTIO I CONNECT Role has been granted to user “ORAEXCP" to enable it to log
an operational exception
RESOURCE
MONITOR Select Any Table Role made available for all users that require query-only
access to the system
MSU CONNECT Role will be been granted to DRS Workstation users. in order
to enable them to access the DRS Database. The DRS
RESOURCE Workstation users will be created on demand.
SECURITY_MAN Alter User Role has been defined for use by support staff who are
AGER authorised to administer support users and to investigate
Drop User security breaches
Grant Any Role
Select Any Table
Create User
ssc MONITOR Role has been defined for use by SSC (EDSC) Support
which will act as third line support team for the DRS
Application
TES_USERS Role is used by the TES copy processes and TES Query
applications and has been granted to user “DRSTES’ to
allow the processes to extract parsed [C2] messages. This
role has got the object privileges necessary to read [C2]
messages from DRS database
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN per. DEV/APP/SPG/0028
Limited 2015 CONFIDENCE)
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017

STORED Page No: 20 of 123
oO
FUJITSU

DRS Host Support Guide

FUJ00089582

FUJ00089582

FUJITSU RESTRICTED (COMMERCIAL IN

CONFIDENCE)

T™s Role is used by the NBS [C12] agents and has been granted
to users "TMS_NWB_USER” and "TMS_EFT_USER" to
allow the agents to call the DRS-interface to transfer [C12]
XML records. This role has got the object privileges
necessary to harvest C12 messages into DRS database

UNXADM. CONNECT Role has been defined for use by ISD Support which will act

RESOURCE as first ine support team for the DRS Application
DBA

2.5.2 Oracle Users

DRS has following Oracle Users which are used for both Network Banking and Debit Card:

User Name Default Temp I Roles Granted Privs —_I Description

Tablespace I Table Granted
space
USER_TAB I TEMP I BRDB_EFTUSERS Used by BRDB to push C12 into DRS
LESPACE BRDB_NWBUSERS over a database link.
USER_TAB I TEMP I CONNECT User owns the PLISQL package interface
LESPACE used by the Horizon NBS Agents for
RESOURCE transferring [C12] XML for DCP to DRS.
USER_TAB I TEMP I CONNECT User owns the PLISQL package interface
LESPACE used by the Horizon NBS Agents for
RESOURCE transferring [C12] XML for NWB to DRS.
USER_TAB I TEMP I CONNECT Used by the TES copy process to access
LESPACE TES_USERS the DRS C2 tables.
USER_TAB I TEMP I DRS_BATCH Owns the DRS schema. Has been
LESPACE granted the DBA role in order to allow the
build to create objects in all user
tablespaces and to allow executing jobs
that perform —_purge/housekeeping
functions

IRRELEVANT USER_TAB I Temp I DRS_BATCH Used to execute single instance jobs

LESPACE ALT. MAIN_STORE eluting Meln-Store partition creation for
USER_TAB I DRS_ I DRS_BATCH Used to execute the multiple instance jobs
LESPACE I TEMP. for Network Banking/Debit Card.

1..8
USER_TAB I TEMP I DRS_BATCH Used to execute single instance jobs
LESPACE including Main-Store partition creation for

ALT_MAIN_STORE Network Banking

USER_TAB I DRS_ I DRS_BATCH Used to execute the multiple instance jobs
LESPACE I TEMP for Network Banking

1.8
USER_TAB_ I TEMP Select I Used by the Metron performance
LESPACE Any monitoring tool to gather database

Table _I statistics

USER_TAB I TEMP I DRS_EXCEPTIONS User is used to connect to the DRS
LESPACE database via a concurrent connection in

order to log an operational exception

© Copyright Fujitsu Services

Limited 2015

FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE) Ref. DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY _ Date: 19-Apr-2017
STORED

PageNo: 21 of 123
FUJ00089582

FUJ00089582
oe) DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
useR_taB I Temp I ssc Create I Used by SSC monitoring tools (eg
I LESPACE session I HORIce)
user_tas I Temp I CONNECT Used by the Horizon NBS Agentls to
I LESPACE RESOURCE connect to the DRS database for
: transferring [C12] XML for DCP via the
IRRELEVANT: PL/SQL package interface to DRS.
useR_TAB I TEMP I CONNECT Used by the Horizon NBS Agentls to
LESPACE connect to the DRS database for
RESOURCE transferring [C12] XML for NWB via the
PL/SQL package interface to DRS.

2.5.3 DRS Workstation Users

DRS Workstation users will be created on demand as per Access Control Policy (RS/POL/003).
The DRS Workstation users include the MSU or SSC users who will be accessing the DRS
database using DRS Workstation Application and one or more DRS Workstation Security
Manager users who will be creating and managing DRS Workstation MSU and SSC users.

2.5.3.1. DRS Workstation Security Manager Setup
The procedure for DRS Workstation Security Manager user setup is as follows:

e MSU/SSC will fill the application form as defined in SVM/SEC/PRO/0006 (Application for
Access to the Live Network) to create a new Unix user account on the Host as per the
following details:

User Name: As per SVM/SEC/PRO/0006

User Description: DRS Workstation Security Manager
User Home Directory: /home/drs

Unix Profile: /nome/drs/.profile

User Group: pathway

e Host Administrator/DBA (ISD) will create a Unix user account. Also, they will create an
Oracle account (OPS$<Unix User Name>) in the DRS database. The Oracle account will be
identified "externally". That is, no explicit password will be assigned to the Oracle account.

e Host Administrator/DBA (ISD) will grant SECURITY_MANAGER role to the newly created
Oracle account. The SECURITY_MANAGER role already exists in the DRS database.

For example, the SQL commands to create an Oracle user account for the Unix user imretevanr:
and grant the required role are: denned

(Connect to DRS database as the Oracle user! r a user with DBA privileges)

SQL> create user opst identified externally
default tablespace USER_TABLESPACE temporary tablespace TEMP;
SQL> grant SECURITY_MANAGER to ops!

2.5.3.2 DRS Workstation User Account Setup
The procedure for DRS Workstation user account setup is as follows:

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) °
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017

STORED PageNo: 22 of 123
FUJ00089582
FUJ00089582

oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

« MSU/SSC will fill the application form as defined in SVM/SEC/PRO/0006 (Application for
Access to the Live Network) to create a new Oracle account in the DRS database.

« The DRS Workstation Security Manager will create the DRS Workstation user account by
running a Unix shell script. The script will also create the necessary Oracle synonyms and
grant user the privileges to access the DRS database.

e The Security Manager will confirm to user that account has been created along with
password to use for first logon (the user will automatically be forced to change this).

The steps required by the Security Manager to create a DRS Workstation user are as follows:
e Login to the Host as Security Manager Unix user.

e Execute the following command on the Unix prompt (the shell script is present in the
directory "/app_sw/drs/sh" but the directory has been included in the PATH):

create_drs_workstation_user.sh <Oracle_User_Name> <Oracle_User_Password>

Where the <Oracle_User_Name>
- must start with the letters DRSWKSNWB for Network Banking users and
DRSWKSEFT for Debit Card Project users.
- can be up to 30 characters long and should contain only letters and numbers.
The <Oracle_User_Password>
- must be at least 6 chars long.
- must be a mixture of alphanumeric characters i.e. a mixture of letters and numbers
(must contain at least 1 char in the range a-z,A-Z and 1 char in the range 0-9).
- must not have two consecutive characters the same.
- cannot be the same as the username.

The successful execution of the script displays a number of messages on the standard output.
The exit code of the shell script must be 0 (After running the script, check the exit code using the
command echo $?).

2.5.4 DRS Workstation User Account Closure
The procedure for DRS Workstation user account closure is as follows:
« MSU/SSC will fill in the account closure application form as defined in SVM/SEC/PRO/0006.
e ISD will lock the user account using the following commands:
(Login to the Host as Security Manager Unix user)

sqlplus /

SQL> alter user <Oracle_User_Name> account lock;

SQL> quit;
2.5.5 I DRS Workstation User Account Unlocking

The DRS will lock MSU/SSC Oracle user accounts following 3 unsuccessful logon attempts. In
the event of this

¢ Call will be raised with ISD.

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) °
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017

STORED PageNo: 23 of 123
FUJ00089582

FUJ00089582
oe) DRS Host Support Guide

FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN

CONFIDENCE)

¢ ISD will unlock the account. If the password has been forgotten, it will be reset and the
account status will be set to "password expired"(to force password change on first use). The
procedure for unlocking the account and/or resetting the password follows:

(Login to the Host as Security Manager Unix user)
sqlplus /
SQL> alter user <Oracle_User_Name> account unlock;
SQL> alter user <Oracle_User_Name> identified by <Temporary_Password>;
SQL> alter user <Oracle_User_Name> password expire;
SQL> quit;

e Confirmation will be sent by ISD to the user that the account has been unlocked along with
temporary password to use (the user will automatically be forced to change this at the first
logon).

3 TWS Resources

No TWS resources have been explicitly defined in the DRS Network Banking and Debit Card

project schedules.

4 Transaction Volumes and Database Storage
Capacity

This section has been included only for reference and to provide a brief description of the
expected data volume and the method used to estimate the database storage required. The
details of the current and the estimated transaction volumes are available in PA/PER/033. The
details of the sizing analysis for the DRS database are available in DES/APP/HLD/0108.
As described in DES/APP/HLD/0108, the DRS database can handle Phase-2 ‘Design-Limit’
volumes of 4.45 million (combined) Network Banking, Debit Card and Electronic Top-Up
transactions. Further, to handle situations where all the transactions for a day are not harvested
until the following day, i.e., two days of transactions are harvested on a single day, the DRS
tables have been sized to handle up to 8.6 million transactions. Note: At HNG-X, the non-
harvesting of transactions is not possible since the TWS Schedule dependencies will not allow it.

The storage required for the DRS Main Store table, which keeps the data online for up to 91

days, has been estimated as follows:

Measure Value

Peak daily transactions (Contract Limit) 3,711,000

Peak daily transactions (Design Limit) 4,445,000

Number of Days for which the data is stored 91 Days

Average Main Store record size 460 bytes

Maximum Main Store record Size 767 bytes

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN

imiteg Ss I} CONFIDENCE) Ref: DEV/APP/SPG/0028

Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 49-Apr-2017

STORED Page No: 24 of 123
DRS Host Support Guide

(ee)
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

FUJ00089582
FUJ00089582

Database Storage required for one day considering average daily transaction 3,711,000 * 767
volumes where each record is of maximum size =26508

Storage allocated at BI3 for one day's Main Store data 2000MB

Additional Storage required input/output, Report tables and indexes 136GB

Total Database size considering peak daily transaction volumes 2000MB * 91 days +
136GB

=314GB

5 Process Failure and Recovery

DRS Host processes can fail due to Oracle, Application or System errors. The various types of
error conditions leading to process failure and the possible recovery actions are common for
most processes and are listed below:

5.1 Automatic re-run by TWS

In some cases, if a process instance fails a recovery job is automatically started by TWS, which
effectively reruns the process instance once.

For example, TWS reruns a failed instance of C12 Parser. The auto rerun of an instance is done
only once. Subsequent failures on the same instance require manual intervention.

5.2 Failures due to Oracle Error

In case of Oracle failures such as ‘Object does not exist’ or ‘Insufficient Oracle privileges’ or
‘Insufficient Rollback segments’ or ‘Unable to access database links’ and others, an Operational
Exception is logged in the DRS Operational Exceptions table along with the SQL statement that
caused the failure.

Please refer to Oracle message manual (or “oerr ORA ###’ from a command prompt) for
advice on the appropriate recovery action for all such failures.

5.3 Failures due to Application and System Error

In case of Application errors such as invalid reference data or reference data does not exist, an
exception to indicate process failure is raised and recorded in the DRS Operational Exceptions
table which would be highlighted IBM Tivoli Monitoring.

In case of System errors such as errors related to the Operating System please refer to the
Operating System manual for advice on the appropriate recovery.

All DRS processes can be restarted after rectifying the cause of failure.

6 Network Banking Schedule Details

The Network Banking TWS Schedule includes network banking specific jobs and the jobs which
are common (like Reference Data Copy) between Network Banking and Debit Card.

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028

CONFIDENCE)
Limited 2015 Version: 5.0

UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED Page No: 25 of 123
FUJ00089582

FUJ00089582
oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
For each job in the schedule, a brief description is included along with implementation details,
Job dependencies (if any) and Rerun action in case of a failure.
Implementation includes the Job name as used in the TWS Schedule. Full details of the Jobs
including the command-line parameters being passed can be found in DES/APP/HLD/0091
6.1 Schedule M_DB_SRV#DRS_NWB_SOD
This is the start of the DRS Network Banking schedule. It will start after the database restart on
completion of cold backup at around 8am.
6.1.1. Dependencies
Follows successful completion of the DRS Network Banking schedule for the previous logical
processing day (implemented via a dependency on existence of the
DRS_NWB_BATCH_COMPLETE.FLAG).
Precedes schedules DRS_RDDS_EXTRACT, DRS_TIDY_ORA, DRS_NWB_ANALYZE,
DRS_NWB_C12_PARS, DRS_ETU_C4LD.
6.1.2 Process DRSC350
Process DRSC350 runs at the start of the DRS Network banking day to set the working day for
the schedule, create the Main Store (DRS_RX_NWB_MAIN_STORE) partition for that working
day and re-set various flags.
The DRS working day is controlled by two logical dates that are stored as “DRS SYSTEM DATE”
and “PARTITION RECEIPT DATE” system parameters for the Application Type "NWB" in the
database. These dates normally correspond to the System Date on the Rig with the exception of
a post fail-over catch-up situation where the dates could lag by one or more days.
DRSC350 will also perform partition maintenance on the NBS C2 tables. New partitions are
created and old partitions dropped. The DRS_NRT_INTERFACE_METADATA table is updated
to reflect the partition state of each C2 output table.
6.1.2.1. Implementation
Implemented in the M_DB_SRV#DRSC350N job (postfix "N" stands for Network Banking).
6.1.2.2 Job Dependencies
This job is dependent on the TWS resource DRS350LK. This is necessary so that DRSC350N
and DRSC350E do not run at the same time. This resource has a value of 1 and will hold up the
running of DRSC350N until it is available. DRSC350E has the same dependency.
6.1.2.3. Rerun action
The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN
Cinited 9018 I} CONFIDENCE) Ref: DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY __ Date: 19-Apr-2017

STORED PageNo: 26 of 123
oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

FUJ00089582

FUJ00089582

Additionally, a migration specific Application error could occur in the form of process failure when
run for the first time on the Rig. The reason for such an error could be missing values for “DRS
SYSTEM DATE” and “PARTITION RECEIPT DATE” system parameters in
DRS_SYSTEM_PARAMETERS table. These parameters are created with NULL values as a part
of DRS database and schema build and must be set by ISD to the value of Unix System Date
one day prior to running the schedule for the first time. The details of how to set these dates in
DRS_SYSTEM_PARAMETERS table are available in the DRS Delivery Handover Note.

The process can be restarted after rectifying the cause of failure.

Note that it is possible due to the unavoidable implicit database commit performed when
adding/dropping table partitions that, in some esoteric failure scenarios, the partition metadata
will be out of sync with the actual partitions. In this situation, re-running the SOD process will
potentially fail.

In this scenario it will be necessary to confirm whether the metadata/partitions are inconsistent by
running a script provided by development.

If the partitions/metadata are inconsistent it will be necessary to manipulate either to remedy the
situation. Given that the remedial activity will be dependent on a number of variables including
whether any data has been written to the new partitions etc, a call should be raised with 4" line
support.

In some situations, typically in test, it is desirable to run DRSC350 more than once in a calendar
day. The default (build) value of the PROCESS_DAY_MULTIPLE_RUNS_YN flag in the
DRS_PROCESSES table for the DRSC350 process is ‘N’ so would prevent this. Therefore the
PROCESS_DAY_MULTIPLE_RUNS_YN flag should be changed to ‘Y’ to allow this if required.

WARNING - This should only be done in Live at the guidance of development or support.

6.2 Schedule M_DB_SRV#DRS_TIDY_ORA

The schedule runs a script to tidy files associated with the Oracle database. This activity is not
solely applicable to Network Banking, but for convenience is scheduled to run after the Network
Banking Start Of Day schedule.

6.2.1 Dependencies
Follows successful completion of the schedule DRS_NWB_SOD.

6.2.2. Process HousekeepOrafiles.sh
This process housekeeps a number of log and dump files associated with the Oracle database.

6.2.2.1 Implementation
Implemented in M_DB_SRV#DRS_ORA_TIDY

6.2.2.2. Job Dependencies

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) °
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017

STORED PageNo: 27 of 123
FUJ00089582

FUJ00089582
oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
None
6.3 Schedule M_DB_SRV#DRS_ETU_C4LD
The schedule runs DRSC305 to load the ETU file containing C4/D messages into the NWB
C4SD input table and then DRSC306 to parse the C4/D messages into the C4/D daily main
tables.
6.3.1 Dependencies
Follows successful completion of the schedules DRS_NWB_SOD and
DRS_ETU_BATCH_COMPLETE.FLAG.
6.3.2 Process DRSC305
This process reads [C4/D] XML records from a data-file whose absolute filename is passed to it
on command-line by TWS and loads them into the FTMS_RX_NWB_C4SD input table.
The input data-file/s are read from directory $NWB_NBE_INPUT and are renamed to change
their extension to lowercase once they have been successfully processed.
6.3.2.1. Implementation
Implemented in M_LDB_SRV#DRSC305N where the postfix stands for NWB.
6.3.2.2 Job Dependencies
None
6.3.3 Process DRSC306
This process sets the value of DRS system parameter “C4SD FILE LOAD COMPLETE” for
Application Type "NWB" to ‘Y’ to indicate that all the DRS C4/S/D files have been successfully
loaded. Once this flag is set, all instances of DRSC302 (see section 6.13.2) exit after processing
the last set of C4/S/D input records.
6.3.3.1 Implementation
Implemented in M_LDB_SRV#DRSC306N.
6.3.3.2 Job Dependencies
Depends on successful completion of DRSC305N where the postfix “N’ stands for NWB.
6.3.3.3 Rerun action
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN
Limited 2015 CONFIDENCE) Ref: DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 49-Apr-2017
STORED

PageNo: 28 of 123
FUJ00089582

FUJ00089582
oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery.
6.4 Schedule M_DB_SRV#DRS_NWB_ANALYZE
The schedule runs a job every day to gather the statistics for specified DRS database objects.
The statistics are used by Oracle optimiser to improve the query performance.
6.4.1. Dependencies
Follows successful completion of the M_DB_SRV#DRS_NWB_SOD.
Precedes DRS_NWB_SOB
6.4.2 Process DRSC368
The process reads the table DRS_ANALYZED_OBJECTS for the details of DRS database
objects to be "ANALYZED". It then runs DBMS_STATS package or SQL command "ANALYZE"
to gather and store statistics on the objects specified. This is required whenever a table’s data
content changes or a partition is dropped as part of Start of Day. In this way Workstation Query
and Report Generation performance can be optimised.
6.4.2.1 Job Dependencies
None.
6.4.2.2 Implementation
Implemented in the M_LDB_SRV#DRSC368N_1 job (the postfix "N" stands for Network Banking).
6.4.2.3 Rerun action
The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery.
6.5 Schedule M_DB_SRV#DRS_RDDS_EXTRACT
This schedule runs DRSC364, which copies RDDS reference data for Routing Gateways and
Accounting Weeks into DRS.
The schedule is common between Network Banking and Debit Card.
6.5.1 Dependencies
This schedule follows the successful completion of the schedule DRS_NWB_SOD and
DRS_EFT_SOD. Requires RDDSLOCK.
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN
Limited 2015 CONFIDENCE) Ref: DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017

STORED PageNo: 29 of 123
FUJ00089582

FUJ00089582
oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
6.5.2 Process DRSC364
Process DRSC364 refreshes accounting weeks (RDDS_ACCOUNTING_WEEKS), routing
gateways (RDDS_ROUTING_GATEWAYS) tables and clients (RDDS_CLIENTS) using
corresponding tables/views in RDDS-Host system. The RDDS objects are accessed via a pre-
defined database link. The RDDS table names from where the data is copied from are
DRS_ACCOUNTING_WEEKS, DRS_ROUTING_GATEWAYS and DRS_CLIENTS respectively.
6.5.2.1 Implementation
Implemented in M_LDB_SRV#DRSC364C_NOPAGE (the postfix "C" stands for Common).
6.5.2.2 Job Dependencies
None.
6.5.2.3 Rerun action
The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery. The exception to the rerun action described in the common section is that
TWS will continue processing in case of a process failure. No page message will be sent to first-
line support. Operational exception/s will be logged and they can be used for error analysis and
resolution.
6.6 Schedule M_DB_SRV#DRS_NWB_C12_PARS
This schedule runs multiple instances of the DRS [C12] parse and load process. The schedule
becomes active after completion of BRDB_DRS_COMPL
6.6.1 Dependencies
Follows successful completion of DRS Network Banking schedule DRS_NWB_SOD and
BRDB_DRS_COMPL
Precedes schedule DRS_NWB_MS_NIGHT
6.6.2 Process DRSC301
This process reads [C12] XML records from TMS_RX_NWB_C12 (C12-Input), parses and loads
them into the DRS_RX_NWB_C12 and DRS_RX_NWB_C12_EXCP tables.
TWS invokes eight instances of DRSC301 at the start of the schedule.
Introduced at S75, the DRSC301 instances will write NBX transactions (as derived from Logical
Fl) into a set of partitioned C2 tables. These tables are used to copy C2 transactions in the TES.
The function processes all outstanding data in TMS_RX_NWB_C12.
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN
Cinited 9018 I} CONFIDENCE) Ref: DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 49-Apr-2017

STORED PageNo: 30 of 123
FUJ00089582

FUJ00089582
oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
6.6.2.1 Implementation
Implemented in the M_DB_SRV#DRSC301N_1...8 jobs (the postfix "N" stands for Network
Banking).
6.6.2.2 Job Dependencies
None
6.6.2.3 Rerun action
The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery. As listed in this section, if an instance of DRSC301 fails, TWS
automatically reruns the failed instance once. If it fails on the rerun, TWS does not attempt any
further automatic reruns for that instance. Any failures would result in operational exceptions
being logged which can be used for fault analysis/resolution.
6.7 Schedule M_DB_SRV#DRS_NWB_SOB
This schedule runs the first job of the DRS batch overnight for Network Banking which is Start of
the Batch overnight.
6.7.1 Dependencies
Follows successful completion of DRS_NWB_ANALYZE.
Precedes schedule DRS_NWB_TPS_COPY.
6.7.2 Process DRSC353
This job runs at the start of the DRS batch overnight process at 20:00.
It sets the value of system parameter “BATCH JOB STARTED” for Application Type "NWB" to
“Y” to inform the DRS Workstation that the batch overnight has started and all subsequent
connections should be read-only. It also ‘kills’ the SQL*Net connections made by DRS
workstation users (all Oracle usernames starting with “DRSWKS") to the database using the SQL
statement “ALTER SYSTEM DISCONNECT SESSION...”
6.7.2.1. Implementation
Implemented in job M_LDB_SRV#DRSC353N (the postfix "N" stands for Network Banking).
6.7.2.2. Job Dependencies
None.
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN
Cimited Ss I} CONFIDENCE) Ref: DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017

STORED PageNo: 31 of 123
DRS Host Support Guide

(ee)
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

FUJ00089582

FUJ00089582

6.7.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery.

6.8 Schedule M_DB_SRV#DRS_NWB_C4_PARSE

This schedule runs multiple instances of the DRS [C4/D] parse and load process.

6.8.1 Dependencies
Follows successful completion of schedule DRS_ETU_C4LD.DRSC305N.

Precedes schedule DRS_NWB_MS_NIGHT, TES_LINK_REC_RUN, TES_CAPO_REC_RUN
and TES_AL_REC_RUN

6.8.2 Process DRSC302

This process reads [C4 /D] XML records from FTMS_RX_NWB_C4SD (C4D-Input), parses and
loads them into the DRS_RX_NWB_{C4ID} and DRS_RX_NWB_{C4ID}_EXCP tables
respectively.

TWS invokes eight instances of DRSC302 at the start of the schedule.

The process polls the C12-Input table at periodic intervals after a pause whose duration in
seconds is taken from the value of “C4SD PAUSE WAIT LIMIT” system parameter.

The process execution is controlled by the value of system parameter “C4SD FILE LOAD
COMPLETE” for Application Type "NWB". The parameter value is set to “N” by process
DRSC306 on successful completion of all C4SD file load jobs and this would result in all eight
instances of DRSC302 to exit after processing the last let of records from the C4/D input table.

6.8.1.1 Implementation

Implemented in the M_DB_SRV#DRSC302N_NOPAGE_1...8 jobs (the postfix "N" stands for
Network Banking).

6.8.1.2 Job Dependencies
None

6.8.1.3 Rerun action

The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery. As listed in this section, if an instance of DRSC302 fails, TWS
automatically reruns the failed instance once. If it fails on the rerun, TWS does not attempt any
further automatic reruns for that instance. Any failures would result in operational exceptions
being logged, which can be used for fault analysis/resolution.

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028

CONFIDENCE)
Limited 2015 Version: 5.0

UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED Page No: 32 of 123
FUJ00089582

FUJ00089582
oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
6.9 Schedule M_DB_SRV#DRS_NWB_TPS_COPY
This schedule runs DRSC303, which copies [C112] transactions from TPS-Host to DRS. This
schedule is run daily however [C112] transactions are also copied on a weekly basis just prior to
NB103 report generation.
6.9.1 Dependencies
This schedule follows the successful completion of the schedule DRS_NWB_SOB,
BRDB_TPS_COMPL
6.9.2 Process DRSC303
Multiple instances of the process can be run in parallel. Each instance can process a set number
of Daily Input table partitions.
The process fetches data from the TPS table view over the database link "tps". The data is
extracted from TPS tables TMS_RX_NWB_TRANSACTIONS_n ("n" is partition number) and
inserted into DRS partitioned table DRS_RX_NWB_C112. The TPS database has one physical
table for each partition whereas DRS database has one partitioned table to store the C112 data.
All transactions are copied where the value of the column FINACIAL_TRANSACTION is set to 1
in the TPS table. If an error occurs during an insert the record is inserted into the C112 daily
exceptions table (DRS_RX_NWB_C112_EXCP) and the appropriate flags are set in the DRS
C112 daily table (DRS_RX_NWB_C112).
6.9.2.1 Implementation
This process has been implemented in M_DB_SRV#DRSC303N_x, where x is the instance
number ranging from 1 to 9 and the postfix "N" stands for Network Banking. A 9" instance of the
process is run to deal with any TIP (POLMI) repaired transactions in the 65" partition.
6.9.2.2 Job Dependencies
None
6.9.2.3 Rerun action
The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery.
6.10 Schedule M_DB_SRV#DRS_NWB_MS_NIGHT
This schedule runs DRS Main Store Processing (DRSC310) as "batch-overnight" to process all
the transaction parts [C12/C112/C4/D] received in DRS since the last run of the schedule. The
same process DRSC310 is also used as part of the daily schedule. See section 6.8 for details.
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN
Cinited 9018 I} CONFIDENCE) Ref: DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 49-Apr-2017
STORED

PageNo: 33 of 123
FUJ00089582

FUJ00089582
oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
6.10.1 Dependencies
This schedule follows the successful completion of the schedule DRS_NWB_C4_PARSE,
DRS_NWB_TPS_COPY, TES_AL_REC_RUN, TES_CAPO_REC_RUN,
TES_LINK_FILEMON.TES_LREC_STOPLOAD, DRS_NWB_C12_PARS
This schedule precedes the schedule DRS_NWB_MS_EXCPTN.
6.10.2 Process DRSC310 [NIGHT]
The ‘NIGHT’ run of the DRSC310 process picks up all the transaction parts for processing which
have Receipt Date less than or equal to the current Partition Receipt Date. The value of current
Partition Receipt Date is derived from DRS System Parameter "PARTITION RECEIPT DATE"
for the Application Type "NWB" [refer to System Parameters for details].
This process reads the transaction parts [C12/C112/C4/S/D] from Daily Input tables
[DRS_RX_NWB_C12, DRS_RX_NWB_C112, DRS_RX_NWB_C4, DRS_RX_NWB_D and
DRS_RX_NWB_S] in the order of their arrival sequence in DRS. No [S] transactions are
expected for Network Banking. The transaction parts are matched on necessary elements and
the State Information is derived and set in chronological order once for the arrival of each
transaction part. The resulting transaction record containing all the available transaction parts
and the State Information is then inserted into DRS_RX_NWB_MAIN_STORE table. The
process also inserts a copy of Main Store record into DRS_RX_NWB_MAIN_STORE_UPDATES
table where the transaction part(s) had the Receipt Date less than the current Partition Receipt
Date to facilitate fast reporting.
Multiple instances of the process can be run in parallel. Each instance can process a set number
of Daily Input table partitions.
6.10.2.1 Implementation
This process has been implemented in M_DB_SRV#DRSC310NN_x, where x is the instance
number ranging from 1 to 8 and the postfix "NN" stands for Night Network Banking.
6.10.2.2 Job Dependencies
None
6.10.2.3 Rerun action
The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery.
6.11 Schedule M_DB_SRV#DRS_NWB_MS_EXCPTN
This schedule runs DRSC311, which copies records from the daily exception tables into the
corresponding main store exception tables.
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN
Cimited Ss I} CONFIDENCE) Ref: DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY __ Date: 49-Apr-2017

STORED Page No: 34 of 123
FUJ00089582

FUJ00089582
oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
6.11.1 Dependencies
This schedule follows the successful completion of the schedule DRS_NWB_MS_NIGHT.
Precedes DRS_TPS_EXTRCT_D. Also precedes DRS_NWB_REP_101 &
DRS_NWB_REP_102 but these dependencies are never exercised.
6.11.2 Process DRSC311
The purpose of this module is to merge those DRS Transaction parts [C112, C12, D, C4, S] that
are in exception with the corresponding DRS main exception tables. No [S] transactions are
expected for Network Banking.
Only one instance of the program must be run at any time. Multiple instances could result in
duplicate rows being inserted into the main exception tables.
All the transaction parts that have the value of Receipt Date less than or equal to the current
Partition Receipt Date are processed. The value of current Partition Receipt Date is derived from
DRS System Parameter "PARTITION RECEIPT DATE" for the Application Type "NWB". The
record is validated to check it exists in the Main Store (DRS_RX_NWB_MAIN_STORE) and the
current state of the transaction part in exception is derived or copied from the main store.
After a record has been successfully processed and inserted into the Exceptions Main table, the
PROCESSED_YN flag for the corresponding record in Daily Exceptions table is set to ‘Y’.
6.11.2.1 Implementation
Implemented in M_LDB_SRV#DRSC311N (the postfix stands for Network Banking).
6.11.2.2 Job Dependencies
None
6.11.2.3 Rerun action
The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery.
6.12 Schedule M_DB_SRV#DRS_TPS_EXTRCT_D
This schedule executes the process DRSC366, which transfers the data about the TPS Outlets
last polled and Cash Accounts delivered to TIP (POLMI) from the TPS-Host database. Note that
at S80, no Cash Account information will be returned however the process will remain in the
schedule to copy non-poll information.
6.12.1 Dependencies
Follows successful completion of the schedules DRS_NWB_MS_EXPTN,
DRS_EFT_MS_EXPTN, TPSREP.TPSC234, DRS_RDDS_EXTRACT.
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN
Cinited 9018 I} CONFIDENCE) Ref: DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 49-Apr-2017
STORED

PageNo: 35 of 123
FUJ00089582

FUJ00089582
oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
Precedes schedule DRS_NWB_REP_101, DRS_NWB_REP_102, DRS_EFT_REP_101, and
DRS_EFT_REP_102.
6.12.2 Process DRSC366
The purpose of this DRS host program is to copy TPS_OUTLETS_LAST_POLLED and
TPS_TIP_CA_RECEIPTS from TPS to their corresponding DRS tables through Oracle Views via
database link.
6.12.2.1 Job Dependencies
None
6.12.2.2 Implementation
Implemented in the M_LDB_SRV#DRSC366C job (the postfix "C" stands for Common).
6.12.2.3. Rerun action
The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery.
6.13 Schedule M_DB_SRV#DRS_NWB_REP_101
This schedule contains jobs that generate the Network Banking NB101 report.
This Schedule is run daily after the DRS Main store processing and DRS Main exception merge
from daily exception tables.
6.13.1 Dependencies
Follows after successful completion of schedule DRS_NWB_MS_EXCPTN and
DRS_TPS_EXTRCT_D
Precedes schedule DRS REP_000
6.13.2 Process DRSC322
The purpose of this DRS host program is to extract all C4 Transactions for each Routing
Gateway from DRS Main Store (DRS_RX_NWB_MAIN_STORE), Main Store Updates
(DRS_RX_NWB_MAIN_STORE_UPDATES) and C4 Exception Main table (DRS_RX_NW
B_C4_EXCP_MAIN) tables against each settlement date, received for the current Run date i.e.,
DRS Processing date. The extracted information is then populated onto the DRS NB101 Results
table (DRS_REP_NWB_RESULTS_NB101).
This program does not create any report files.
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN
Cinited 9018 I} CONFIDENCE) Ref: DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED

PageNo: 36 of 123
FUJ00089582

FUJ00089582
oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
6.13.2.1 Job Dependencies
None
6.13.2.2 Implementation
Implemented in the M_DB_SRV#DRSC322N job (the postfix "N" stands for Network Banking).
6.13.2.3 Rerun action
The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery.
6.13.3 Process DRSC324
The purpose of this DRS host program is to Generate NB101 Reconciliation report for the current
Run date. Data is extracted from DRS_REP_NWB_RESULTS_NB101 table and written to the
report text files.
6.13.3.1 Job Dependencies
Follows successful completion of M_LDB_SRV#DRSC322N.
6.13.3.2 Implementation
Implemented in the M_DB_SRV#DRSC324N job (the postfix "N" stands for Network Banking).
6.13.3.3 Rerun action
The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery.
6.14 Schedule M_DB_SRV#DRS_NWB_REP_102
The generation of DRS Network Banking NB102 reconciliation report involve three functional
steps:
1. Population of Intermediate tables DRS_REP_NWB_STATE_TOTALS (process DRSC320).
2. Population of Result tables DRS_REP_NWB_RESULTS_NB102_1...12 (process DRSC323).
3. Producing the report text files on the Host operating system (process DRSC325).
Jobs in this schedule perform the above-mentioned three steps.
This Schedule is run daily after successful completion of NB101 Reconciliation report generation.
6.14.1 Dependencies
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN
Limited 2015 CONFIDENCE) Ref: DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 49-Apr-2017
STORED

PageNo: 37 of 123
FUJ00089582

FUJ00089582
oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
Follows after successful completion of schedule DRS_NWB_MS_EXCPTN and
DRS_TPS_EXTRCT_D.
Precedes schedule DRS_REP_000.
6.14.2 Process DRSC320
The purpose of this DRS host program is to populate the DRS State Totals table
(DRS_REP_NWB_STATE_TOTALS) from the transactions held within the DRS Main store (for
current day’s transactions), DRS Main Store Updates and the DRS Exception tables for NB102
reports.
This program does not create any report files.
6.14.2.1 Job Dependencies
None
6.14.2.2 Implementation
Implemented in the M_DB_SRV#DRSC320N job (the postfix N stands for Network Banking).
6.14.2.3 Rerun action
The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery.
6.14.3 Process DRSC323
The purpose of this DRS host program is to populate the 12 tables of DRS report NB102 results
(DRS_REP_NWB_RESULTS_NB102_1...12) where each table corresponds to a section of the
report.
To derive this information records from the DRS Main Store (DRS_RX_NWB_MAIN_STORE),
Exceptions Main tables (DRS_RX_NWB_{C12IC112IC4ISID}_EXCP_MAIN) and the State totals
table (DRS_REP_NWB_STATE_TOTALS) is populated into DRS NB102 result tables. No [S]
transactions are expected for Network Banking.
For performance this process is run twelve times, once for each section to be produced. Sections
1, 6, 7 and 12 are run sequentially, then after these have finished execution, sections 2, 3, 4, 5,
8, 9, 10 and 11 are run in parallel.
Please note that sections do not take similar lengths of time to run. For instance sections 5 and
11 can take up to 30 to 40 minutes, while other sections may be over in a few seconds.
This program does not create any report files.
6.14.3.1 Job Dependencies
This Program DRSC323N follows after successful completion of DRS host program DRSC320N.
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN
Cinited 9018 I} CONFIDENCE) Ref: DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED Page No: 38 of 123
FUJ00089582

FUJ00089582
oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
6.14.3.2 Implementation
Implemented in the M_LDB_SRV#DRSC323N_x job. Where N is for Network Banking and x is the
section number.
6.14.3.3. Rerun action
The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery.
6.14.4 Process DRSC325
The purpose of this DRS host program is to Generate NB102 Reconciliation report for the current
Run Date. Data is extracted from DRS_REP_NWB_RESULTS_NB102_1...12 tables and written
to text files.
This program is scheduled to run daily.
6.14.4.1 Job Dependencies
This Program follows successful completion of all M_LDB_SRV#DRSC323N_x jobs, where N is
for Network Banking and x is the value all the sections run in parallel in job DRSC323.
6.14.4.2 Implementation
Implemented in the M_LDB_SRV#DRSC325N job (the postfix N stands for Network Banking).
6.14.4.3 Rerun action
The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery.
6.15 Schedule M_DB_SRV#DRS_REP_000
This schedule runs DRS328C job which produces Nil Returns Report.
6.15.1 Dependencies
Follows after successful completion of schedule DRS_NWB_REP_101, DRS_NWB_REP_102,
DRS_EFT_REP_101 and DRS_EFT_REP_102.
Precedes schedule DRS_ADMIN.
6.15.2 Process DRSC328
The purpose of this DRS host program is to create the DRS Nil Return Report NBOOO.
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN
Limited 2015 CONFIDENCE) Ref: DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 49-Apr-2017
STORED

PageNo: 39 of 123
FUJ00089582
FUJ00089582

DRS Host Support Guide

(ee)
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

This program displays reports produced for all routing gateways for the current run date. For
routing gateways where no transactions have been reported, a ‘[NIL RETURNJ’ entry is displayed
on the report. Data is extracted from DRS_REP_FILE_REGISTER, DRS_REPORTS and
RDDS_ROUTING_GATEWAYS to be written to a text file.

6.15.2.1 Job Dependencies
None

6.15.2.2 Implementation
Implemented in the M_LDB_SRV#DRSC328C job (where "C" stands for Common).

6.15.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery.

6.16 Schedule M_DB_SRV#DRS_ADMIN

The schedule generates the Database statistics.

6.16.1 Dependencies
Follows successful completion of DRS_REP_000.
Precedes DRS_NWB_ADMIN and DRS_EFT_ADMIN

6.16.2 Script DRSX365

This Unix shell script generates Database statistics such as Oracle Tablespace usage, Extents
and Data segments available.

6.16.1.1 Job Dependencies
None

6.16.1.2 Implementation
Implemented in the M_DB_SRV#DRSX365C job (the postfix "C" stands for Common).

6.16.1.3 Rerun action

The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery.

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) version 5.0

UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED Page No: 40 of 123
FUJ00089582

FUJ00089582
oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
6.17 Schedule M_DB_SRV#DRS_NWB_ADMIN
This is the Database housekeeping schedule. The schedule archives and purges data and
housekeeps file older than the pre-defined retention period.
6.17.1 Dependencies
Follows successful completion of DRS_ADMIN
Precedes schedule DRS_NWB_TRN_ACK
6.17.2 Process DRSC361
The purpose of this module is to Archive Control, Data and Report tables to Support and Audit
requirements and Archive/Purge Data and Report tables older than the Retention period for
Archive server. The archive files stored under Archive server are for future references. The old
data is cleared to make space for the new data. Entries from the table
DRS_ARCHIVED_TABLES are used for archive parameters and criteria. The records that go
into this table are also present in the form of a spreadsheet in Appendix F — DRS Archiving
Table Mapping.
This module uses Oracle Export/Import method to archive data as specified in the DRS High
Level Design DES/APP/HLD/0033
Only one instance of the program must be run at any time. Multiple instances at the same time
could result in corrupt export dump files being created.
If the data purge process fails due to the process not being able to get exclusive access to the
table to purge, an exception is raised and it continues to the next table. The next time the purge
process is run it will purge two days’ worth of data. Some of the tables (like the daily tables) can
only hold around three days’ worth of data, so three failures in a row will give problems.
6.17.2.1 Job Dependencies
None.
6.17.2.2. Implementation
Implemented in the M_LDB_SRV#DRSC361N job (the postfix "N" stands for Network Banking).
6.17.2.3 Rerun action
The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery.
6.17.3 Process DRSC368
Please refer to the section 6.4.2 for details of the process.
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN
Cinited 9018 I} CONFIDENCE) Ref: DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 49-Apr-2017

STORED Page No: 41 of 123
FUJ00089582
FUJ00089582

DRS Host Support Guide

(ee)
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

6.17.3.1 Job Dependencies
Follows the successful completion of M_LDB_SRV#DRSC361N job.

6.17.3.2 Implementation

The job runs every day. Implemented in the M_DB_SRV#DRSC368N_3 job (the postfix "N"
stands for Network Banking).

6.17.3.3 Rerun action

The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery.

6.17.4 Script DRSX362

The purpose of this Unix shell script is to housekeep various input/output files. Entries from the
table DRS_FILES_TO_HOUSEKEEP are used as parameters for file deletion.

6.17.4.1 Job Dependencies
This job should follow after successful completion of the job DRSC361N.

6.17.4.2 Implementation
Implemented in the M_DB_SRV#DRSX362N job (the postfix "N" stands for Network Banking).

6.17.4.3 Rerun action

The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery.

6.18 Schedule M_DB_SRV#DRS_NWB_TRN_ACK

The schedule contains a job that checks for delivery status of report files by FTMS to the TIP
(POLMI) remote gateway.

6.18.1 Dependencies
Follows after successful completion of Schedule DRS_NWB_ ADMIN
Precedes Schedule DRS_BACKUP, DRS_FS_BACKUP

6.18.2 Process DRSC367

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028

CONFIDENCE)
Limited 2015 Version: 5.0

UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED Page No: 42 of 123
FUJ00089582

FUJ00089582
oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
Report files created by DRS in the $NWB_TIP_OUTPUT (for Network Banking) directories are
transferred by FTMS to the TIP (POLMI) remote gateway. For each report file transferred, FTMS
creates a delivery receipt (acknowledgement) file.
Process DRSC367 harvests file receipt information by checking for report file delivery success in
the delivery receipt files. If found, it renames the files and updates the TIP (POLMI) Receipt date
in DRS_REP_FILE_REGISTER for the corresponding report file.
DN: POL TIP & FTMS Gateway referred to here may not exist??? May be a NFS Mount
somewhere???
6.18.2.1 Job Dependencies
None
6.18.2.2 Implementation
Implemented in the M_LDB_SRV#DRSC367N job (the postfix "N" stands for Network Banking).
6.18.2.3 Rerun action
The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery.
6.19 Schedule M_DB_SRV#DRS_COMPLETE
This schedule contains a job that creates the Network Banking and Debit Card schedule
completion flags. These flags are used by TWS to determine successful logical completion of the
processing.
The schedule and job details have been provided by the TWS Development team.
6.19.1.1 Job Dependencies
DRS_BACKUP.DRS_DB_START, DRS_FS_BACKUP.DRSF_CLONE_SPLIT_S.
7 Debit Card Schedule Details
This section describes all the Schedules and Jobs listed in Appendix B — Debit Card TWS
Schedule. The Debit Card TWS Schedule includes just the Debit Card specific jobs and NOT the
jobs which are common (like Reference Data Copy) between Network Banking and Debit Card.
For each job in the schedule, a brief description is included along with implementation details,
Job dependencies (if any) and Rerun action in case of a failure.
Implementation includes the Job name as used in the TWS Schedule. Full details of the Jobs
including the command-line parameters being passed can be found in Appendix B — Debit Card
TWS Schedule.
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN
Cinited 9018 I} CONFIDENCE) Ref: DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 49-Apr-2017

STORED Page No: 43 of 123
DRS Host Support Guide

(ee)
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

FUJ00089582

FUJ00089582

7.1. Schedule M_DB_SRV#DRS_EFT_SOD

This is the start of the DRS Debit Card schedule. It will start after the database restart on
completion of BCV Split at around 8am.

7.1.1 Dependencies

Follows successful completion of the DRS Debit Card schedule for the previous logical
processing day (implemented via a dependency on DRS_EFT_BATCH_COMPLETE.FLAG).

Precedes schedules DRS_RDDS_EXTRACT, DRS_EFT_ANALYZE, DRS_EFT_C12_PARS.

7.1.2 Process DRSC350

Process DRSC350 runs at the start of the DRS Debit Card day to set the working day for the
schedule, create the Main Store (DRS_RX_EFT_MAIN_STORE) partition for that working day
and re-set various flags.

The DRS working day is controlled by two logical dates that are stored as ‘DRS SYSTEM DATE”
and “PARTITION RECEIPT DATE” system in the database. There are two sets of logical dates -
one for NWB and EFT each. These dates normally correspond to the System Date on the Rig
with the exception of a post fail-over catch-up situation where the dates could lag by one or more
days.

7.1.2.1. Implementation
Implemented in the M_DB_SRV#DRSC350E job (the postfix "E" stands for Debit Card/EFTPoS).

7.1.2.2 Job Dependencies

This job is dependent on the TWS resource DRS350LK. This is necessary so that DRSC350N
and DRSC350E do not run at the same time. This resource has a value of 1 and will hold up the
running of DRSC350E until it is available. DRSC350N has the same dependency.

7.1.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the section 5-Process
Failure and Recovery.

Additionally, a migration specific Application error could occur in the form of process failure when
run for the first time on the Rig. The reason for such an error could be missing values for “DRS
SYSTEM DATE” and “PARTITION RECEIPT DATE” system parameters in
DRS_SYSTEM_PARAMETERS table. These parameters are created with NULL values as a part
of DRS database and schema build and must be set by ISD to the value of Unix System Date
one day prior to the running the BI3 schedule for the first time. The details of how to set these
dates in DRS_SYSTEM_PARAMETERS table are available in the DRS Delivery Handover Note.

The process can be restarted after rectifying the cause of failure.

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028

CONFIDENCE)
Limited 2015 Version: 5.0

UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED Page No: 44 of 123
FUJ00089582

FUJ00089582
oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
Note that it is possible due to the unavoidable implicit database commit performed when
adding/dropping table partitions that, in some esoteric failure scenarios, the partition metadata
will be out of sync with the actual partitions. In this situation, re-running the SOD process will
potentially fail.
In this scenario it will be necessary to confirm whether the metadata/partitions are inconsistent by
running a script provided by development.
If the partitions/metadata are inconsistent it will be necessary to manipulate either to remedy the
situation. Given that the remedial activity will be dependent on a number of variables including
whether any data has been written to the new partitions etc, a call should be raised with 4" line
support.
In some situations, typically in test, it is desirable to run DRSC350 more than once in a calendar
day. The default (build) value of the PROCESS _DAY_MULTIPLE_RUNS_YN flag in the
DRS_PROCESSES table for the DRSC350 process is ‘N’ so would prevent this. Therefore the
PROCESS_DAY_MULTIPLE_RUNS_YN flag should be changed to ‘Y’ to allow this if required.
WARNING - This should only be done in Live at the guidance of development or support.
7.2 Schedule M_DB_SRV#DRS_EFT_ANALYZE
The schedule runs a job every day to gather the statistics for specified DRS database objects.
The statistics are used by Oracle optimiser to improve the query performance.
7.2.1. Dependencies
Follows successful completion of the M_DB_SRV#DRS_EFT_SOD.
Precedes DRS_EFT_SOB
7.2.2 Process DRSC368
Refer to the section 6.3.2 for details of the process.
7.2.2.1. Job Dependencies
None.
7.2.2.2 Implementation
Implemented in the M_DB_SRV#DRSC368E_1 job (the postfix "E" stands for Debit
Card/EFTPoS).
7.2.2.3. Rerun action
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN
Cinited 9018 I} CONFIDENCE) Ref: DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 49-Apr-2017

STORED PageNo: 45 of 123
FUJ00089582
FUJ00089582

DRS Host Support Guide

(ee)
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery.

7.3 Schedule M_DB_SRV#DRS_EFT_C12_PARS

This schedule runs multiple instances of the DRS [C12] parse and load process. The schedule
becomes active after completion of BRDB_DRS_COMPL and continues until all C12 data has
been processed.

7.3.1 Dependencies
Follows successful completion of DRS_EFT_SOD and BRDB_DRS_COMPL.
Precedes schedule DRS_PF_GEN, DRS_EFT_PF_SIM

7.3.2 Process DRSC301

This process reads [C12] XML records from TMS_RX_EFT_C12 (C12-Input), parses and loads
them into the DRS_RX_EFT_C12 and DRS_RX_EFT_C12_EXCP tables for Debit Card. TWS
invokes eight instances of DRSC301.

The process execution exists having processed all outstanding data in TMS_RX_EFT_C12.

7.3.2.1 Implementation

Implemented in the M_DB_SRV#DRSC301E_1...8 jobs (the postfix "E" stands for Debit
Card/EFTPoS).

7.3.2.2 Job Dependencies
None

7.3.2.3. Rerun action

The common process failure scenarios and rerun actions are described in the section 5-Process
Failure and Recovery.

7.4 Schedule M_DB_SRV#DRS_EFT_PF_GEN

This schedule runs the job to generate the Payment Files.

7.4.1 Dependencies

Follows successful completion of schedule DRS_EFT_C12_PARS. DRS_EFT_C12_PARS will
continue processing any outstanding data if there was a backlog in the C12 Input
(TMS_RX_EFT_C12) table before allowing this schedule to begin.

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) version 5.0

UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED Page No: 46 of 123
DRS Host Support Guide

(ee)
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

FUJ00089582
FUJ00089582

Precedes schedule DRS_EFT_C4_PARSE and DCM_H_PF_D.

7.4.2 I Process DRSC307

The process extracts the contents of C2 Output (DRS_TX_EFT_C2) table into a data file
containing C2 XML messages. The data file is created in the directory defined by the
environment variable EFT_C2_OUTPUT.

The process extracts all C2 XML records from the C2 Output table where the
PROCESS_STATUS is set to "I" (Initial) and writes these records to a data file in order of
Service_Type, Merchant Number, Receipt Date and Sequence number in the ascending order.
Before writing each C2 XML record into the file, the date, terminal id and transaction number will
be extracted from the C2 message and used to look up the same transaction on the NPS status
table (TMS_RX_TXN_STATUS_DCS_H). The XML tag <SchemeRefData> will be extracted
from field A1_INFO and column “R3Tsmp” will be selected and added to the file content (refer to
EF/IFS/003) as <SchemeRefData> and <R3Tsmp>. After successfully writing a record to the
file, the record's PROCESS_STATUS is set to "T" (Transfer) and the RECORD_STATUS to "N"
(None).

However, since DRS cannot access the NPS Table via its unique index (because it does not
have the necessary data), DRS will extract all the required data from NPS ( <SchemeRefData>
from field A1_INFO and column “R3Tsmp” ) into a local table that can be indexed as required.
Therefore, the first task for DRSC307 is to read all necessary data from the NPS table into
DRS_NPS_DCS_STATUS and to then join this with DRS_TX_EFT_C2 during payment file
processing.

If no records are found in C2 Output table for processing, the file is generated with header and
trailer records and the module exits with SUCCESS.

Two instances of the program (one for GlobailPay, one for AMEX) can be run several times a day
although a new Payments file will be generated by each execution; THIS IS NOT ADVISED.

7.4.2.1 Implementation

Implemented in jobs M_DB_SRV#DRSC307E_H_1 and M_DB_SRV#DRSC307E_H_AMEX (the
postfix "E" stands for Debit Card/EFTPoS), the H for HSBC Merchant Services or HMS.

7.4.2.2 Job Dependencies
DRSC307E_H_AMEX runs after M_DB_SRV#DRSC307E_H_1 is run successfully.

7.4.2.3 Rerun action
The common process failure scenarios and rerun actions are described in the section 5-Process

Failure and Recovery.

7.4.2.4 DRSC307 Job Reset Procedure

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) °
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017

STORED Page No: 47 of 123
oe) DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

FUJ00089582
FUJ00089582

Execute the following script when logged in asi irrevevanriuser:

update drs tx eft c2
set record status='N',

process _status='I',

transfer date='',

horizon agent_error_code='',

horizon agent _error_message=''
where process _status='T';

This script will reset all records updated as part of the last DRSC307 run to allow the transactions
to be included in a future C2 Bulk File. Note that this script should NOT be run if DRSC308 has
been run. The dependency revisions to the schedule mean that DRSC308 will not run unless the
S bulk process has completed successfully.

WARNING - Indiscriminate use of this script can result in duplicate transactions being passed
to HMS. Under no circumstances run this script unless absolutely sure that it is required. This
script should only be run where the payment run has been abandoned and no payment file has
been sent to HMS.

7.5 Schedule M_DB_SRV#DRS_EFT_STS_C40

This schedule runs the jobs to load back the Status File produced by the DCS C2 Agent.

DRS also receives Zero-Value-C4 (corresponding to Null Confirmations) and S input data files
each day following Payment File generation. This schedule also loads the Zero value C4 file.

DRS also receives a C4/D data file. It is the responsibility of the DCS Schedule to load the C4D
file that is the result of data received in the HMS EMIS File

7.5.1 Dependencies

The schedule follows job DCM_H_PF_D.DCM_H_CREATE_PF_D that is responsible for
generating the file that is the input to this process.

7.5.2 Process DRSC308

The process reads the C2 Status File sent by the DCS C2 Agent and updates the C2 record
status in the C2 Output (EFT_C2_OUTPUT) table. Once a record is loaded successfully the
record's PROCESS_STATUS is set to "C" (complete and the RECORD_STATUS to the value
sent by the Agent. If the RECORD_STATUS is received as "E" (Error) then the Agent Error Code
and Message are also updated in the C2 Output table.

The C2 Status File resides in the directory defined by the environment variable EFT_C2_INPUT.
If no records are found in C2 status file for processing, the module exits with SUCCESS.

7.5.2.1 Implementation

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) °
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017

STORED PageNo: 48 of 123
FUJ00089582

FUJ00089582
oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
Implemented in job M_LDB_SRV#DRSC308E_H_1 (the postfix “E” stands for Debit
Card/EFTPoS).
7.5.2.2 Job Dependencies
Commencement of this job is dependent on completion of the job
DCM_H_PF_D.DCM_H_CHECK_PF_D.
7.5.2.3. Rerun action
The common process failure scenarios and rerun actions are described in the section 5-Process
Failure and Recovery.
7.5.3 Process DRSC305
This process reads C40 XML records from the input data file passed on the command line and
loads the contents into FTMS_RX_EFT_C4SD table.
The input data-file/s are read from the directory $EFT_NBE_INPUT and are renamed to change
their extension to lowercase once they have been successfully processed.
The file that is loaded is dependent on the filename that is passed to the module on invocation.
This process is invoked at this point in the schedule to load the C40 file.
7.5.3.1. Implementation
Implemented in M_DB_SRV#DRSC305E_H_C40. The job is passed the input data file name
containing C40 parts as the command line parameter.
7.5.3.2 Job Dependencies
Runs after the successful execution of M_LDB_SRV#DRSC308E_H_1.
7.5.3.3 Rerun action
The common process failure scenarios and rerun actions are described in the section 5-Process
Failure and Recovery.
7.6 Schedule M_DB_SRV#DRS_EFT_STS_C402
This schedule runs the jobs to load back the Status File produced by the DCS C2 Agent for
AMEX.
DRS also receives Zero-Value-C4 (corresponding to Null Confirmations) and S input data files
each day following Payment File generation. This schedule also loads the Zero value C4 file for
AMEX.
DRS also receives a C4/D data file. It is the responsibility of the DCS Schedule to load the C4D
file that is the result of data received in the HMS EMIS File
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN
Cinited 9018 I} CONFIDENCE) Ref: DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 49-Apr-2017

STORED Page No: 49 of 123
FUJ00089582

FUJ00089582
oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
7.6.1 Dependencies
The schedule follows job DCM_H_PF_D.DCM_H_AMEX_CREATE_PF_D that is responsible for
generating the file that is the input to this process.
7.6.2 Process DRSC308
The process reads the C2 Status File for AMEX sent by the DCS C2 Agent and updates the C2
record status in the C2 Output (EFT_C2_OUTPUT) table. Once a record is loaded successfully
the record's PROCESS_STATUS is set to "C" (complete and the RECORD_STATUS to the
value sent by the Agent. If the RECORD_STATUS is received as "E" (Error) then the Agent Error
Code and Message are also updated in the C2 Output table.
The C2 Status File resides in the directory defined by the environment variable EFT_C2_INPUT.
If no records are found in C2 status file for processing, the module exits with SUCCESS.
7.6.2.1 Implementation
Implemented in job M_LDB_SRV#DRSC308E_H_AMExX (the postfix “E” stands for Debit
Card/EFTPoS).
7.6.2.2 Job Dependencies
Commencement of this job is dependent on completion of the job
DCM_H_PF_D.DCM_H_AMEX_CHECK_PF_D.
7.6.2.3 Rerun action
The common process failure scenarios and rerun actions are described in the section 5-Process
Failure and Recovery.
7.6.3 Process DRSC305
This process reads C40 XML records for AMEX from the input data file passed on the command
line and loads the contents into FTMS_RX_EFT_C4SD table.
The input data-file/s are read from the directory $EFT_NBE_INPUT and are renamed to change
their extension to lowercase once they have been successfully processed.
The file that is loaded is dependent on the filename that is passed to the module on invocation.
This process is invoked at this point in the schedule to load the C40 file.
7.6.3.1 Implementation
Implemented in M_LDB_SRV#DRSC305E_H_C40_AMEx. The job is passed the input data file
name containing C40 parts as the command line parameter.
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN
Cinited 9018 I} CONFIDENCE) Ref: DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017

STORED PageNo: 50 of 123
FUJ00089582

FUJ00089582
oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
Runs after the successful execution of M_LDB_SRV#DRSC308E_H_AMEX.
7.6.3.3 Rerun action
The common process failure scenarios and rerun actions are described in the section 5-Process
Failure and Recovery.
7.7. Schedule M_DB_SRV#DRS_EFT_SOB
This schedule runs the first job of the DRS batch overnight for Debit Card. The job runs at
around 20:00 every day.
7.7.1 Dependencies
Follows successful completion of schedule DRS_EFT_ANALYZE.
Precedes schedule DRS_EFT_TPS_COPY.
7.7.2 Process DRSC353
This job runs at the start of the DRS batch overnight process on completion of the TPS Cash
Account Report jobs.
It sets the value of system parameter “BATCH JOB STARTED” to “Y” to inform the DRS
Workstation that the batch overnight has started and all subsequent connections should be read-
only. It also ‘kills’ the SQL*Net connections made by DRS workstation users (all Oracle
usernames starting with “DRSWKS”) to the database using the SQL statement “ALTER SYSTEM
DISCONNECT SESSION...”
7.7.1.1 Implementation
Implemented in job M_DB_SRV#DRSC353E (the postfix “E” stands for Debit Card/EFTPoS).
7.7.1.2 Job Dependencies
None.
7.7.1.3 Rerun action
The common process failure scenarios and rerun actions are described in the section 5-Process
Failure and Recovery.
7.8 Schedule M_DB_SRV#DRS_EFT_S
This schedule runs the loading of the S input data files into the DRS C4/S/D XML input table.
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN
Limited 2015 CONFIDENCE) Ref: DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED

PageNo: 51 of 123
FUJ00089582

FUJ00089582
oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
DRS receives Zero-Value-C4 (corresponding to Null Confirmations) and S input data files each
day following Payment File generation. This schedule loads the S input file.
DRS also receives a C4/D data file. It is the responsibility of the DCS Schedule to load the C4D
file that is the result of data received in the HMS EMIS File
7.8.1. Dependencies
Follows successful completion of schedules DRS_EFT_STS_C40,
DCM_H_PF_D.DCM_H_CREATE_S_D.
Precedes schedule DRS_EFT_STOP_LD, DCM_H_EMIS.DRS_C305E_*_C4D,
7.8.2 Process DRSC305
This process reads S XML records from input data file passed on the command line and loads
the contents into FTMS_RX_EFT_C4SD table.
The input data-file/s are read from the directory $EFT_NBE_INPUT and are renamed to change
their extension to lowercase once they have been successfully processed.
The file that is loaded is dependent on the filename that is passed to the module on invocation.
This process is invoked four times in the schedule, to load the C40 file and the S File, for AMEX
and non-AMEx. It is also called as part of DCM_EMIS schedule to load the C4/D files.
7.8.2.1 Implementation
Implemented in M_LDB_SRV#DRSC305E_H_S. The job is passed the input data file name
containing [S] parts as the command line parameter.
7.8.2.2 Job Dependencies
Follows successful completion of DCM_H_PF_D.DCM_H_CHECK_PF_D.
7.8.2.3. Rerun action
The common process failure scenarios and rerun actions are described in the section 5-Process
Failure and Recovery.
7.9 Schedule M_DB_SRV#DRS_EFT_S_2
This schedule runs the loading of the S input data files into the DRS C4/S/D XML input table for
AMEX.
DRS receives Zero-Value-C4 (corresponding to Null Confirmations) and S input data files each
day following Payment File generation. This schedule loads the S input file.
DRS also receives a C4/D data file. It is the responsibility of the DCS Schedule to load the C4D
file that is the result of data received in the HMS EMIS File
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN
Cinited 9018 I} CONFIDENCE) Ref: DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY __ Date: 49-Apr-2017

STORED PageNo: 52 of 123
FUJ00089582
FUJ00089582

DRS Host Support Guide

(ee)
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

7.9.1 Dependencies

Follows successful completion of schedules DRS_EFT_STSC402,
DCM_H_PF_D.DCM_H_AMEX_CREATE_S_D.

Precedes schedule DCM_H_EMIS.DRS_C305E_*_C4D_AMEX

7.9.2 Process DRSC305

This process reads S XML records from input data file passed on the command line and loads
the contents into FTMS_RX_EFT_C4SD table.

The input data-file/s are read from the directory $EFT_NBE_INPUT and are renamed to change
their extension to lowercase once they have been successfully processed.

The file that is loaded is dependent on the filename that is passed to the module on invocation.
This process is invoked four times in the schedule, to load the C40 file and the S File, for AMEX
and non-AMEx. It is also called as part of DCM_EMIS schedule to load the C4/D files.

7.9.2.1 Implementation

Implemented in M_DB_SRV#DRSC305E_H_S_AMEX. The job is passed the input data file
name containing [S] parts as the command line parameter.

7.9.2.2 Job Dependencies
Follows successful completion of DCM_H_PF_D.DCM_H_AMEX_CHECK_PF_D.

7.9.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the section 5-Process
Failure and Recovery.

7.10 Schedule M_DB_SRV#DRS_EFT_STOP_LD

The schedule contains a job to set “C4SD FILE LOAD COMPLETE” flag in the DRS database so
that the C4/S/D parsers exit after processing the current set of data loaded into the DRS C4/S/D
XML input table.

It follows the loader processes DCM_H_EMIS.DRS_C305E_H_*_C4D.

7.10.1 Dependencies

Follows successful completion of jobs DCM_H_EMIS.DRS_C305E_H_*_C4D and schedule
DRS_EFT_S

7.10.2 Process DRSC306

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) version 5.0

UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED Page No: 53 of 123
FUJ00089582

FUJ00089582
oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
This process sets the value of DRS system parameter “C4SD FILE LOAD COMPLETE?” for the
Application Type “EFT” to ‘Y’ to indicate that all the DRS C4/S/D files have been successfully
loaded.
Once this flag is set, all instances of DRSC302 exit after processing the last let of C4/S/D input
records.
7.10.2.1 Implementation
Implemented in M_LDB_SRV#DRSC306E (the postfix “E” stands for Debit Card/EFTPoS).
7.10.2.2 Job Dependencies
Follows successful completion of DCM_H_EMIS.DRS_C305E_ H_*_C4D.
7.10.2.3 Rerun action
The common process failure scenarios and rerun actions are described in the section 5-Process
Failure and Recovery.
7.11 Schedule M_DB_SRV#DRS_EFT_C4_PARSE
This schedule runs multiple instances of the DRS C4/D parse and load process.
7.11.1 Dependencies
Follows successful completion of DRS_EFT_PF_SIM and DRS_EFT_PF_GEN.
Precedes schedule DRS_EFT_C4_RCPTD
7.11.2 Process DRSC302
This process reads [C4/D] XML records from FTMS_RX_EFT_C4SD (C4D-Input), parses and
loads them into the DRS_RX_EFT_{C4ID} and DRS_RX_EFT_{C4ID}_EXCP tables respectively
for Debit Card.
TWS invokes eight instances of DRSC302 at the start of the schedule.
The process polls the C12-Input table at periodic intervals after a pause whose duration in
seconds is taken from the value of “C4SD PAUSE WAIT LIMIT” system parameter.
The process execution is controlled by the value of system parameter “C4SD FILE LOAD
COMPLETE” for the Application Type “EFT”. The parameter value is set to “N” by process
DRSC306 on successful completion of all C4SD file load jobs and this would result in all eight
instances of DRSC302 to exit after processing the last set of records from the C4/D input table.
7.11.2.1 Implementation
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN
Limited 2015 CONFIDENCE) Ref: DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED

PageNo: 54 of 123
FUJ00089582
FUJ00089582

oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

Implemented in the M_DB_SRV#DRSC302E_NOPAGE_1...8 jobs (the postfix “E” stands for
Debit Card/EFTPoS).

7.11.2.2 Job Dependencies

None

7.11.2.3. Rerun action

The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery. As listed in this section, if an instance of DRSC302 fails, TWS
automatically reruns the failed instance once. If it fails on the rerun, TWS does not attempt any
further automatic reruns for that instance. Any failures would result in operational exceptions
being logged, which can be used for fault analysis/resolution.

7.12 Schedule M_DB_SRV#DRS_EFT_C4_RCPTD

This schedule runs multiple instances of the DRS Receipt date update process

7.12.1 Dependencies
Follows successful completion of the schedule DRS_EFT_C4_PARSE & DRS_EFT_MS_DAY
Precedes schedule DRS_EFT_MS_NIGHT

7.12.2 Process DRSC370

This process updates the receipt date on each C4/D daily and daily exception record using the
receipt date defined for each record in the C2 Output table. This is required to reconstitute the
seconds information on the Receipt Date which is removed by HMS.

7.12.2.1. Implementation

Implemented in jobs M_DB_SRV#DRSC370E_1..8 (the postfix “E” stands for Debit
Card/EFTPoS).

7.12.2.2 Job Dependencies
None.

7.12.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery. As listed in this section, if an instance of DRSC302 fails, TWS

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) °
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017

STORED PageNo: 55 of 123
oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

FUJ00089582

FUJ00089582

automatically reruns the failed instance once. If it fails on the rerun, TWS does not attempt any
further automatic reruns for that instance. Any failures would result in operational exceptions
being logged, which can be used for fault analysis/resolution.

7.13 Schedule M_DB_SRV#DRS_EFT_TPS_COPY

This schedule runs DRSC303, which copies [C112] transactions from TPS-Host to DRS.

7.13.1 Dependencies

This schedule follows the successful completion of the schedules DRS_EFT_SOB and
BRDB_TPS_COMPL and precedes DRS_EFT_MS_NIGHT

7.13.2 Process DRSC303

Multiple instances of the process can be run in parallel. Each instance processes a set number of
TPS transaction tables.

The process fetches data from the TPS tables over the database link “tps” and inserts into DRS
table. The data is extracted from TPS tables TMS_RX_EFT_TRANSACTIONS_n (“n’ is partition
number) and inserted into DRS partitioned table DRS_RX_EFT_C112. The TPS database has
one physical table for each partition whereas DRS database has one partitioned table to store the
C112 data.

All transactions are copied where the value of the column FINACIAL_TRANSACTION is set to 1
in the TPS table. If an error occurs during an insert the record is inserted into the C112 daily
exceptions table (DRS_RX_EFT_C112_EXCP) and the appropriate flags are set in the DRS
C112 daily table (DRS_RX_EFT_C112).

7.13.1.1. Implementation

This process has been implemented in M_DB_SRV#DRSC303E_x, where x is the instance
number ranging from 1 to 9 and the postfix “E” stands for Debit Card/EFTPoS. The 9" instance
of the process is run to deal with any TIP (POLMI) repaired transactions present in the 65"
partition.

7.13.1.2 Job Dependencies

The 9" instance of the process is dependent on the completion of the 1* instance
(DRSC303E_1).

7.13.1.3 Rerun action

The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery.

7.14 Schedule M_DB_SRV#DRS_EFT_MS_NIGHT

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN por. DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) °
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED

PageNo: 56 of 123
FUJ00089582

FUJ00089582
oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
This schedule runs DRS Main Store Processing (DRSC310) as “batch-overnight” to process all
the transaction parts [C12/C112/C4/D/S] received in DRS since the last run of the schedule. The
same process DRSC310 is also used as part of the daily schedule. See section 7.5 for details.
7.14.1 Dependencies
This schedule follows the successful completion of the schedule DRS_EFT_C4_RCPTD,
BRDB_XFR_COMPL and DRS_EFT_TPS_COPY.
This schedule precedes the schedule DRS_EFT_MS_EXPTN.
7.14.2 Process DRSC310 [NIGHT]
The ‘NIGHT’ run of the DRSC310 process picks up all the transaction parts for processing which
have Receipt Date less than or equal to the current Partition Receipt Date. The value of current
Partition Receipt Date is derived from DRS System Parameter “PARTITION RECEIPT DATE”
for the Application Type “EFT” [refer to System Parameters for details].
This process reads the transaction parts [C12/C112/C4/S/D] from Daily Input tables
[DRS_RX_EFT_C12, DRS_RX_EFT_C112, DRS_RX_EFT_C4, DRS_RX_EFT_D and
DRS_RX_EFT_S for Debit Card] in the order of their arrival sequence in DRS. The transaction
parts are matched on necessary elements and the State Information is derived and set in
chronological order once for the arrival of each transaction part. The resulting transaction record
containing all the available transaction parts and the State Information is then inserted into
DRS_RX_EFT_MAIN_STORE table. The process also inserts a copy of Main Store record into
DRS_RX_EFT_MAIN_STORE_UPDATES table where the transaction part(s) had the Receipt
Date less than the current Partition Receipt Date to facilitate fast reporting.
Multiple instances of the process can be run in parallel. Each instance can process a set number
of Daily Input table partitions.
7.14.1.1 Implementation
This process has been implemented in M_DB_SRV#DRSC310EN_x, where x is the instance
number ranging from 1 to 8 and the postfix “EN” stands for Debit Card/EFTPoS and Night.
7.14.1.2 Job Dependencies
None
7.14.1.3. Rerun action
The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery.
7.15 Schedule M_DB_SRV#DRS_EFT_MS_EXPTN
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN
Cinited 9018 I} CONFIDENCE) Ref: DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY __ Date: 49-Apr-2017
STORED

PageNo: 57 of 123
DRS Host Support Guide

(ee)
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

FUJ00089582

FUJ00089582

This schedule runs DRSC311, which copies records from the daily exception tables into the
corresponding main store exception tables and sets the appropriate State for the records.

7.15.1 Dependencies
This schedule follows the successful completion of the schedule DRS_EFT_MS_NIGHT.

Precedes the schedules DRS_TPS_EXTRCT_D. It also precedes DRS_EFT_REP_101,
DRS_EFT_REP_102 but these dependencies are not exercised.

7.15.2 Process DRSC311

The purpose of this module is to copy the DRS Transaction parts [C112, C12, D, C4 and S] that
are in exception from the Daily Exception tables [DRS_RX_EFT_{C12IC112IC4IDIS}_EXCP] to
the corresponding Exception Main tables [DRS_RX_EFT_{C12IC112IC4IDIS}_EXCP_MAIN].

Only one instance of the program must be run at any time. Multiple instances could result in
duplicate rows being inserted into the Exception Main tables.

On the pattern of DRS Main Store processing (DRSC310), only those exceptions are processed
that have the value of Receipt Date less than or equal to the current Partition Receipt Date. The
value of current Partition Receipt Date is derived from DRS System Parameter “PARTITION
RECEIPT DATE” for the Application Type “EFT”. The record is validated to check it exists in the
Main Store (DRS_RX_EFT_MAIN_STORE] table and the current state of the transaction part in
exception is either derived or copied from the Main Store table.

After a record has been successfully processed and inserted into the Exceptions Main table, the
PROCESSED_YN flag for the corresponding record in Daily Exception table is set to ‘Y’.

7.15.2.1 Implementation
Implemented in M_LDB_SRV#DRSC311E (the postfix “E” stands for Debit Card/EFTPoS).

7.15.2.2 Job Dependencies
None

7.15.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery.

7.16 Schedule M_DB_SRV#DRS_EFT_REP_101

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028

CONFIDENCE)
Limited 2015 Version: 5.0

UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED Page No: 58 of 123
FUJ00089582
FUJ00089582

DRS Host Support Guide

(ee)
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

This schedule contains jobs that generate the Debit Card NB101 report.

This Schedule is run daily after the DRS Main store processing and DRS Main exception merge
from daily exception tables.

7.16.1 Dependencies

Follows after successful completion of schedule DRS_EFT_MS_EXPTN and
DRS_TPS_EXTRCT_D.

Precedes the Network Banking schedule DRS_ REP_000.

7.16.2 Process DRSC322

The process extracts the C4 transactions for each Routing Gateway from DRS Main Store
(DRS_RX_EFT_MAIN_STORE), Main Store Updates
DRS_RX_EFT_MAIN_STORE_UPDATES) and C4 Exception Main
DRS_RX_EFT_C4_EXCP_MAIN) tables and inserts into the DRS NB101_ Results
(DRS_REP_EFT_RESULTS_NB101) table.

This program does not create any report files.

7.16.2.1 Job Dependencies
None

7.16.2.2 Implementation
Implemented in the M_DB_SRV#DRSC322E job (the postfix “E” stands for Debit Card/EFTPoS).

7.16.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery.

7.16.3 Process DRSC324

The process generates NB101 reconciliation reports for the current Run date. The data is
extracted from DRS_REP_EFT_RESULTS_NB101 table and written to the text files.

7.16.3.1 Job Dependencies
Follows successful completion of M_LDB_SRV#DRSC322E.

7.16.3.2 Implementation
Implemented in the M_DB_SRV#DRSC324E job (the postfix “E” stands for Debit Card/EFTPoS).

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) °
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017

STORED PageNo: 59 of 123
FUJ00089582

FUJ00089582
oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
7.16.3.3 Rerun action
The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery.
7.17 Schedule M_DB_SRV#DRS_EFT_REP_102
The generation of DRS NB102 reconciliation report for Debit Card involves three functional
steps:
1. Population of Intermediate tables DRS_REP_EFT_STATE_TOTALS (process DRSC320).
2. Population of Result tables DRS_REP_EFT_RESULTS_NB102_1...12 (process DRSC323).
3. Producing the report text files on the Host operating system (process DRSC325).
The jobs in this schedule perform the above-mentioned three steps.
This Schedule is run daily after the successful completion of NB101 reconciliation reports.
7.17.1 Dependencies
Follows after successful completion of schedule DRS_EFT_MS_EXPTN and
DRS_TPS_EXTRCT_D.
Precedes the Network Banking schedule DRS REP_000.
7.17.2 Process DRSC320
The process populates the DRS State Totals (DRS_REP_EFT_STATE_TOTALS) table from the
transactions held within the DRS Main store (for current day's transactions), DRS Main Store
Updates and the DRS Exception tables for NB102 reports.
This program does not create any report files.
7.17.2.1 Job Dependencies
None
7.17.2.2, Implementation
Implemented in the M_LDB_SRV#DRSC320E job (the postfix E stands for Debit Card/EFTPoS).
7.17.2.3, Rerun action
The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery.
7.17.3 Process DRSC323
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN
Limited 2015 CONFIDENCE) Ref: DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017

STORED PageNo: 60 of 123
FUJ00089582
FUJ00089582

oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

The process populates DRS report NB102 Results (DRS_REP_EFT_RESULTS_NB102_1...12)
tables where each table corresponds to a section of the NB102 reports.

The data is extracted from the DRS Main Store (DRS_RX_EFT_MAIN_STORE) Exceptions
Main (DRS_RX_EFT_{C12IC112IC4ISID}_EXCP_MAIN) — and the State __—‘Totals
(DRS_REP_EFT_STATE_TOTALS) tables and inserted into DRS NB102 Results tables.

The process runs once for each section. To reduce the overall run time, the multiple instances of
the process are run in parallel, where possible. The sections 1, 6, 7 and 12 are run sequentially —
one after the other but the sections 2, 3, 4, 5, 8, 9, 10 and 11 are run in parallel.

Please note that sections do not take similar lengths of time to run. For instance sections 5 and
11 can take up to 30 to 40 minutes, while other sections may be over in a few seconds.

This program does not create any report files.

7.17.3.1 Job Dependencies
Follows successful completion of M_DB_SRV#DRSC320E.

7.17.3.2 Implementation

Implemented in the M_DB_SRV#DRSC323E_x job. Where E is for Debit Card and x is the
section number ranging from 1 to 12. Please refer to the TWS Schedule for Debit Card for inter-
dependencies among the multiple instances of DRSC323.

7.17.3.3, Rerun action

The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery.

7.17.4 Process DRSC325

The process generates NB102 reconciliation reports. The data is extracted from NB102 Results
(DRS_REP_EFT_RESULTS_NB102_1...12) tables and written to the text files.

7.17.1.1 Job Dependencies

This Program follows successful completion of M_DB_SRV#DRSC323N_x jobs, where “E”
stands for Debit Card/EFTPoS and x is the report sections run in parallel (DRSC323).

7.17.1.2 Implementation
Implemented in the M_DB_SRV#DRSC325E job (the postfix E stands for Debit Card/EFTPoS).

7.17.1.3 Rerun action

The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery.

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) °
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017

STORED PageNo: 61 of 123
FUJ00089582

FUJ00089582
oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
7.18 Schedule M_DB_SRV#DRS_EFT_ADMIN
This is the database housekeeping schedule. The schedule archives and purges data from the
Oracle tables and deletes the report/data files older than the pre-defined retention period.
7.18.1 Dependencies
Follows successful completion of the Network Banking schedules DRS_ADMIN
Precedes schedule DRS_EFT_TRN_ACK
7.18.2 Process DRSC361
The purpose of this module is to Archive Control, Data and Report tables to Support and Audit
requirements and Archive/Purge Data and Report tables older than the Retention period for
Archive server. The archive files stored under Archive server are for future references. The old
data is cleared to make space for the new data. Entries from the table
DRS_ARCHIVED_TABLES are used for archive parameters and criteria. The records that go
into this table are also present in the form of a spreadsheet in Appendix F — DRS Archiving
Table Mapping.
This module uses Oracle Export/Import method to archive data as specified in the DRS High
Level Design DES/APP/HLD/0033.
Only one instance of the program must be run at any time. Multiple instances at the same time
could result in corrupt export dump files being created.
If the data purge process fails due to the process not being able to get exclusive access to the
table to purge, an exception is raised and it continues to the next table. The next time the purge
process is run it will purge two days’ worth of data. Some of the tables (like the daily tables) can
only hold around three days’ worth of data, so three failures in a row will give problems.
7.18.2.1 Job Dependencies
None.
7.18.2.2 Implementation
Implemented in the M_LDB_SRV#DRSC361E job (the postfix “E” stands for Debit Card/EFTPoS).
7.18.2.3 Rerun action
The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery.
7.18.3 Process DRSC368
Please refer to the section 6.4.2 for details of the process.
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN
Cinited 9018 I} CONFIDENCE) Ref: DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017

STORED PageNo: 62 of 123
FUJ00089582
FUJ00089582

DRS Host Support Guide

(ee)
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

7.18.3.1 Job Dependencies
Follows the successful completion of M_DB_SRV#DRSC361E job.

7.18.3.2 Implementation

The job runs every day. Implemented in the M_DB_SRV#DRSC368E_3 job (the postfix “E”
stands for Debit Card/EFTPoS).

7.18.3.3 Rerun action

The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery.

7.18.4 Script DRSX362.sh

The purpose of this Unix shell script is to delete various report/data files older than the file
retention period. The script reads the records present in the table
DRS_FILES_TO_HOUSEKEEP for the details of the report/data files to be deleted.

7.18.4.1 Job Dependencies

This job should follow after successful completion of the job DRSC361E (the postfix “E” stands
for Debit Card/EFTPoS).

7.18.4.2 Implementation
Implemented in the M_DB_SRV#DRSX362E job (the postfix “E” stands for Debit Card/EFTPoS).

7.18.4.3 Rerun action

The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery.

7.18.5 DRS_EFT_AUDIT
This job is for Debit Card File Auditing.
The schedule and job details have been provided by the TWS Development team.

7.19 Schedule M_DB_SRV#DRS_EFT_TRN_ACK

The schedule contains a job that checks for delivery status of report files by FTMS to the TIP
(POLMI) remote gateway.

7.19.1 Dependencies

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028

CONFIDENCE)
Limited 2015 Version: 5.0

UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED Page No: 63 of 123
FUJ00089582
FUJ00089582

DRS Host Support Guide

(ee)
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

Follows after successful completion of Schedule DRS_EFT_ ADMIN
Precedes Schedule DRS_ BACKUP, DRS_FS_BACKUP.

7.19.2 Process DRSC367

The DRS report files for Debit Card are created in the directory pointed to by the environment
variable $EFT_TIP_OUTPUT. For each report file transferred to TIP (POLMI), FTMS creates a
delivery receipt (acknowledgement) file in the same directory.

Process DRSC367 harvests file receipt information by checking for report file delivery success in
the delivery receipt files. If found, it renames the files and updates the TIP (POLMI) Receipt date
in DRS_REP_FILE_REGISTER for the corresponding report file.

DN: POL TIP & FTMS Gateway referred to here may not exist??? May be a NFS Mount
somewhere???

7.19.2.1 Job Dependencies
None

7.19.2.2 Implementation
Implemented in the M_LDB_SRV#DRSC367E job (the postfix “E” stands for Debit Card/EFTPoS).

7.19.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery.

7.20 Schedule M_DB_SRV#DRS_EFT_PF_SIM

The schedule contains a job that simulate the production and processing of C2 Status file or C2
S-file.

7.20.1 Dependencies
Follows after successful completion of Schedule DRS_EFT_C12_PARS.
Precedes Schedule DRS_ EFT_C4_PARSE.

7.20.2 Process DRSC372

This process reads the transactions in drs_tx_c2 that have a record_status = 'l' and
routing_gateway equal to that passed as a parameter. For each record found, it will update the
current drs_tx_c2 record and at the same time insert a row into ftms_rx_c4sd table with the
settlement date set to the input ‘DCSSETDT’ parameter.

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) version 5.0

UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED Page No: 64 of 123
FUJ00089582
FUJ00089582

oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

7.20.1.1 Job Dependencies

none

7.20.1.2 Implementation
Implemented in the M_LDB_SRV#DRSC372E job (the postfix “E” stands for Debit Card/EFTPoS)

7.20.1.3. Rerun action

The common process failure scenarios and rerun actions are described in the section Process
Failure and Recovery

8 DRS Tables Overview

8.1 Common Tables

All DRS tables that are used to store non-transactional data are common to both Network
Banking and Debit Card/EFTPoS applications. These include tables for storing system
parameters, process control, audit and various file register tables.

Most common tables have a column named APPLICATION_TYPE, which can be mandatory or
optional depending on the type of table. Notable exclusions are tables associated with
housekeeping tasks such as partition management and archiving. If the application type is
mandatory, it is a part of the key for the table and its value is derived from the Application-Type
command-line input parameter that is passed to the process. If the application type is non-
mandatory, it will be used only for records that are Application specific. The two
APPLICATION_TYPE values used are ‘EFT’ for Debit Card Transactions and ‘NWB’ for Network
Banking Transactions and ETU Transactions.

Refer to Appendix D —- DRS Tables for a brief description of all common DRS tables.

8.2 System Parameters

The System Parameters are configurable parameters stored in DRS_SYSTEM_PARAMTERS
table. One set of System Parameters is stored for Network Banking (NWB) and Debit Card (EFT)
each. The table below lists all the System Parameters currently used by DRS.

Name App I Datatype —_I Description
DRS SYSTEM DATE I NWB_ I DATE The current date that the DRS system is working for.
& EFT The program DRSC360 at the start of each day updates the

parameter by incrementing its value by 1 day.

Before the DRS logical processing day starts, this
parameter will have the value of the preceding day. E.g. at
7am (or before execution of DRSC350) on the 27" of June
2002, this parameter will have the value “26" June 2002"

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) °
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017

STORED PageNo: 65 of 123
FUJ00089582
FUJ00089582

DRS Host Support Guide

(ee)
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

The parameter value is set to NULL after DRS baseline
installation. It is expected to be set to TRUNC (SYSDATE)
on the day prior to running the DRS schedule for the first
time.

PARTITION RECEIPT I NWB& I DATE Indicates the Receipt Date that the most recent partition in
DATE EFT the DRS_RX_NWB_MAIN_STORE table will hold
transactions for.

‘The program DRSC350 at the start of each day updates the
parameter by incrementing its value by 1 day. Normally its
value should match the value of parameter “DRS SYSTEM
DATE”.

Before the DRS logical processing day starts, this
parameter will have the value of parameter ‘DRS SYSTEM
DATE”

The parameter value is set to NULL after DRS baseline
installation. It is expected to be set to TRUNC (SYSDATE)
on the day prior to running the DRS schedule for the first
time.

DRS C4SD INPUT Nwe& I NUMBER Indicates the number of partitions for the table
PARTITIONS EFT FTMS_RX_NWB_C4SD. This value is used by DRSC302
process to derive the next partition number to be processed.

C12 PARSE Nw& I NUMBER Indicates the number of instances of C12 parser
PROCESS COUNT EFT (ORSC201). This value is used to derive the total number of
transactions processed before a set of database alerts
could be raised that trigger the DRSC301 processing

C12 INPUT ALERT NwB& I NUMBER Stores the minimum number of transactions that need to be
LIMIT EFT loaded into a partition of TMS_RX_NWB_C12 before a
database alert is raised to trigger the DRSC301 processing

DRS C12 INPUT NWwB& I NUMBER Indicates the number of partitions for the table
PARTITIONS EFT TMS_RX_NWB_C12. This value is used by DRSC301
process to derive the next partition number to be processed.

VERSION FOR NWB& I NUMBER. Stores the current major version number of the DRS.
WORKSTATION EFT Workstation. This is compared by the Workstation with a
number stored within the application to check if the DRS
Workstation version is compatible with the DRS-Host.

HORIZON C12 INPUT I NWB& I NUMBER Stores the number of seconds after which instances of the
ALERT TIMEOUT EFT C12 parse and load process DRSC301 will timeout while
waiting for a database alert to trigger C12 processing.

OPTIMUM C12 XML. NWB& I NUMBER. Indicates the recommended number of records that the
COUNT EFT Horizon C12 NBS agent should pass to the Host in each
call to the C12-interface.

C4SD PAUSE WAIT I NWB& I NUMBER Stores the number of seconds for which instances of the
UMIT EFT C4ISID parser (DRSC302) are required to pause before
polling the FTMS_RX_NWB_C4SD table for the next batch
of input XML records.

C4SD PARSE NWB& I NUMBER Indicates the number of instances of C4/S/D parser
PROCESS COUNT EFT (DRSC302). This parameter is unused as of now.

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) version 5.0

UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED PageNo: 66 of 123
FUJ00089582

FUJ00089582
oe) DRS Host Support Guide

FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

DRS DAILY TABLE NwB& I NUMBER _I Indicates the number of partitions for each of the DRS Daily

PARTITIONS EFT Tables ie. DRS_RX_NWB_C12, C4, C112, S and D. This
value is used by instances of the Main Store process
(DRSC310) to derive the next partition number to be
processed

TPS NWB TABLE Nwe& I NUMBER Indicates the number of partitions of the TPS-Host table

PARTITIONS EFT TMS_RX_NWB_TRANSACTIONS_1...64. This value is
used by instances of the C112 TPS copy process
(DRSC303) to derive the next partition number of the above-
mentioned TPS-Host table to be processed.

DRS PROCESSING I NWB& I TEXT Indicates if the DRS Processing Day has completed. The

DAY COMPLETE EFT value is set to "Y” by DRS End of Day process (DRSC351)
and is used by instances of C12-parse and load process
(DRSC301) to exit processing.

C4SD FILE LOAD Nwe& I TEXT Indicates if the C4SD file(s) loading has completed. The

COMPLETE EFT value is set to “Y” by DRS File Load Complete process
(DRSC306) and is used by instances of C4SD-parse and
load process (DRSC302) to exit processing

MAXIMUM NUMBER I NWB& I NUMBER _I Stores the maximum number of partitions of the table

OF PARTITIONS EFT (DRS_RX_NWB_MAIN_STORE that can be created. Note
that this parameter value must correspond with the number
of tablespaces available to hold the main store partitions in
order for the DRS Start of Day process to succeed.

C12 RAISE Nwe& I TEXT Indicates if an alert should be raised by the C12 Parse and

REPEATED KEY EFT load process (DRSC301) ifit encounters a C12 record that

EXCEPTION matches a record processed earlier during the processing
day on the Horizon-Transaction-Id and Receipt-Date.

BATCH JOB NwB& I TEXT Indicates if the DRS batch processing has started. This is

STARTED EFT used by the DRS Workstation to prevent updates to the
database.

NEWEST RECEIPT I NWB& I NUMBER I Specifies the upper limit wrt PARTITION RECEIPT DATE

DATE PRD OFFSET I EFT for allowable Receipt Dates

OLDEST RECEIPT NwB& I NUMBER _I Specifies the lower limit wrt PARTITION RECEIPT DATE

DATE PRD OFFSET I EFT for allowable Receipt Dates

NB102 EXCEPTION I NWB& I NUMBER I To store the maximum limit for records to printed on the

LIMIT EFT NB102 reports

NB103_REP_RUN_DA I NWB& I NUMBER I NB103 Report Run date offset, either 0-Today(FRI) or 1-

TE_OFFSET EFT NextDay(SAT)

INVALID PK NwB& I NUMBER _I Specifies the threshold limit for reporting transaction parts

OPERATIONAL EFT with NULL key values as Operational Exceptions

EXCEPTION LIMIT

SUBPARTITION NWB I NUMBER I Specifies the number of rows Financial Institution AL_A

COUNT ALA subpartition can hold

SUBPARTITION NWB I NUMBER — I Specifies the number of rows Financial Institution AL_B

COUNT ALB subpartition can hold

SUBPARTITION NwB I NUMBER I Specifies the number of rows Financial Institution CAPO_A

COUNT CAPO A subpartition can hold

SUBPARTITION NwB I NUMBER I Specifies the number of rows Financial Institution CAPO_B

COUNT CAPO B subpartition can hold

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN poy. DEV/APP/SPG/0028

Limited 2015 CONFIDENCE)

Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY _ Date: 19-Apr-2017

STORED PageNo: 67 of 123
FUJ00089582
FUJ00089582

oe) DRS Host Support Guide

FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

SUBPARTITION Nwe I NUMBER I Specifies the number of rows Financial Institution LINK_A

COUNT LINK A subpartition can hold

SUBPARTITION Nwe I NUMBER I Specifies the number of rows Financial Institution LINK_B

COUNT LINK B subpartition can hold

NRT LOCK FLAG nwe I N/A Row used as a flag to implement serial access to
DRS_NRT_INTERFACE_METADATA.

C12 DAILY SUMMARY I NWB I NUMBER I Specifies the Time (in minutes) for each summary interval.

TIME INTERVAL & EFT

12 DAILY SUMMARY I NWB_ I CHAR Specifies the list of response codes of the transactions that

RESPONSE CODE & EFT need to be summarised.

8.3 DRS Tables

The DRS tables can be divided into three categories:

8.3.1 Static Data Tables

Static data tables store reference-type information that is used by Host Processes and DRS
Workstation.

All static data tables have a column named APPLICATION_TYPE to show whether the reference
data is to be used for Network Banking (NWB), Debit Card (EFT) or both. This column could be
mandatory or nullable depending upon the type of data stored in a static data table. If the column
is nullable, just one set of values is stored in the table and the APPLICATION_TYPE column is
set only for the records that are specific to an APPLICATION_TYPE. For example,
APPLICATION_TYPE column is nullable in DRS_PROCESSES table, which stores the details of
the DRS processes. APPLICATION_TYPE column in this table is populated only for the
processes specific to Network Banking or Debit Card. For common _ processes,
APPLICATION_TYPE column is not populated in DRS_PROCESSES table.

If the APPLICATION_TYPE column is mandatory and a part of the Unique/Primary Key
constraint, common records in the table are repeated for each application type. For example,
APPLICATION_TYPE column is mandatory in DRS_SYSTEM_PARAMETERS table which
stores details of the System Parameters. This table stores all common System Parameters
twice, that is, once for each application type.

8.3.2 Control/Registry Data Tables

The DRS database has a single set (as opposed to two sets of transaction tables) of tables that
store Control and Registry Information. The control records for both Network Banking and Debit
Card are stored in the same table and are distinguished by the value in APPLICATION_TYPE
column, which forms a part of the Unique/Primary key for the table. Examples of such tables
include DRS_REP_FILE_REGISTER, DRS_C4SD_FILE_REGISTER,
DRS_PROCESS_CONTROL etc.

8.3.3 Transaction Data Tables

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) °
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017

STORED PageNo: 68 of 123
DRS Host Support Guide

FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

FUJ00089582

FUJ00089582

The DRS has two sets of transaction data tables one for Network Banking and one for Debit
Card. Each set has a 3-letter acronym in the table name to show which application type the table
belongs to. The Network Banking tables use “NWB” and the Debit Card tables use the “EFT”
acronym. The tables storing similar transactional data for Networking Banking and Debit Card
reside in the same tablespace. For example, DRS_RX_NWB_MAIN_STORE_UPDATES and
DRS_RX_EFT_MAIN_STORE_UPDATES tables store updates to the old Network Banking
transactions and reside in the tablespace DRS_MAIN_STORE_UPDATES.

The DRS has two sets of Oracle users one for Network Banking and one for Debit Card. These
users access the transaction data tables through a set of private synonyms. From example,
DRS_RX_NWB_MAIN_STORE_UPDATES table is accessed through a private synonym named
DRS_RX MAIN STORE_UPDATES for the Oracle users I and
Similarly, DRS_RX_EFT_MAIN_STORE_I UPDATES table is accessed
through a_private synonym named DRS_RX_MAIN_STORE_UPDATES for the Oracle users
The names of the private synonyms are same for

both the sets of Oracle users.

9 Files Created/Used

9.1 Input and Output Data Files

The input data files contain [C4/D/S] messages in XML format received from the Network
Banking Engine (for Network Banking) or Merchant Acquirer (for Debit Card). The input files
containing [S] messages are received for Debit Card only.

The output data files contain [C2] messages in XML format and are sent to Merchant Acquirer
through DCP C2-Bulk File Agent. The output files containing [C2] messages are created for
Debit Card only.

9.1.1. Network Banking & Electronic Top-Ups

9.1.1.1 C4/D Input

These files contain [C4] and [D] messages in XML format and Control Information received from
the Network Banking Engine. TWS runs a script that delivers these files into a Host directory to
be loaded into the DRS database. For Electronic Top-Ups the daily transaction feed file from e-
pay is converted into [C4] and [D] messages in XML format and placed by TWS into the same
Host directory used for Network Banking. No MAC or control information is required for
Electronic Top-Ups.

The file names and storage location areas are as follows:

Storage Location File Naming Convention Extension Extension
Before After
Processing _I Processing

$NWB_NBE_INPUT SFXyyyymmddnnnnn DIF dtf
(/ovnw01/drs/trans/nwbC4Din)

S$NWB_NBE_INPUT EODCTRLyyyymmddnn CTL CTL

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028

CONFIDENCE)
Limited 2015 Version: 5.0

UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED Page No: 69 of 123
FUJ00089582

FUJ00089582
oe) DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

(/bvnw01/drs/trans/nwbC4Din)
$NWB_NBE_INPUT ETU_C4DIN_yyyymmdd DTF att
(/bvnw01 /drs/trans/nwbC4Din)
Where yyyymmad is the Date of creation of the file in Year-Month-Day format and nn{nnj is the
sequence number of the file segment. (not applicable to Electronic Top-Ups).
At S75, NBE C4/D input files are discontinued.
The processed files (*.dtf and *.CTL) are deleted after a configurable number of days by DRS
File Purge job (DRSX362.sh). Also all files are deleted from this directory after a further
configurable amount of time to sweep up any temporary files that are created by TWS.
9.1.2 Debit Card
9.1.2.1 C2 Output
These files contain [C2] messages in XML format. The Host process DRSC307 creates these
files. The TWS launches the DCS C2 Bulk File Agent to process the [C2] transaction file.
The file names and storage location areas follows:
Storage Location File Naming Convention Extension Extension

Before After

Processing _I Processing
$EFT_C2_OUTPUT DCS_C2BULKOUT_yyyymm I .TRN tm
(Ibvnw01/drs/trans/eftc2out) od_nn
Where yyyymmdd is the Date of creation of the file in Year-Month-Day format and nn is the
sequence number derived from the current PFG cycle number maintained by TWS (starts at 01
and increments for each successive run in current business day).
The processed files are deleted after a configurable number of days by DRS File Purge job
(DRSX362.sh).
9.1.2.2 C2 Status Input
These files contain [C2] Status messages in ASCII format. The DCS C2 Bulk File Agent
generates this file once it has processed the [C2] messages file. The Host process DRSC308
loads this file into DRS database.
The file names and storage location areas follows:
Storage Location File Naming Convention Extension Extension

Before After

Processing _I Processing
$EFT_C2_INPUT DCS_C2STSIN_yyyymmdd_n I STS sts
(/bvnw01/drsitrans/efte2in) ”
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIALIN por. DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) .

Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 49-Apr-2017

STORED PageNo: 70 of 123
FUJ00089582

FUJ00089582
oe) DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

Where yyyymmdd is the Date of creation of the file in Year-Month-Day format and nn is the
sequence number is derived from the current PFG cycle number maintained by TWS (starts at
01 and increments for each successive run in current business day). The details PFG cycle
number are available in TWS support guide
The processed files are deleted after a configurable number of days by DRS File Purge job
(DRSX362.sh).
9.1.2.3 C40 (Zero-Value-Confirmations) Input
These files contain Zero Value [C4] messages in XML format, received from the Bulk File Agent.
TWS delivers these files into a Host directory to be loaded into DRS database.
The file names and storage location areas follows:
Storage Location File Naming Convention Extension Extension

Before After

Processing _I Processing
$EFT_NBE_INPUT DCS_C40IN_yyyymmdd_nn I .DTF att
(/bvnw01/drs/trans/eftC4Dsin)
Where yyyymmad is the Date of creation of the file in Year-Month-Day format and nn is the
sequence number is derived from the current PFG cycle number maintained by TWS (starts at
01 and increments for each successive run in current business day).
9.1.2.4 S Input
These files contain [S] messages in XML format, received from the Bulk File Agent. TWS
delivers these files into a Host directory to be loaded into DRS database.
The file names and storage location areas follows:
Storage Location File Naming Convention Extension Extension

Before After

Processing _I Processing
$EFT_NBE_INPUT DCS_SIN_yyyymmdd_nn DTF att
(/bvnw01/drs/trans/eftC4Dsin)
Where yyyymmdd is the Date of creation of the file in Year-Month-Day format and nn is the
sequence number is derived from the current PFG cycle number maintained by TWS (starts at
01 and increments for each successive run in current business day).
9.1.2.5  C4/D Input
These files contain [C4] and [D] messages in XML format, received from the Bulk File Agent.
The Bulk File Agent generates these files using the EMIS files containing [C4/D] messages
produced by the Merchant Acquirer (MA). TWS delivers these files into a Host directory to be
loaded into DRS database.
The file names and storage location areas follows:
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIALIN por. DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) e

Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 49-Apr-2017

STORED PageNo: 71 of 123
FUJ00089582
FUJ00089582

oe) DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

Storage Location File Naming Convention Extension Extension
Before After
Processing _I Processing

$EFT_NBE_INPUT DCS_C4DIN_yyyymmdd_nn I .DTF att

(/ovnw01/drs/trans/eftC4Dsin)

Where yyyymmad is the Date of creation of the file in Year-Month-Day format and nn is the
sequence number derived from the current EMIS cycle number (starts at 01 and increments for
each successive EMIS pickup run in current business day — it is anticipated that this will only
occur once a day currently).

The processed files are deleted after a configurable number of days by DRS File Purge job
(DRSX362.sh).

9.2 Report Files

9.2.1. Network Banking (Including ETU) and Debit Card

9.2.1.1. MSU Report Files

These files contain NBOOO (for Network Banking only), NB101, NB102 and NB103 Reconciliation
Reports for MSU (Management Support Unit). The files are produced daily (with the exception of
NB103 which is weekly), one for each routing gateway and currency type. Electronic Top-Ups are
reported through the Network Banking reports as a unique routing gateway. Also, a Unix link of
these files is created in the TIP (POLMI) and/or Audit directories, where necessary.

TWS copies these report files from the Host to the MIS Workstation. Audit Server copies the
report files by running its own script. In the future there will be a staging server that the files will
be copied to, then the MSU Workstation can then access these files via this staging server.

The old report files (*.TXT) are deleted after a configurable number of days by DRS File Purge
job (DRSX362.sh).

The file names and storage location are as follows:

Directory Name File Name Extension Extension
Before After
Processing _I Processing
$NWB_MSU_OUTPUT & <Application><Date>< .LCK TXT
$EFT_MSU_OUTPUT ingGateway><Report
ection><TxnGroup><

(/bvnw01/drs/trans/drsmsu) cy>

As mentioned above, the report files for both Network Banking and Debit Card are created in the
same physical directory.

The naming convention for the report files is as follows:

<Application><Date><RoutingGateway><ReportNum><Section><TxnGroup><Currency>.<EXT
>

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) °
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017

STORED PageNo: 72 of 123
FUJ00089582

FUJ00089582
oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
<Application> ‘NBS’ is used for Network Banking (including Electronic Top-
Ups) reports and ‘DCP’ for Debit Card reports in NB101, NB102
and NB103 reports. ‘DRS’ is used for NBOOO report.
<Date> Report Run Date in format ‘YYYYMMDD’.
<RoutingGateway> Routing Gateway Id. Add leading zeros to fit in the format
nnnnnnnnnn for NB101, NB102 and NB103. NBOOO uses
‘NIL_LRETURN’.
<ReportNo.> ‘NB000’, ‘NB101’, ‘NB102’ or ‘NB103’.
<Section> Report Section. NB102 uses ‘01’ to ‘12’. NBOOO, NB101 and
NB103 use ‘00’.
<TxnGroup> Transaction Group. NB103 use ‘WDR’ (Withdrawals) or ‘DEP’
(Deposits). NBOOO, NB101 and NB102 use ‘N_A’.
<Currency> Currency. NB101, NB102 and NB103 use a value passed from
the database, usually ‘GBP’ or ‘EUR’. The currency is
substituted by ‘N_A’ if not found for the report. NBOOO uses
‘NLA’.
<EXT> Initially set to LCK, once the file generation process is complete
it is set to TXT.
E.g., NBS200207300000000010NB10100N_AGBP.TXT
DCP200201291111111111NB10100N_AEUR.TXT
9.2.1.2 TIP (POLMI) Report and Acknowledgement Files
The directories $NWB_TIP_OUTPUT (for Network Banking) and $EFT_TIP_OUTPUT (for Debit
Card) contain the report files that are required by POL TIP (POLMI).
All the report files are initially created in $NWB_MSU_OUTPUT and $EFT_MSU_OUTPUT.
Then, Unix links are created in the directory $NWB_TIP_OUTPUT and $EFT_TIP_OUTPUT for
the report files that are required by POL TIP (POLMI).
Certain Network Banking report files are then transferred directly from $NWB_TIP_LOUTPUT
(/pvnw01/by PODG. The remainder are transferred by PODG to another directory
(/bvnw01/drs/trans/nwbtip) for processing by FTMS.
FTMS transfers all Debit Card report files, and the remainder of the Network Banking report files
to the TIP (POLMI) Gateway. For each file successfully transferred to TIP (POLMI), FTMS
creates an acknowledgement file in $NWB_TIP_OUTPUT directory. The acknowledge files
(.ACK) are loaded into DRS database by DRSC367 (Load FTMS acknowledgement file) and then
renamed to lower case ‘.ack’.
The old report (*. TXT.OK) and acknowledgement (*.ack) files are deleted after a configurable
number of days by DRS File Purge process (DRSX362.sh).
The file names and storage location for Network Banking are as follows:
Directory Name File Name Extension Extension
Before After
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN
Cinited 9018 I} CONFIDENCE) Ref: DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY __ Date: 49-Apr-2017

STORED PageNo: 73 of 123
FUJ00089582

FUJ00089582
oe) DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
Processing _I Processing
Jovnw01/drs/trans/nwbtip <Application><Date><Rout I TXT ok
ingGateway><ReportNum><S
ect ion><TxnGroup><Curren
cy>
Jovnw01/drs/trans/nwbtip <Application><Date><Rout I .TXT.ACK TXT.ack
ingGateway><ReportNum><S
ection><TxnGroup><Curren
cy>
Similarly, the file names and storage location for Debit Card are as follows:
Directory Name File Name Extension Extension
Before After
Processing _I Processing
S$EFT_TIP_OUTPUT <Application><Date><Rout I TXT ok
ingGateway><ReportNum><S
(/ovnw01 /drs/trans/efttip) ection><TxnGroup><Curren
cy>
$EFT_TIP_OUTPUT <Application><Date><Rout I .TXT_ACK TXT.ack
ingGateway><ReportNum><S
(/bvnw01/drs/trans/efttip) ection><TxnGroup><Curren
cy>
The details of report file naming convention are available in the section MSU Report Files.
9.3 Oracle Export Files for Audit, Archive and Support
Oracle export files are created for audit, archive and support requirements.
9.3.1. Network Banking and Debit Card
9.3.1.1 Oracle Export Files for Support
These files are created using Oracle “exp” utility. The export dump files contain data from DRS
tables as detailed in Appendix F - DRS Archiving Table Mapping Once the dump files are
successfully created, the files are compressed using Unix utility ‘compress’ to reduce the disk
space usage.
The file names and storage location for Network Banking and Debit Card are as follows:
Directory Name File Name Extension Extension After
Before Compression
Compression
$NWB_SUPPORT_OUTPUT & DRS<ApplicationAlias><Archi_ I .dmp dmp.Z
$EFT_SUPPORT_OUTPUT veGroupAlias><RunDate>
(/bvnw01/drs/trans/drssupport)
Where,
<ApplicationAlias> Stored in DRS_ARCHIVED_TABLES table,
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIALIN Ror DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) .
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 49-Apr-2017

STORED Page No: 74 of 123
FUJ00089582

FUJ00089582
oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

NWB for Network Banking Application and

EFT for Debit Card.
<ArchiveGroupAlias> Stored in DRS_ARCHIVED_TABLES table,

e.g. OPR (for Operational tables)
<RunDate> Current DRS Processing date in the format ‘YYYYMMDD’.
For example, the name of Oracle dump file for DRS_RX_NWB_MAIN_STORE table will be
DRSNWBDMS20020523.dmp.Z and DRS_RX_EFT_MAIN_STORE table will be
DRSEFTDMS20020523.dmp.Z.
An export parameter containing the parameters required by the Oracle export utility and a log file
containing any errors encountered during the export are also created as per the following details:
Directory Name File Name Extension Extension After

Before Compression
Compression

$NWB_SUPPORT_OUTPUT & DRS<ApplicationAlias><Archi I .par NA
$EFT_SUPPORT_OUTPUT veGroupAlias>
(/bvnw01/drs/trans/drssupport)
S$NWB_EXPORT_LOG & DRS<ApplicationAlias><Archi I log NA
$EFT_EXPORT_LOG veGroupAlias><RunDate>
(/bvnw01/drs/trans/drsexplog)
Where,
<ApplicationAlias> Stored in DRS_ARCHIVED_TABLES table,

NWB for Network Banking Application and

EFT for Debit Card.
<ArchiveGroupAlias> Stored in DRS_ARCHIVED_TABLES table,

e.g. OPR (for Operational tables).
<RunDate> Current DRS Processing date in the format ‘YYYYMMDD’.
For example, the name of Oracle export parameters and logs files for
DRS_RX_NWB_MAIN_STORE table will be DRSNWBDMS.par and
DRSNWBDMS20020523.log respectively. Similarly, the name of Oracle export parameters and
logs files for DRS_RX_EFT_MAIN_STORE table will be DRSEFTDMS.par and
DRSEFTDMS20020523.log respectively.
Old files (DRSNWB*.log and DRSEFT*.log) are deleted after a configurable number of days by
DRS File Purge job (DRSX362.sh). The *.par files do not need housekeeping as the same file is
overwritten each day.
9.3.1.2 Oracle Export Files for Archive
The Oracle export dump files are initially created in the directory /ovnw01/drs/trans/drssupport
(pointed to by $NWB_SUPPORT_OUTPUT and $EFT_SUPPORT_OUTPUT). After the files
have been created and compressed successfully a Unix link is created in the directory
/bvnw01/drs/trans/drsarchive (pointed to by $SNWB_ARCHIVE_OUTPUT and
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN
Cinited 9018 I} CONFIDENCE) Ref: DEV/APP/SPG/0028

Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 49-Apr-2017

STORED PageNo: 75 of 123
oe) DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

FUJ00089582

FUJ00089582

$EFT_ARCHIVE_OUTPUT) for the files required for archive purpose as detailed in Appendix F —
DRS Archiving Table Mapping.

The file names and storage location for export dump files are as follows:

Directory Name File Name Extension Extension After
Before Compression
Compression
$NWB_ARCHIVE_OUTPUT & DRS<ApplicationAlias><Archi_ I N/A dmp.Z
S$EFT_ARCHIVE_OUTPUT veGroupAlias><RunDate>

(/bvnw01/drs/trans/drsarchive)

Where,
<ApplicationAlias> Stored in DRS_ARCHIVED_TABLES table,
NWEB for Network Banking Application and
EFT for Debit Card.
<ArchiveGroupAlias> Stored in DRS_ARCHIVED_TABLES table,
e.g. OPR (for Operational tables)
<RunDate> Current DRS Processing date in the format ‘YYYYMMDD’.

For example, the name of Oracle dump file for DRS_RX_NWB_MAIN_STORE table will be
DRSNWBDMS20020523.dmp.Z and for DRS_RX_EFT_MAIN_STORE table will be
DRSEFTDMS20020523.dmp.Z

Old files (DRSNWB*.dmp.Z and DRSEFT*.dmp.Z) are deleted after a configurable number of
days by DRS File Purge job (DRSX362.sh).

9.3.1.3 Oracle Export Files for Audit

The Oracle export dump files are initially created in the directory /ovnw01/drs/trans/drssupport
(pointed to by $NWB_SUPPORT_OUTPUT and $EFT_SUPPORT_OUTPUT).. After the files
have been created and compressed successfully a Unix link is created in the directory
bvnw01/drs/trans/drsaudit (point to by $NWB_AUDIT_OUTPUT and $EFT_AUDIT_OUTPUT) for
the files required for audit purpose as detailed in Appendix F —- DRS Archiving Table Mapping.

The file names and storage location for export dump files are as follows:

Directory Name File Name Extension Extension After
Before Compression
Compression

$NWB_AUDIT_OUTPUT DRS<ApplicationAlias><Archi I N/A dmp.Z
.GroupAlias><RunDat

& $EFT_AUDIT_OUTPUT veGroupAllas> <RunDate>

(fevnw0 1/drs/trans/drsaudit)

Where,
<ApplicationAlias> Stored in DRS_ARCHIVED_TABLES table,

NWB for Network Banking Application and

EFT for Debit Card.
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN
imiteg ba 5 I} CONFIDENCE) Ref: DEV/APP/SPG/0028

Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 49-Apr-2017

STORED PageNo: 76 of 123
FUJ00089582

FUJ00089582
oe) DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
<ArchiveGroupAlias> Stored in DRS_ARCHIVED_TABLES table,
e.g. OPR (for Operational tables)

<RunDate> Current DRS Processing date in the format ‘YYYYMMDD’.
For example, the name of Oracle dump file for DRS_RX_NWB_MAIN_STORE table will be
DRSNWBDMS20020523.dmp.Z and for DRS_RX_EFT_MAIN_STORE table will be
DRSEFTDMS20020523.dmp.Z
Old files (DRSNWB*.dmp.Z and DRSEFT*.dmp.Z) are deleted after a configurable number of
days by DRS File Purge job (DRSX362.sh).
9.4 DRS File Housekeeping Parameters
Directory Name File Name Retention Delete Sub- Application

Period directories? Type
/ovnw01/drs/trans/nwbC4Din “tf 5 IN NWB
/vnw01/drs/trans/nwbC4Din CTL 5 IN NWB
vnw01/drs/trans/drsmsu NBS*.TXT 5 IN NWB
vnw01/drs/trans/drsmsu DRS*.TXT 5 IN NWwB
/ovnw01/drs/trans/nwbtip . 5 IN NWB
/ovnw01/drs/trans/drssupport DRSNWB*.dmp.Z 5 IN NWB
/bvnw01/drs/trans/drsarchive DRSNWB*.dmp.Z 5 N NWB
/ovnw01/drs/trans/drsexplog DRSNWB*log 5 N NWB
/bvnw01/drs/trans/nwbC4Din . 7 IN NWwB
/bvnw01/drs/trans/eftC4DSin *dtf 5 IN EFT
/bvnw01/drs/trans/eftC4DSin “CTL 5 IN EFT
/ovnw01/drs/trans/drsmsu DCP*.TXT 5 N EFT
/ovnw01/drs/trans/efttip * 5 N EFT
bvnw01/drs/trans/drssupport DRSEFT*.dmp.Z 5 IN EFT
/ovnw01/drs/trans/drsarchive DRSEFT*.dmp.Z 5 IN EFT
/ovnw01/drs/trans/drsexplog DRSEFT* log 5 N EFT
/bvnw01/drs/trans/eftC4DSin * 7 N EFT
/ovnw01/drs/trans/eftC2in * 5 N EFT
/bvnw01/drs/trans/eftC2out . 5 IN EFT
10 Support Usage of Archive/Support Export

Files
Bcopyraht Fujitsu Services FUJITSU RES TONFIDENGE) NY IN fet DEVIAPPISPI0028
UNCONTROLLED IF PRINTED OR LOCALLY Date: 49-Apr-2017

STORED PageNo: 77 of 123
FUJ00089582
FUJ00089582

oO DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

DRS Archive/Support files for Network Banking and Debit Card are created in the form of
compressed Oracle Export database dumps. For details on the naming conventions, file
locations and the file contents, refer to the sections 9.3 and Appendix F —- DRS Archiving Table
Mapping.

The compressed Oracle export file formats have been chosen to facilitate transport of these files
to multiple environments and ease of loading. Additionally, as the data will be sufficiently
compacted, the disk usage and transfer time will less. Note that these files are not meant for
restoring the state of tables in Live. The Live Backup and Restores are discussed in Section 11.

The Archive/Support files can be loaded by Support on a separate DRS Support environment.
This would typically be a machine running the same Host operating system and version of Oracle
as Live. The support rig must have all Host work packages that have been applied to Live. Also,
the size of the DRS database must match that of Live for all tablespaces with the exception of
the Main Store partition tablespaces.

The following steps should be followed to use the Archive/Support files on the Support rig:
« Copy the compressed Archive/Support file/s to the “/loadarea’” directory on the Support rig.
e Uncompress the file/s

e Delete all existing records from the target table/s in order to ensure no Primary Key
violations occur and that there is sufficient space in the target tablespace

* If importing the Main Store table (DRS_RX_NWB_MAIN_STORE), drop the table and use
import to create the table with the required partition name

« Use the Oracle 8.1.7 Import Utility “imp” to load the contents of the file into target tables. In
addition to the mandatory parameters like USERID and FILE, it is recommended that the
following parameters are used to minimise chances of failure:

BUFFER = 44000000

IGNORE = Y
COMMIT = Y

FILE = <Name of the database dump file>
TABLES = <List of tables being imported>

11 Backup and Recovery

11.1 Backup

The DRS backups use the RMAN utility provided by Oracle to take full and incremental backups
daily.

The backup strategy enables a full database copy including archive logs to disk on a Sunday.
The incremental backup is taken from Monday to Saturday. The backups are kept on disks for up

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) °
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017

STORED PageNo: 78 of 123
FUJ00089582
FUJ00089582

DRS Host Support Guide

(ee)
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

to 7 days before been deleted. The backup schedule is defined by the application designer
following the guidelines specified in DES/SYM/HLD/0016, but is expected to be along the
following lines:

Following the completion of the Network Banking and Debit Card end of day schedules, and all
other database jobs have completed, the DRS backups are implemented by the DRS_BACKUP
and DRS_FS_BACKUP schedules. Running as full or incremental depending on the day of the
week.

11.2 Recovery

11.2.1 Process Failure

In case of failure, the DRS processes rollback changes made to the database wherever possible
before exiting and/or make use of the Process Control to save the last successful restart point.

Dependencies have been defined in the schedule, which disallows TWS from running processes
that are dependent on the failed process this ensuring data integrity. The failed process is then re-
run by the TWS scheduler after a predefined time gap (with manual intervention). In case of
multiple restart points in a process, program logic is used to start from the latest restart point.

11.2.2 System Failure

If the operating system crashes or there is an Oracle Instance failure during the DRS processing
day, it is possible to restart DRS from the point of failure. This is because the DRS database will
be run in ‘Archive-Log’ mode.

Once the system is re-started, standard Oracle recovery process would apply all committed
transactions which have not been saved earlier, to the database through the use of redo-log
buffers and rollback segments in a process called “roll forward and back”. For more information
refer to the Oracle Administrators Guide for version 8.1.7.

The TWS scheduler records the process name that was being executed when the crash
occurred. As in the case of Process Failure, the schedule will need to be manually restarted from
the process that has failed.

11.2.3 Media Failure

In case of a media or disk failure, Oracle may not be able to save / read data from the disk. This
could happen due to a number of causes but as the DRS database is running in ‘Archive-log’
mode, it is possible to restart from a point in time prior to the failure in the DRS processing day.
This can be achieved by restoring the previous consistent database backup from the BCV (refer
to Section 11.1) and using the archived and online redo-log files to recover to a point of time just
prior to the media failure.

Successful database recovery from a media failure should be followed by schedule re-start from
the point of failure for the Network Banking/Debit Card and other connected systems.

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) version 5.0

UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED Page No: 79 of 123
DRS Host Support Guide

(ee)
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

FUJ00089582

FUJ00089582

It is not envisaged that a part of the schedule would need to be rerun as the restore using online
and archived redo-logs is expected to recover the database to its state prior to the failure and the
incomplete DRS processes could be restarted. However if there is a need for schedule rerun,
refer to Section 14.

If database cannot be restored with the above procedure, refer to Appendix B of doc ref:
DES/APP/SPG/3258 for restore procedure. This will restore database back to the latest
point when database crash occurred and the archivelogs will be restored.

12 External System Failures/Restarts

This section lists the external systems that interface with DRS and discusses the most common
failure scenarios and how DRS can recover from them. For an exhaustive description of Failure
Scenarios and Recovery, please refer to DES/APP/IFS/0006.

12.1 TPS Host/Agent Failure

DRS obtains the [C112] Confirmation Messages, Outlet Last Polled Statuses and the TIP
(POLMI) Cash Account Delivery Statuses from TPS Host. There are two possible failure
scenarios with TPS as described below.

12.1.1 C112 Confirmation Agent Failure

A failure on the part of the C112 TMS Agent to load Network Banking/Debit Card [C112]
transactions into TPS-Host results in the TPS schedule being held up. This in turn would result in
the DRS schedule being held up because of the DRS TWS dependency on completion of TPS
Reports (schedule named M_DB_SRV#TPSCAREP).

DRS waits until the C112 TMS Agents have successfully harvested the Network Banking/Debit
Card [C112] transactions into TPS-Host.

12.1.2 TPS Host failure

TPS and DRS share the same the machine. To prevent the resource contention, the TPS TIP
(POLMI) jobs which have to meet an SLA are run before the DRS jobs.

If a TPS Host failure occurs before the start of the DRS schedule, DRS waits for the TPS issue
to be resolved. The DRS Start of Batch Overnight (DRSC353) job is dependent on TPS Cash
Account Reports (schedule M_DB_SRV#TPSCAREP).

There is a TWS dependency from DRS to TPS schedule as well. TPS Housekeeping (TPSC209)
job can not run until the Network Banking and Debit Card transactions have been copied to DRS.
Refer to DEV/APP/SPG/0026 for more details.

If a database error occurs while the DRS C112 Transactions Copy (DRSC303) or the Last Polled
Outlet/CA Receipts Copy (DRSC366) processes are running, DRS waits until the issue is
resolved. The DRS Copy Processes are rerun after the database problem has been resolved.

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028

CONFIDENCE)
Limited 2015 Version: 5.0

UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED Page No: 80 of 123
FUJ00089582
FUJ00089582

DRS Host Support Guide

(ee)
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

12.2 RDDS Host Database Failure

If a RDDS Host database failure occurs before the execution of the RDDS-to-DRS copy process
(DRSC364), a TWS dependency makes DRS wait for RDDS to be backed up again before
allowing the DRSC364 process to run.

If a RDDS Host database failure occurs during the execution of the RDDS-to-DRS copy process
(DRSC364), the process is likely to fail and log one/more Operational Exceptions to record the
error details. Once RDDS database is back up again, the process can be rerun.

12.3 TES Host Database Failure

A TES Host database failure would result in the C4/D transactions not arriving. One or more of
the TES owned TES_AL_REC_RUN/TES_CAPO_REC_RUN/ TES_LINK_REC_RUN schedules
would not complete due to DRSC371 failing which will result in all the DRS batch overnight
schedules being held up.

Once the failure is resolved and the preceding TES processes have completed, the DRS batch
overnight jobs will start execution.

Because of the dependencies within the DRS schedule, there would be a corresponding delay in
the completion of TPS-Host batch overnight.

12.4 FTMS Report-file Transfer Failure

Some Network Banking report files are transferred via PODG. The remainder, and all Debit Card
report files, are transferred by FTMS. FTMS transfers the relevant reconciliation reports to TIP-
remote server and their transfer acknowledgement files back to DRS.

If a failure occurs in transferring these files to the TIP-remote server due to the failure of FTM
transfer mechanism or the Network, DRS-Host would not receive acknowledgements for the files
that could not be transferred. This would be reflected in the value of TIP_LRECEIPT_DATE in
table DRS_REP_FILE_REGISTER.

All report files created for transfer to the PLG FTMS gateway are retained for 5 working days
(configurable) as listed in 9.4 DRS File Housekeeping Parameters. As long as the failure is
resolved and the report files are transferred with that period, there would be no loss of data.

12.5 TWS File Transfer Failure

TWS scripts transfer the MSU Reports to MSU using NFS mounted host directory
(/bvnw01/drs/trans/drsmsu) on the SSC Server. Another set of scripts transfer the DRS Support
and Archive files to the SSC Archive Server again via NFS mounted Host directories
(/bvnw01/drs/trans/drssupport and /bvnw01/drs/trans/drsarchive).

Failure in transferring files to the MSU/SSC Archive may result in some/all of the files not being
transferred. This should not be an issue for Host processing and would not result in loss of data
as long as the file transfer mechanism is able to successfully transfer the files before the files are
deleted by DRS file housekeeping process.

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) version 5.0

UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED Page No: 81 of 123
FUJ00089582

FUJ00089582
oe) DRS Host Support Guide

FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN

CONFIDENCE)

The files would remain on the DRS-Host for MSU to request for manual transfer in case of
automatic transfer failures. Similarly the Support/Archive files can also be requested for a
manual transfer from the DRS-Host.
From Directories and DES/APP/HLD/0108, space for 5 peak working days at phase-2 volumes
has been requested for the DRS Support and MSU-Report directories.
12.6 Audit Server File Transfer Failure
DRS creates Unix hard links for reconciliation reports and a compressed export of the oldest
Main Store partition in the DRS-Audit (/bvnw01/drs/trans/drsaudit) directory.
Failure in transferring files to the Audit Server may result in some/all of the files not being
transferred to the Audit Server. This should not be an issue for Host processing and would not
result in loss of data as long as the file transfer mechanism is able to successfully transfer the
files before the space allocated to the audit directory is exhausted or before the files are deleted
by Audit file housekeeping. From Directories and DES/APP/HLD/0108, space for 5 peak working
days at phase-2 volumes has been requested for the Audit directory.

13 Tuning

13.1 Oracle Tuning

The following table indicates the tuning that has been done to the initTPS.ora parameter file:

Parameter Value Reason

DB_FILE_MULTIBLOCK_READ_COUN I 16 Set to 1Mb, so that table scans are done as close as.

T possible to one extent against the partitioned main store
table and that full table scans are efficient

DB_FILES 600 Maximum number of database files that can be opened
for this database.

OPEN_CURSORS 400 Maximum number of open cursors a session can have at
atime.

DML_LOCKS 2048 Maximum number of DML locks — one for each table
modified in a transaction

DB_BLOCK_BUFFERS 12800 Attempt to fetch large number of main store transaction
records into memory in order to improve performance

(100MB)
LOG_BUFFERS 163840 Size of the Redo Log Buffers
(16MB)

SORT_AREA_SIZE 67108864 Allows the batch processes to sort large volumes of

transactions in memory
(64MB)

PARALLEL_MAX_SERVERS 80 Maximum number of Parallel Query Servers that can be
opened. Set to a high value to allow the various multiple
instance processes to execute parallel queries

PARALLEL_MIN_SERVERS 10 Minimum number of Parallel Query Servers that are

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIALIN per DEV/APP/SPG/0028

Limited 2015 CONFIDENCE) .

Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 49-Apr-2017

STORED PageNo: 82 of 123
oe) DRS Host Support Guide
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

FUJ00089582
FUJ00089582

always open. Value has been set such that Oracle does
not need to open any parallel query servers while the
single instance processes (e.g. reports) are running

PROCESSES 100 Maximum number of operating system user processes
that can simultaneously connect to Oracle.

TRANSACTIONS 64 Maximum number of Concurrent Transactions

DISTRIBUTED_TRANSACTIONS 30 Maximum number of Concurrent Distributed
Transactions.

13.2 Schedule tuning

There are two ways to tune the schedule performance:

13.2.1. Schedule parallelism

Several parallel streams will run the load, parse and main store update jobs within the DRS
schedule (e.g. if eight streams are run, each stream will process on eighth of the total number of
partitions). The processes have been scheduled such that write to the same set of tables are not
run at the same time.

The parallelism needs to be tuned on a regular basis to take into account the changing volumes
and spread of data so that each activity can make maximum use of the computer configuration.

13.2.2 Resource pools

TWS has a facility to limit the number of jobs running that requires a particular resource, such as
a tape drive. These resource pools are user defined, and can be used to minimise contention.

DRS does not currently use TWS resource pools as the number of jobs running at any given time
is not considered high enough.

13.3 Main store partition tuning

The DRS Main Store tables for Network Banking and Debit Card have been partitioned on
Receipt Date and sub-partitioned on ‘hash’ of Horizon-Transaction-Id. Each partition (along with
its sub-partitions) has its own tablespace, which is spread across physical disks. This has been
done to improve query efficiency and is particularly beneficial for use in parallel queries.

13.4 SQL hint tuning

The Oracle Database Server supports a number of ‘hints’ to its optimiser which informs the
RDBMS at run time of access paths that have been found (through performance testing) to be
the most efficient path to use.

Bearing in mind that DRS is a new product and that the transaction spread may change over
time, the SQL hints used have been stored in a table named DRS_SQL_HINTS. Host processes

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) °
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017

STORED PageNo: 83 of 123
DRS Host Support Guide

(ee)
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

FUJ00089582
FUJ00089582

that expect to find SQL hints access this table to fetch and use the SQL hint. This has been
implemented to provide for ease of change.

For processes that access large tables, the hint “Parallel” can be/is used for SQL operations
doing fetches and performing sorts. This makes use of the multiple processors present on Host,
multiple parallel query servers possible due to the virtual memory available on the host and the
striping of the tablespaces’ data files across disks.

14 Re-run

DRS has been designed to automatically recover from a data centre failure. All programs will
restart at the point of failure regardless of whether the TWS schedule was recovered.

Since DRS maintains data for 91 days and the non-transient tables are updated on receipt of
each transaction part, it is not advisable to rerun part of the schedule that has been successfully
processed.

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028

CONFIDENCE)
Limited 2015 Version: 5.0

UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED Page No: 84 of 123
FUJ00089582
FUJ00089582

co DRS Host Support Guide .
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN &

CONFIDENCE)

Appendix A — Network Banking TWS Schedule
See DES/APP/HLD/0091

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) *
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017

STORED Page No: 85 of 123
FUJ00089582
FUJ00089582

co DRS Host Support Guide .
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN &

CONFIDENCE)

Appendix B — Debit Card TWS Schedule
See DES/APP/HLD/0091

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) *
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017

STORED Page No: 86 of 123
FUJ00089582
FUJ00089582

co DRS Host Support Guide .
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN &

CONFIDENCE)

Appendix C — Tablespaces and Raw Volumes
Refer to DES/APP/HLD/0108 and DEV/INF/LLD/0043 for full details.

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) *
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017

STORED Page No: 87 of 123
DRS Host Support Guide

FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

Fe)
FUJITSU

Appendix D — DRS Tables

This section provides a list of tables used by DRS along with their purpose and partition key details.

FUJ00089582
FUJ00089582

Common Table

These tables are common between the Network Banking and Debit Card.

Table Name

Partition Key

Brief Description

DRS_ANALYZED_OBJECTS

To store the details of DRS database objects need to be ANALYZED to gather the statistics. The statistics is used by Oracle
optimiser to improve the query performance.

DRS_ARCHIVED_TABLES

Holds the parameters that define rules for archiving each table.

DRS_C4SD_FILE_REGISTER

Records loading and processing of NBE files received into DRS.

DRS_EXCEPTION_CODES

Contains all the possible exceptions the DRS system may encounter. If an exception is raised and does not appear in this table then it,
is known an unknown error.

DRS_FILES_TO_HOUSEKEEP

Holds parameters that define rules for housekeeping [purging] the DRS-Host owned data directories \ files.

DRS_MSU_TEMP_QUERY

Audit queries executed by the DRS Workstation

DRS_MSU_TEMP_RESULT

To store the temporary results of the query executed by the DRS Workstation.

DRS_MS_DATA_MISSMATCH_RULES

Validation rules for DRSC310

DRS_NRT_INTERFACE_METADATA

Stores the current position regarding certain partitioned tables.

DRS_OPERATIONAL_EXCEPTIONS

Stores details of errors that the system has encountered during processing (or during the time the system is operating). Errors are
inserted into this table from individual modules.

DRS_ORACLE_ERROR_CODES

Stores all Oracle Error Codes that correspond to a data exception

DRS_PARTITION_CREATES

Used by partition management. Details the current state of each partition for partition managed tables.

DRS_PARTITION_STATUS_HISTORY

Used by partition management. Details a history of partition create / archive / delete for each partition managed table.

DRS_PARTITIONED_INDEXES

Used by partition management. Contains meta-data for partition definitions.

DRS_PARTITIONED_TABLES

Used by partition management. Contains meta-data for partition definitions

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) _
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017

STORED

Page No: 88 of 123
Fe)
FUJITSU

FUJ00089582

FUJ00089582

DRS Host Support Guide

FUJITSU RESTRICTED (COMMERCIAL IN

CONFIDENCE)

DRS_PROCESS_AUDIT

Table maintains process audit information for all DRS Host processes. An entry is made in it at the beginning and end of each Host
process.

DRS_PROCESS_CONTROL

Table is used to allow process re-startability. An entry is made for new execution of a DRS process instance.

In case such an entry exists for an instance for the processing day, a re-start condition is assumed. A valid Process end date
indicates process completion.

Some processes require multiple runs for the processing day and this is handled by incrementing the run number for run of the
process.

DRS_PROCESSES

List of all processes with descriptions used by the DRS System.

DRS_REP_FILE_REGISTER

Details of each report produced are logged into this table. Also any links created are flagged for each report.

DRS_REP_LINES

Hold SQL queries called by various report programs and used to derive the results for various Report sections.

DRS_REPORTS

Holds static data of all Reports defined for each application and destination

DRS_SQL_HINTS

Stores the SQL hints that may be used by DRS host/workstation processes to optimise the query performance. Storing the SQL Hint
outside the code gives the facility of changing the hint without having to redeliver code

DRS_STATE_VALIDATION_RULES.

Table to store DRS state validation rule ids and rule definitions.

DRS_SUBPARTITION_RANGES

Used by partition management. Defines the next partition range value for a table.

DRS_SYSTEM_PARAMETERS

Stores all DRS System Parameters for each Application-Type.

DRS_TABLE_GROUPS

Used by partition management. Contains meta-data defining grouping for drs_partitioned_tables.

DRS_TABLE_PARTITIONS

Used by partition management. Contains meta-data for partition definitions.

DRS_TRANSACTION_STATES

Lookup table that stores the states a transaction can be set to,

DRS_TRANSACTION_TYPE_GROUPS

Lookup table that stores the Transaction-Type numbers contained within a transaction group.

RDDS_ACCOUNTING_WEEKS

DRS local copy of RDDS Accounting Weeks used for NB103 reporting

RDDS_CLIENTS

DRS local copy of RDDS Clients.

RDDS_ROUTING_GATEWAYS.

DRS local copy of RDDS Routing Gateways.

TMS_ACT_DRS

Agent Checkpoint table. This table is populated by the Horizon NBS Confirmation C12 Agent with a pointer to the last record from the
Messagestore that has been successfully loaded into DRS.

© Copyright Fujitsu Services
Limited 2015

FUJITSU RESTRICTED (COMMERCIAL IN.

CONFIDENCE)

UNCONTROLLED IF PRINTED OR LOCALLY

STORED

Ref. DEV/APP/SPG/0028
Version: 5.0

Date: 19-Apr-2017

Page No: 89 of 123
FUJ00089582
FUJ00089582

DRS Host Support Guide

FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

TMS_ART_DRS : Table stores the run state of the Horizon NBS Confirmation C12 Agent. The status is used to communicate the run state of the Agent
to other Agent instances.

TPS_OUTLETS_LAST_POLLED - Contains date of Last End of Day message received by TPS from each outlet by Group-Id. Copied daily from TPS after the TPS
batch run

TPS_TIP_CA_RECEIPTS - Contains dates of when the last 13 Cash Account files have been receipted by TIP (POLMI) for each Outlet
Copied daily from TPS after the TPS batch run.

Network Banking Tables

The following tables are specific to the Network Banking.

Table Name Partition Key Brief Description

DRS_C12_NWB_INP_EXCEPTIONS I - Stores unparsable / corrupt / invalid NBE [C12] XML messages.

DRS_C12_NWB_MONITOR - History of monitor runs

DRS_C4SD_NWB_INP_EXCEPTIONS I - Stores unparsable / corrupt / invalid NBE [C4/S/D] XML messages.

DRS_NWB_C12_DAILY_SUMMARY : ‘Summary table

DRS_REP_NWB_CAP_TOTALS - This table holds selective data from
DRS_RX_NWB_MAIN_STORE, DRS_RX_NWB_MAIN_STORE_UPDATES, DRS_RX_NWB_C112_EXCP_MAIN and
DRS_RX_NWB_C4_EXCP_MAIN. This set of daia is then used to populate DRS_REP_NWB_RESULTS_NB103.

DRS_REP_NWB_RESULTS_NB101 - This table holds data from a combination of DRS_RX_NWB_MAIN_STORE and DRS_RX_NWB_C4_EXCP_MAIN used to
populate report line details for the NB101 Settlement Statement.

DRS_REP_NWB_RESULTS_NB102_1 I - This table holds selective data from DRS_REP_NWB_STATE_TOTALS required to populate report line details for the NB102
Section 1 output file.

DRS_REP_NWB_RESULTS_NB102_10 I - This table holds selective data from a combination of DRS_RX_NWB_MAIN_STORE, DRS_RX_NWB_C112_EXCP_MAIN,
DRS_RX_NWB_C12_EXCP_MAIN, DRS_RX_NWB_C4_EXGP_MAIN, DRS_RX_NWB_D_EXCP_MAIN and
DRS_RX_NWB_S_EXCP_MAIN used to populate report line details for the NB102 Section 10 output file.

DRS_REP_NWB_RESULTS_NB102_11 I - This table holds selective data from a combination of DRS_RX_NWB_MAIN_STORE, DRS_RX_NWB_C112_EXCP_MAIN,
DRS_RX_NWB_C12_EXCP_MAIN, DRS_RX_NWB_C4_EXCP_MAIN, DRS_RX_NWB_D_EXCP_MAIN and
DRS_RX_NWB_S_EXCP_MAIN required to populate report line details for the NB102 Section 11 output file

© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN per DEV/APP/SPG/0028

Limited 2015 CONFIDENCE) ;

Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY _ Date: 19-Apr-2017

STORED

Page No: 90 of 123
Fe)
FUJITSU

FUJ00089582

FUJ00089582

DRS Host Support Guide

FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)

DRS_REP_NWB_RESULTS_NB102_12

This table holds selective data from DRS_REP_NWB_STATE_TOTALS required to populate report line details for the NB102
Section 12 output file

DRS_REP_NWB_RESULTS_NB102_2

This table holds selective data from a combination of DRS_RX_NWB_MAIN_STORE, DRS_RX_NWB_C112_EXCP_MAIN,
DRS_RX_NWB_C12_EXCP_MAIN, DRS_RX_NWB_C4_EXCP_MAIN, DRS_RX_NWB_D_EXCP_MAIN and
DRS_RX_NWB_S_EXCP_MAIN required to populate report line details for the NB102 Section 2 output file

DRS_REP_NWB_RESULTS_NB102_3

This table holds selective data from a combination of DRS_RX_NWB_MAIN_STORE, DRS_RX_NWB_C112_EXCP_MAIN,
DRS_RX_NWB_C12_EXCP_MAIN, DRS_RX_NWB_C4_EXCP_MAIN, DRS_RX_NWB_D_EXCP_MAIN and
DRS_RX_NWB_S_EXCP_MAIN required to populate report line details for the NB102 Section 3 output file

DRS_REP_NWB_RESULTS_NB102_4

This table holds selective data from a combination of DRS_RX_NWB_MAIN_STORE, DRS_RX_NWB_C112_EXCP_MAIN,
DRS_RX_NWB_C12_EXCP_MAIN, DRS_RX_NWB_C4_EXCP_MAIN, DRS_RX_NWB_D_EXCP_MAIN and
DRS_RX_NWB_S_EXCP_MAIN required to populate report line details for the NB102 Section 4 output file.

DRS_REP_NWB_RESULTS_NB102_5

This table holds selective data from a combination of DRS_RX_NWB_MAIN_STORE, DRS_RX_NWB_C112_EXCP_MAIN,
DRS_RX_NWB_C12_EXCP_MAIN, DRS_RX_NWB_C4_EXCP_MAIN, DRS_RX_NWB_D_EXCP_MAIN and
DRS_RX_NWB_S_EXCP_MAIN required to populate report line details for the NB102 Section 5 output file

DRS_REP_NWB_RESULTS_NB102_6

This table holds selective data from DRS_REP_NWB_STATE_TOTALS required to populate report line details for the NB102
Section 6 output file.

DRS_REP_NWB_RESULTS_NB102_7

This table holds selective data from DRS_REP_NWB_STATE_TOTALS required to populate report line details for the NB102
Section 7 output file

DRS_REP_NWB_RESULTS_NB102_8

This table holds selective data from a combination of DRS_RX_NWB_MAIN_STORE, DRS_RX_NWB_C112_EXCP_MAIN,
DRS_RX_NWB_C12_EXCP_MAIN, DRS_RX_NWB_C4_EXCP_MAIN, DRS_RX_NWB_D_EXCP_MAIN and
DRS_RX_NWB_S_EXCP_MAIN required to populate report line details for the NB102 Section 8 output file.

DRS_REP_NWB_RESULTS_NB102_9

This table holds selective data from a combination of DRS_RX_NWB_MAIN_STORE, DRS_RX_NWB_C112_EXCP_MAIN,
DRS_RX_NWB_C12_EXCP_MAIN, DRS_RX_NWB_C4_EXCP_MAIN, DRS_RX_NWB_D_EXCP_MAIN and
DRS_RX_NWB_S_EXCP_MAIN to populate report line details for the NB102 Section 9 output file

DRS_REP_NWB_RESULTS_NB103

This table holds selective data from DRS_REP_NWB_CAP_TOTALS required to populate report line details for the NB103 Settled
Transaction / Cash Account Reconciliation Statement output file.

DRS_REP_NWB_STATE_TOTALS

This table holds selective data from

DRS_RX_NWB_MAIN_STORE, DRS_RX_NWB_MAIN_STORE_UPDATES, DRS_RX_NWB_C112_EXCP_MAIN,
DRS_RX_NWB_C12_EXCP_MAIN, DRS_RX_NWB_C4_EXCP_MAIN, DRS_RX_NWB_D_EXCP_MAIN and
DRS_RX_NWB_S_EXCP_MAIN. This set of data is then used to populate NB102 results tables for sections 1, 6, 7 and 12.

DRS_RX_NWB_C112 HASH Table contains the parsed and domain-validated (ct 12) records for a DRS processing Day. For duplicate and corrupt records, the
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL iN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) i
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED PageNo: 91 of 123
Fe)
FUJITSU

FUJ00089582

FUJ00089582

DRS Host Support Guide

FUJITSU RESTRICTED (COMMERCIAL IN

CONFIDENCE)

(HORIZON_TRANSACTION

_ID), 64 partitions
DRS_RX_NWB_C112_EXCP : C112 Daily exceptions table populated by the DRS C112 load processes.
DRS_RX_NWB_C112_EXCP_MAIN - This table stores C112 exception data for up to 90 days. The table will be partitioned on the same partition key as the Main Store
table, i.e., on the Receipt Date of the transaction.
Data older than 90 days will be archived and then deleted from the table.
DRS_RX_NWB_C12 HASH Table contains the parsed and domain-validated [C12] records for a DRS processing Day. For duplicate and corrupt records, the non-
(HORIZON_TRANSACTION I key column values are I blank and a corresponding record is created in the table DRS_RX_NWB_C12_EXCP.
_ID), 64 partitions
DRS_RX_NWB_C12_EXCP - C12 Daily Exceptions table populated by the DRS C12 Parse processes.
DRS_RX_NWB_C12_EXCP_MAIN - This table stores C12 exceptions data for up to 90 days. The table will be partitioned on the same partition key as the Main Store
table, i.e., on the Receipt Date of the transaction.
Data older than 90 days will be archived and then deleted from the table.
DRS_RX_NWB_C4 - Table contains the parsed and domain-validated [C4] records for a DRS processing Day. For duplicate and corrupt records, the non-
key column values are I blank and a corresponding record is created in the table DRS_RX_NWB_C4_EXCP.
DRS_RX_NWB_C4_EXCP - C4 Daily Exceptions table populated by the DRS C4 Parse processes.
DRS_RX_NWB_C4_EXCP_MAIN - This table stores C4 exception data for up to 90 days. The table will be partitioned on the same partition key as the Main Store table,
ie., on the Receipt Date of the transaction.
Data older than 90 days will be archived and then deleted from the table.
DRS_RX_NWB_D HASH Table contains the parsed and domain-validated [D] records for a DRS processing Day. For duplicate and corrupt records, the non-
(HORIZON_TRANSACTION I key column values are I blank and a corresponding record is created in the table DRS_RX_NWB_D_EXCP.
_ID), 64 partitions

DRS_RX_NWB_D_EXCP

D Daily Exceptions table populated by the DRS D Parse processes

DRS_RX_NWB_D_EXCP_MAIN

This table stores [D] exception data for up to 90 days. The table will be partitioned on the same partition key as the Main Store table,
iLe., on the Receipt Date of the transaction.

Data older than 90 days will be archived and then deleted from the table

DRS_RX_NWB_MAIN_STORE

RANGE (RECEIPT_DATE)
(upto 91 partitions)

Main DRS table that store all the transaction parts received along with the transaction status

© Copyright Fujitsu Services
Limited 2015

FUJITSU RESTRICTED (COMMERCIAL IN. Ref:

CONFIDENCE)

UNCONTROLLED IF PRINTED OR LOCALLY

STORED

DEV/APP/SPG/0028
Version: 5.0
Date: 19-Apr-2017
Page No: 92 of 123
Fe)
FUJITSU

FUJ00089582

FUJ00089582

DRS Host Support Guide

FUJITSU RESTRICTED (COMMERCIAL IN

CONFIDENCE)

Sub-partitioned on HASH
(HORIZON_TRANSACTION
_ID), 64 sub-partitions

DRS_RX_NWB_MAIN_STORE_UPDAT
ES

Table stores a copy of all the changes done to the Main Store partitions other than the current day's partition.

DRS_RX_NWB_S HASH Table contains the parsed and domain-validated [S] records for a DRS processing Day. For duplicate and corrupt records, the non-
(HORIZON_TRANSACTION I key column values are I blank and a corresponding record is created in the table DRS_RX_NWB_S_EXCP.
_ID), 64 partitions
DRS_RX_NWB_S_EXCP : S Daily Exceptions table populated by the DRS S Parse processes
DRS_RX_NWB_S_EXCP_MAIN : This table stores [S] exception data for up to 90 days. The table will be partitioned on the same partition key as the Main Store table,
i.e., on the Receipt Date of the transaction.
Data older than 90 days will be archived and then deleted from the table.
FTMS_RX_NWB_C4SD HASH C4/S/D Input Store populated by the DRS File load process using transactions from the C4/S/D data file from the NBS Switch for

(ORS_INSERT_SEQUENCE
_NUMBER), 8 partitions

Network Banking and Solve-PFG/MA for Debit Card.

TMS_RX_NWB_C12

HASH
(ORS_INSERT_SEQUENCE
_NUMBER), 8 partitions

C12 Input Store populated by the Agent instances via database object calls

DRS_TX_NWB_C2_AL_A

RANGE
(PARTITION_LOGICAL_DAT
E) (Upto 5 Partitions) Sub-
partitioned on
HASH(SUBPARTITION_ID),
100 sub-partitions.

BX C2 table that stores all the C2 transaction for the financial institution AL_A

DRS_TX_NWB_C2_AL_B

RANGE
(PARTITION_LOGICAL_DAT
E) (Upto 5 Partitions) Sub-
partitioned on
HASH(SUBPARTITION_ID),
100 sub-partitions.

NBX C2 table that stores all the C2 transaction for the financial institution AL_B

DRS_TX_NWB_C2_CAPO_A

RANGE
(PARTITION_LOGICAL_DAT

NBX C2 table that stores all the C2 transaction for the financial institution CAPO_A

© Copyright Fujitsu Services
Limited 2015

FUJITSU RESTRICTED (COMMERCIAL IN.

CONFIDENCE)

UNCONTROLLED IF PRINTED OR LOCALLY

STORED

Ref. DEV/APP/SPG/0028
Version: 5.0

Date: 19-Apr-2017

Page No: 93 of 123
Fe)
FUJITSU

DRS Host Support Guide

FUJITSU RESTRICTED (COMMERCIAL IN

CONFIDENCE)

FUJ00089582
FUJ00089582

E) (Upto 5 Partitions) Sub-
partitioned on
HASH(SUBPARTITION_ID),
100 sub-partitions.

DRS_TX_NWB_C2_CAPO_8

RANGE
(PARTITION_LOGICAL_DAT
E) (Upto 5 Partitions) Sub-
partitioned on
HASH(SUBPARTITION_ID),
100 sub-partitions.

NBX C2 table that stores all the C2 transaction for the financial institution CAPO_B

DRS_TX_NWB_C2_EXCP

Exception table for C2 records.

DRS_TX_NWB_C2_LINK_A

RANGE
(PARTITION_LOGICAL_DAT
E) (Upto 5 Partitions) Sub-
partitioned on
HASH(SUBPARTITION_ID),
100 sub-partitions.

NBX C2 table that stores all the C2 transaction for the financial institution LINK_A

DRS_TX_NWB_C2_LINK_B

RANGE
(PARTITION_LOGICAL_DAT
E) (Upto 5 Partitions) Sub-
partitioned on
HASH(SUBPARTITION_ID),
100 sub-partitions,

NBX C2 table that stores all the C2 transaction for the financial institution LINK_B

Debit Card Tables

The following tables are specific to the Debit Card.

Table Name

Partition Key

DRS_C12_EFT_INP_EXCEPTIONS

Stores unparsable / corrupt / invalid NBE [C12] XML messages.

DRS_C12_EFT_MONITOR

History of monitor runs

DRS_C4SD_EFT_INP_EXCEPTIONS

Stores unparsable / corrupt / invalid NBE [C4/S/D] XML messages.

DRS_EFT_C12_DAILY_SUMMARY

© Copyright Fujitsu Services
Limited 2015

- Summary table
FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE) Ref: DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY _ Date: 19-Apr-2017
STORED

PageNo: 94 of 123
Fe)
FUJITSU

DRS Host Support Guide

CONFIDENCE)

FUJITSU RESTRICTED (COMMERCIAL IN

FUJ00089582
FUJ00089582

DRS_REP_EFT_CAP_TOTALS

This table holds selective data from

DRS_RX_EFT_MAIN_STORE, DRS_RX_EFT_MAIN_STORE_UPDATES, DRS_RX_EFT_C112_EXCP_MAIN and
DRS_RX_EFT_C4_EXCP_MAIN. This set of data is then used to populate DRS_REP_EFT_RESULTS_NB103.

DRS_REP_EFT_RESULTS_NB101

This table holds data from a combination of DRS_RX_EFT_MAIN_STORE and DRS_RX_EFT_C4_EXCP_MAIN used to populate
report line details for the NB101 Settlement Statement.

DRS_REP_EFT_RESULTS_NB102_1

This table holds selective data from DRS_REP_EFT_STATE_TOTALS required to populate report line details for the NB102 Section
1 output file,

DRS_REP_EFT_RESULTS_NB102_10

This table holds selective data from a combination of DRS_RX_EFT_MAIN_STORE, DRS_RX_EFT_C112_EXCP_MAIN,
DRS_RX_EFT_C12_EXCP_MAIN, DRS_RX_EFT_C4_EXCP_MAIN, DRS_RX_EFT_D_EXCP_MAIN and
DRS_RX_EFT_S_EXCP_MAIN used to populate report line details for the NB102 Section 10 output file.

DRS_REP_EFT_RESULTS_NB102_11

This table holds selective data from a combination of DRS_RX_EFT_MAIN_STORE, DRS_RX_EFT_C112_EXCP_MAIN,
DRS_RX_EFT_C12_EXCP_MAIN, DRS_RX_EFT_C4_EXCP_MAIN, DRS_RX_EFT_D_EXCP_MAIN and
DRS_RX_EFT_S_EXCP_MAIN required to populate report lin details for the NB102 Section 11 output file.

DRS_REP_EFT_RESULTS_NB102_12

This table holds selective data from DRS_REP_EFT_STATE_TOTALS required to populate report line details for the NB102 Section
12 output file.

DRS_REP_EFT_RESULTS_NB102_2

This table holds selective data from a combination of DRS_RX_EFT_MAIN_STORE, DRS_RX_EFT_C112_EXCP_MAIN,
DRS_RX_EFT_C12_EXCP_MAIN, DRS_RX_EFT_C4_EXCP_MAIN, DRS_RX_EFT_D_EXCP_MAIN and
DRS_RX_EFT_S_EXCP_MAIN required to populate report line details for the NB102 Section 2 output file.

DRS_REP_EFT_RESULTS_NB102_3

This table holds selective data from a combination of DRS_RX_EFT_MAIN_STORE, DRS_RX_EFT_C112_EXCP_MAIN,
DRS_RX_EFT_C12_EXCP_MAIN, DRS_RX_EFT_C4_EXCP_MAIN, DRS_RX_EFT_D_EXCP_MAIN and
DRS_RX_EFT_S_EXCP_MAIN required to populate report line details for the NB102 Section 3 output file.

DRS_REP_EFT_RESULTS_NB102_4

This table holds selective data from a combination of DRS_RX_EFT_MAIN_STORE, DRS_RX_EFT_C112_EXCP_MAIN,
DRS_RX_EFT_C12_EXCP_MAIN, DRS_RX_EFT_C4_EXCP_MAN, DRS_RX_EFT_D_EXCP_MAIN and
DRS_RX_EFT_S_EXCP_MAIN required to populate report line details for the NB102 Section 4 output file.

DRS_REP_EFT_RESULTS_NB102_5

This table holds selective data from a combination of DRS_RX_EFT_MAIN_STORE, DRS_RX_EFT_C112_EXCP_MAIN,
DRS_RX_EFT_C12_EXCP_MAIN, DRS_RX_EFT_C4_EXCP_MAIN, DRS_RX_EFT_D_EXCP_MAIN and
DRS_RX_EFT_S_EXCP_MAIN required to populate report line details for the NB102 Section 5 output file.

DRS_REP_EFT_RESULTS_NB102_6

This table holds selective data from DRS_REP_EFT_STATE_TOTALS required to populate report line details for the NB102 Section
6 output file

DRS_REP_EFT_RESULTS_NB102_7

This table holds selective data from DRS_REP_EFT_STATE_TOTALS required to populate report line details for the NB102 Section
7 output file

© Copyright Fujitsu Services
Limited 2015

FUJITSU RESTRICTED (COMMERCIAL IN. Ref:

CONFIDENCE)

UNCONTROLLED IF PRINTED OR LOCALLY __ Date:

STORED

DEV/APP/SPG/0028
Version: 5.0

19-Apr-2017

Page No: 95 of 123
Fe)
FUJITSU

FUJ00089582

FUJ00089582

DRS Host Support Guide

FUJITSU RESTRICTED (COMMERCIAL IN

CONFIDENCE)

DRS_REP_EFT_RESULTS_NB102_8

This table holds selective data from a combination of DRS_RX_EFT_MAIN_STORE, DRS_RX_EFT_C112_EXCP_MAIN,
DRS_RX_EFT_C12_EXCP_MAIN, DRS_RX_EFT_C4_EXCP_MAIN, DRS_RX_EFT_D_EXCP_MAIN and
DRS_RX_EFT_S_EXCP_MAIN required to populate report line details for the NB102 Section 8 output file.

DRS_REP_EFT_RESULTS_NB102_9

This table holds selective data from a combination of DRS_RX_EFT_MAIN_STORE, DRS_RX_EFT_C112_EXCP_MAIN,
DRS_RX_EFT_C12_EXCP_MAIN, DRS_RX_EFT_C4_EXCP_MAIN, DRS_RX_EFT_D_EXCP_MAIN and
DRS_RX_EFT_S_EXCP_MAIN to populate report line details for the NB102 Section 9 output file

DRS_REP_EFT_RESULTS_NB103

This table holds selective data from DRS_REP_EFT_CAP_TOTALS required to populate report line details for the NB103 Settled
Transaction / Cash Account Reconciliation Statement output file.

DRS_REP_EFT_STATE_TOTALS

This table holds selective data from

DRS_RX_EFT_MAIN_STORE, DRS_RX_EFT_MAIN_STORE_UPDATES, DRS_RX_EFT_C112_EXCP_MAIN,
DRS_RX_EFT_C12_EXCP_MAIN, DRS_RX_EFT_C4_EXCP_MAIN, DRS_RX_EFT_D_EXCP_MAIN and
DRS_RX_EFT_S_EXCP_MAIN. This set of data is then used fo populate NB102 results fables for sections 1, 6, 7 and 12.

DRS_RX_EFT_C112 HASH Table contains the parsed and domain-validated [C112] records for a DRS processing Day. For duplicate and corrupt records, the
(HORIZON_TRANSACTION I non-key column values are I blank and a corresponding record is created in the table DRS_RX_EFT_C112_EXCP.
_ID), 64 partitions
DRS_RX_EFT_C112_EXCP - C112 Daily exceptions table populated by the DRS C112 load processes.
DRS_RX_EFT_C112_EXCP_MAIN : This table stores C112 exception data for up to 90 days. The table will be partitioned on the same partition key as the Main Store
table, i.e., on the Receipt Date of the transaction.
Data older than 90 days will be archived and then deleted from the table
DRS_RX_EFT_C12 HASH Table contains the parsed and domain-validated [C12] records for a DRS processing Day. For duplicate and corrupt records, the non-
(HORIZON_TRANSACTION I key column values are I blank and a corresponding record is created in the table DRS_RX_EFT_C12_EXCP.
_ID), 64 partitions

DRS_RX_EFT_C12_EXCP

C12 Daily Exceptions table populated by the DRS C12 Parse processes

DRS_RX_EFT_C12_EXCP_MAIN

This table stores C12 exceptions data for up to 90 days. The table will be partitioned on the same partition key as the Main Store
table, i.e., on the Receipt Date of the transaction.

Data older than 90 days will be archived and then deleted from the table.

DRS_RX_EFT_C4

Table contains the parsed and domain-validated [C4] records for a DRS processing Day. For duplicate and corrupt records, the non-
key column values are I blank and a corresponding record is created in the table DRS_RX_EFT_C4_EXCP.

DRS_RX_EFT_C4_EXCP

C4 Daily Exceptions table populated by the DRS C4 Parse processes.

© Copyright Fujitsu Services
Limited 2015

FUJITSU RESTRICTED (COMMERCIAL IN.

CONFIDENCE)

UNCONTROLLED IF PRINTED OR LOCALLY

STORED

Ref. DEV/APP/SPG/0028
Version: 5.0

Date: 19-Apr-2017

Page No: 96 of 123
Fe)
FUJITSU

FUJ00089582

FUJ00089582

DRS Host Support Guide

FUJITSU RESTRICTED (COMMERCIAL IN

CONFIDENCE)

DRS_RX_EFT_C4_EXCP_MAIN

This table stores C4 exception data for up to 90 days. The table will be partitioned on the same partition key as the Main Store table,
ie., on the Receipt Date of the transaction.

Data older than 90 days will be archived and then deleted from the table.

DRS_RX_EFT_D

HASH
(HORIZON_TRANSACTION
_ID), 64 partitions

Table contains the parsed and domain-validated [D] records for a DRS processing Day. For duplicate and corrupt records, the non-
key column values are I blank and a corresponding record is created in the table DRS_RX_EFT_D_EXCP.

DRS_RX_EFT_D_EXCP

D Daily Exceptions table populated by the DRS D Parse processes

DRS_RX_EFT_D_EXCP_MAIN

This table stores [D] exception data for up to 90 days. The table will be partitioned on the same partition key as the Main Store table,
ie., on the Receipt Date of the transaction

Data older than 90 days will be archived and then deleted from the table.

DRS_RX_EFT_MAIN_STORE

RANGE (RECEIPT_DATE)
(upto 91 partitions)

Sub-partitioned on HASH
(HORIZON_TRANSACTION
_ID), 64 sub-partitions

Main DRS table that store all the transaction parts received along with the transaction status

DRS_RX_EFT_MAIN_STORE_UPDAT
ES

Table stores a copy of all the changes done to the Main Store partitions other than the current day's partition.

DRS_RX_EFT_S HASH Table contains the parsed and domain-validated [S] records for a DRS processing Day. For duplicate and corrupt records, the non-
(HORIZON_TRANSACTION I key column values are I blank and a corresponding record is created in the table DRS_RX_EFT_S_EXCP.
_ID), 64 partitions
DRS_RX_EFT_S_EXCP : S Daily Exceptions table populated by the DRS S Parse processes
DRS_RX_EFT_S_EXCP_MAIN - This table stores [S] exception data for up to 90 days. The table will be partitioned on the same partition key as the Main Store table,
ie., on the Receipt Date of the transaction.
Data older than 90 days will be archived and then deleted from the table
FTMS_RX_EFT_C4SD HASH C4/S/D Input Store populated by the DRS File load process using transactions from the C4/S/D data file from the NBS Switch for

(ORS_INSERT_SEQUENCE
_NUMBER), 8 partitions

Network Banking and Solve-PFG/MA for Debit Card.

TMS_RX_EFT_C12

HASH
(ORS_INSERT_SEQUENCE
_NUMBER), 8 partitions

C12 Input Store populated by the Agent instances via database object calls

© Copyright Fujitsu Services
Limited 2015

FUJITSU RESTRICTED (COMMERCIAL IN.

CONFIDENCE)

UNCONTROLLED IF PRINTED OR LOCALLY

STORED

Ref. DEV/APP/SPG/0028
Version: 5.0

Date: 19-Apr-2017

Page No: 97 of 123
DRS Host Support Guide

Pee)
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN

CONFIDENCE)

FUJ00089582
FUJ00089582

[ DRS_TX_EFT_C2

l - I C2 Output tables to store the C2 XML and status of transmission information.

© Copyright Fujitsu Services
Limited 2015

FUJITSU RESTRICTED (COMMERCIAL IN.
CONFIDENCE)

UNCONTROLLED IF PRINTED OR LOCALLY
STORED

Ref.

Version:
Date:

Page No:

DEV/APP/SPG/0028
5.0

19-Apr-2017

98 of 123
Fe)
FUJITSU

DRS Host Support Guide

FUJITSU RESTRICTED (COMMERCIAL IN

CONFIDENCE)

Appendix E — DRS Exceptions

Priority listed against the exceptions in the following table stands for:

A - Business critical error. If ignored, would violate SLA with Post Office. The error should be fixed immediately / workaround be implemented to avoid violating the

SLA deadline.

B - Error condition but of medium priority. May/will cause the DRS schedule to be held up and should be resolved at the earliest on the same/in the next business

day after resolving exceptions of Priority A.
C - Low priority error conditions / warnings / information only messages. These should be looked onto after resolving all exceptions of A and B priorities.

X - Ignore. Exception is no longer in use or exception is not being generated.

Exception Short Description Full Description Action Program Name IPriority

Code

IDRS00000 ILog no exception For application use only. No error logged for this exception Ignore exception x

DRS00001 [Application Exception Exception with no application error code defined. Refer to exception B

details

IDRS00002 [Oracle Exception JOracle exception for which there is no business reason to occur B

IDRS10101 _Iinvalid input System The Input System parameter was not found in table Refer to exception details for parameter name and check contents Idrscommon.pe IB
Parameter IDRS_SYSTEM_PARAMETERS or has NULL value lof DRS_SYSTEM_PARAMETERS table

IDRS10102 [Process entry is No entry for the current process name found in table Refer to exception details for parameter name and check contents Idrscommon.pe IB
missingfinvalid IDRS_PROCESSES when executing function StartControl () lof DRS_SYSTEM_PARAMETERS table

IDRS10103 [Process entry is No entry for the current process name found in table Refer to exception details for parameter name and check contents Idrscommon.pc IB
missing/invalid IDRS_PROCESSES when executing function StopControl () lof DRS_SYSTEM_PARAMETERS table

IDRS10104 Invalid input System ‘The System parameter named "DRS SYSTEM DATE" was not _IRefer to exception details for parameter name and check contents Idrscommon.pc IB
Parameter found in table DRS_SYSTEM_PARAMETERS. lof DRS_SYSTEM_PARAMETERS table

IDRS10105 Missing Data-Centr-Char _I Environment variable DATA_CENTRE_CHAR is not set Check the .vars file in the home directory of the UNIX user used to Idrscommon.pe IB.

lexecute the process
IDRS10106 _ Iinvalid Env Variable TZ Environment variable TZ (Time Zone) is not set in the required I Check/rectify the contents of environment variable TZ ldrscommon.pe IB

format

© Copyright Fujitsu Services
Limited 2015

FUJITSU RESTRICTED (COMMERCIAL IN.

Gf
CONFIDENCE) Re
Version:
UNCONTROLLED IF PRINTED OR LOCALLY __ Date:

STORED Page No:

DEV/APP/SPG/0028

5.0

19-Apr-2017
99 of 123

FUJ00089582
FUJ00089582

Fe)
FUJITSU

DRS Host Support Guide

FUJITSU RESTRICTED (COMMERCIAL IN

FUJ00089582
FUJ00089582

CONFIDENCE)
IDRS10107 _ invalid Application Type Invalid value of Application Type input parameter in function call__ICheck that the command-line parameters being passed to the ldrscommon.pe
parameter lwith the given Parameter Name, Instance Number and Partition _Icalling module are being correctly processed and that the first one
is being assigned to the Application Type global
IDRS10108 _ invalid Application Type Invalid value of Application Type input parameter in function call __ ICheck that the command-line parameters being passed to the ldrscommon.pe
parameter lwith the given Parameter Name, Instance Number and Partition _Icalling module are being correctly processed and that the first one
is being assigned to the Application Type global
IDRS10109 invalid Application Type Invalid value of Application Type input parameter in function call _ ICheck that the command-line parameters being passed to the ldrscommon.pe
parameter lwith the given Parameter Name, Instance Number and Partition _Icalling module are being correctly processed and that the first one
is being assigned to the Application Type global
IDRS10110 _ Iinvalid Application Type IApplication Type global variable has invalid value Check that the command-line parameters being passed to the ldrscommon.pe
parameter calling module are being correctly processed and that the first one
is being assigned to the Application Type global
IDRS10201 _Iinvalid Application Type Invalid value of Application Type input parameter received in [Check if the application module is passing correct parameters to. Ipkg_drs_commo
parameter function call with given values of Parameter Name and Instance __Ithe function n_body.sql
Number
IDRS10202 Invalid input System ‘The Input System parameter was not found in table Refer to exception details for parameter name and check contents Ipkg_drs_commo
Parameter IDRS_SYSTEM_PARAMETERS or has NULL value lof DRS_SYSTEM_PARAMETERS table In_body.sql
DRS10203 _ invalid Application Type Invalid value of Application Type input parameter received in ICheck if the application module is passing correct parameters to. I[pkg_drs_commo
parameter function call with given values of Process Name and Input Partition Ithe function n_body.sql
IDRS10204 [Process entry is No entry for the current process name found in table Refer to exception details for Process Name and check contents of Ipkg_drs_commo
missing/invalid IDRS_PROCESSES for given value of Process Name DRS_SYSTEM_PARAMETERS table n_body.sql
IDRS10205 _IInvalid Application Type Invalid value of Application Type input parameter received in Check if the application module is passing correct parameters to Ipkg_drs_commo
parameter function call with given values of Process Name and Input Partition Ithe function n_body.sql
IDRS10206 [Process entry is No entry for the current process name found in table Refer to exception details for Process Name and check contents of Ipkg_drs_commo
missingfinvalid IDRS_PROCESSES for given value of Process Name DRS_SYSTEM_PARAMETERS table n_body.sql
IDRS10207 _Iinvalid input System The System parameter named "DRS SYSTEM DATE" was not _IRefer to exception details for parameter name and check contents [pkg_drs_commo
Parameter found in table DRS_SYSTEM_PARAMETERS. lof DRS_SYSTEM_PARAMETERS table n_body.sql
DRS30101 incorrect Command-line Incorrect number of command-line input parameters have been _ICheck the TWS scripts to see if the call being made to the module IDRSC301.pe

parameters

supplied to the module DRSC301

is of the form: DRSC301 <Application Type> <instance Number>
<Total Instances>

© Copyright Fujitsu Services
Limited 2015

FUJITSU RESTRICTED (COMMERCIAL IN.
CONFIDENCE) Ref. DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED PageNo: 100 of 123
Fe)
FUJITSU

DRS Host Support Guide

FUJITSU RESTRICTED (COMMERCIAL IN

FUJ00089582
FUJ00089582

CONFIDENCE)
IDRS30102 I Missing/invalid Command-line IMissing/Incorrect command-line input parameters have been Check the TWS scripts to see if the call being made to the module I[DRSC301.pe
parameters supplied to the module DRSC301 is of the form: DRSC301 <Application Type> <instance Number>
<Total Instances>
IDRS30103 Missing System parameter _INo entry for parameter ‘HORIZON C12 INPUT ALERT TIMEOUT’ ICheck the contents of table DRS_SYSTEM_PARAMETERS to IDRSC301.pc
found in table DRS_SYSTEM_PARAMETERS. [see if a record corresponding to the given parameter is present
IDRS30104 Invalid Alert occurred Unknown Alert with the given name has occurred while waiting for _ICheck if the database trigger on table DRS_RX_C12is raising IDRSC301.pe
alerts with names Process-Alert-1..8 and End-of-day-Alert to occur Icorrect alerts. Also check if the DRS End-of-Day processing is
raising correct alerts
IDRS30105 I Unparsable Exceptions The given number of exceptions related to input XML data which is ICheck the contents of the C12 input exceptions table to manually IDRSC301.pe
locourred lunparsable has occurred idecipherireconcile data
IDRS30106_IXML Parser Error XML Parser initialisation has failed with given error [Check if sufficient amount of memory is available for the process. I[DRSC301.pe
[Also check if the Oracle XML parser for C has been correctly
installed
IDRS30107 [C12 Dally table Sequence __ I The count of number of occurences of Horizon-Txn-Id and Receipt-ICheck for the reason of the duplicates in the table. Possible causes IDRSC301.pc
Error Date (3rd part of the primary key) has exceeded acceptable limit are that the [C12] input interface is not working correctly or program
lerrors with DRSC301 and/or the confirmation agent processes
IDRS30108 Unknown Error during inserts IA non-data related Oracle error has occurred during inserts into. _ICheck oracle error message for further information IDRSC301.pe
ltable DRS_RX_C12
IDRS30109 Unknown Error during inserts IA non-data related Oracle error has occurred during inserts into _ICheck oracle error message for further information IDRSC301.pe
tables DRS_RX_C12 or DRS_RX_C12_EXCP.
IDRS30110 Unknown Error during inserts IA non-data related Oracle error has occurred during inserts into _ICheck oracle error message for further information IDRSC301.pe
ltable DRS_RX_C12_EXCP
IDRS30111 Missing System parameter _INo entry for parameter ‘DRS PROCESSING DAY COMPLETE’ —_ICheck the contents of table DRS_SYSTEM_PARAMETERS to IDRSC301.pc
found in table DRS_SYSTEM_PARAMETERS. [see if a record corresponding to the given parameter is present
IDRS30112 [Missing DRS System No entry for parameter ‘C12 RAISE REPEATED KEY [Check the contents of table DRS_SYSTEM_PARAMETERS to IDRSC301.pe
Parameter EXCEPTION’ found in table DRS_SYSTEM_PARAMETERS for _Isee if a record corresponding to the given parameter is present
Jgiven value of Application Type
IDRS30113 Program Error No record matching the given Input Sequence Number was found IContact support with error details. IDRSC301.pe
in the input buffer
IDRS30114 Duplicate [C12] records foundI Detected one or more [C12] messages as duplicate based on their Iindicates possible Confirmation Agent restart after failure. Contact. IDRSC301.pc

Horizon-Transaction-Id and Receipt-Date/Time

Isupport with error details

© Copyright Fujitsu Services
Limited 2015

FUJITSU RESTRICTED (COMMERCIAL IN.

CONFIDENCE) Ref. DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED PageNo: 101 of 123
Fe)
FUJITSU

DRS Host Support Guide

FUJITSU RESTRICTED (COMMERCIAL IN

FUJ00089582
FUJ00089582

CONFIDENCE)
IDRS30115 _Iincorrect C2 XML tag ‘The XML tag indicating the beginning of the given [C2] XML was _I Verify the integrity of the [C2] XML record. If a tag is corrupt, check IDRSC301.pe
not found in the [C12] record corresponding to the current input _ if the confirmation Agent is functioning correctly
Sequence Number
IDRS30116 incorrect C2 XML tag ‘The XML tag indicating the end of the given [C2] XML was not _I Verify the integrity of the [C2] XML record. If a tag is corrupt, check IDRSC301.pe
found in the [C12] record corresponding to the current Input if the confirmation Agent is functioning correctly
Sequence Number
IDRS30117 incorrect C2 Message Type IThe value of XML tag that identifies the Message Type does not _I Verify the integrity of the [C2] XML record. if a tag is corrupt, check IDRSC301.pc
match the given expected value for record with current input if the confirmation Agent is functioning correctly
Sequence Number
IDRS30118 invalid System Parameter _INo entry for parameter ‘INVALID PK OPERATIONAL EXCEPTIONICheck the contents of table DRS_SYSTEM_PARAMETERS to IDRSC301.po
LIMIT" found in table DRS_SYSTEM_PARAMETERS see if a record corresponding to the given parameter is present
IDRS30119 Undefined Key Value Error IUnable to determine the cause of Key Value error. Probable cause IContact support with error details. IDRSC301.pc
is a bug in DRSC301
IDRS30120 No matching record found in INo record matching the given Input Sequence Number found in the IProbable cause is a bug in DRSC301. Contact Support with more IDRSC301.pc
Input input butter details.
IDRS30130 I Null/Corrupt Horizon ‘The [C12] transaction part corresponding to the given Insert [Check the XML message attached to the Operational Exception _ IDRSC301.pe
Transaction Id Sequence Number has NULL/Corrupt value of Horizon Transaction Iand contact MSU for further action
id
IDRS30131 I Null/Corrupt Receipt Date —_ I The [C12] transaction part corresponding to the given Insert ICheck the XML message attached to the Operational Exception _ IDRSC301.pe
Sequence Number has NULLCorrupt value of Receipt Date/Time and contact MSU for further action
IDRS30132 Receipt Date out of bounds _ I The [C12] transaction part corresponding to the given Insert [Check the XML message attached to the Operational Exception _ IDRSC301.pe
Sequence Number has Receipt Date/Time outside the allowed date Iand contact MSU for further action.
range values
IDRS30133 Exception Threshold ‘The Exception threshold <INVALID PK OPERATIONAL [An unnaturally high number of records with corrupt Primary Key IDRSC301.pe
Exceeded EXCEPTION LIMIT> for reporting on corrupt key transactions as_Ivalues indicate that system as a whole is not functioning normally.
lexceptions has exceeded Check various system hardware/software components for failure
Jand contact support
IDRS30134 Unable to PREPARE Insert IUnable to Prepare Insert statement for table [2s] ICheck oracle error message for further information IDRSC301.pc
SQL
IDRS30135 Database function Database function FN_START_NEW_BATCH call returned [%d], ICheck the Operational exception table for [%s] IDRSC301.pc

unsuccessful

Check exceptions for [%s]

© Copyright Fujitsu Services
Limited 2015

FUJITSU RESTRICTED (COMMERCIAL IN.

CONFIDENCE) Ref. DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED PageNo: 102 of 123
Fe)
FUJITSU

DRS Host Support Guide

FUJITSU RESTRICTED (COMMERCIAL IN

FUJ00089582
FUJ00089582

CONFIDENCE)
IDRS30136 Database function Database function FN_START_NEW_BATCH returned SQL code ICheck oracle error message for further information IDRSC301.po
unsuccessful [%a]
IDRS30137 Database function Database function FN_START_NEW_BATCH returned invalid I Check the Operational exception table for all DRSC301 Services. IDRSC301.pe
unsuccessful Partition Keys [Partition Logical date=>%sI[Subpartition
id=>%d[Logical Subpartition id=>%d]
IDRS30138 Database function Database function FN_CONFIRM_PRIOR_TO_BATCH call Check the Operational exception table for [%s] IDRSC301.pe
unsuccessful returned [%d], Check exceptions for [%s]
IDRS30139 Database function Database function FN_CONFIRM_PRIOR_TO_BATCH returned ICheck oracle error message for further information IDRSC301.pe
unsuccessful SQL code [%d]
IDRS30140 Unable to insert record Error occurred whilst Inserting into DRS_TX_NWB_C2_EXCP _ICheck oracle error message for further information IDRSC301.po
able
IDRS30141 I No routing gateways to INo routing gateways found in table Check the static data scripts been loaded correctly. IDRSC301.pe
monitor. IDRS_TMON_ROUTING_GATEWAYS to monitor
IDRS30142 invalid System Parameter __Iinvalid value [%d] found in DRS_SYSTEM_PARAMETERS for _ICheck the System parameter specified in [%s] has a valid value IDRSC301.pc
value parameter [%s] set.
IDRS30143 NULL value in System INULL value found in DRS_SYSTEM_PARAMETERS for [Check the System parameter specified in [%s] has aNon-NULL _ IDRSC301.pe
Parameter parameter [%s] value set.
IDRS30144 [Unable to access table Error occurred whilst accessing table [Check oracle error message for further information IDRSC301.pe
IDRS_TMON_ROUTING_GATEWAYS table
IDRS30145 [Unable to (Re)open cursor Error occurred whilst (Re)opening cursor dtrg_cur [Check oracle error message for further information IDRSC301.pc
IDRS30146 Unable to fetch from table —_IError whilst fetching from DRS_TMON_ROUTING_GATEWAYS Check oracle error message for further information IDRSC301.pc
able
IDRS30147 [Number of routing gateways IMore than [%d] routing gateways have been found in This message is intended as an informational message only. No IDRSC301.pe
lexceeded IDRS_TMON_ROUTING_GATEWAYS table, only [%d] willbe _Ineed to take any preventive actions. If the limit needs increasing the
monitored, rest will be ignored. module have to be changed,
IDRS30148 System parameter not found _INo record found in table DRS_SYSTEM_PARAMETERS for the _ICheck the System parameter specified in [%s] exists in the table. _IDRSC301.pc
parameter [%s]
IDRS30149 Unable to access System —_IError whilst accessing table DRS_SYSTEM_PARAMETERS ICheck oracle error message for further information IDRSC301.pc

parameters table

© Copyright Fujitsu Services
Limited 2015

FUJITSU RESTRICTED (COMMERCIAL IN.

CONFIDENCE) Ref. DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED PageNo: 103 of 123
Fe)
FUJITSU

DRS Host Support Guide

FUJITSU RESTRICTED (COMMERCIAL IN

FUJ00089582
FUJ00089582

CONFIDENCE)

IDRS30150 Unable to PREPARE Error whilst Preparing Dynamic SQL [%s] Check the SQL specified in [%s] for any Syntax errors, if not, checkIDRSC301.po
Dynamic SQL the oracle error message for further information.

IDRS30151 Error deriving time period —_I Error whilst deriving Time period intervals Check oracle error message for further information IDRSC301.pe
intervals

IDRS30152 Error fetching time period _IError whilst fetching the time period intervals [Check oracle error message for further information IDRSC301.pe
intervals

IDRS30153 IErrorderiving Int. no. for _I Error whilst deriving the Interval number for Receipt time [%s], _I This message is intended as an informational message only. This _ I[DRSC301.pc
Receipt time record ignored for monitoring is due to an invalid Receipt time. No need to take any action, this

transaction will be captured by C12 exception

IDRS30154 Unable to PREPARE Error whilst preparing UPDATE Dynamic SQL [%s] [Check the SQL specified in [%s] for any Syntax errors, if not, check IDRSC301.pe
UPDATE Dynamic SQL the oracle error message for further information.

IDRS30155 Unable to PREPARE Error whilst preparing INSERT Dynamic SQL [%s] Check the SQL specified in [%s] for any Syntax errors, if not, checkIDRSC301.pe
INSERT Dynamic SQL the oracle error message for further information.

IDRS30156 Error inserting into Error whilst insering into DRS_C12_MONITOR table [Check oracle error message for further information IDRSC301.pe
DRS_C12_MONITOR

IDRS30157 Error updating Error whilst updating DRS_C12_MONITOR table. [Check oracle error message for further information IDRSC301.pc
DRS_C12_MONITOR

IDRS30158 Error fetching START NEW IError whilst fetching START NEW BATCH RETRIES from [Check oracle error message for further information IDRSC301.pe
BATCH RETRIES ldrs_system_parameters.

IDRS30159 Error fetching START NEW  IError whilst fetching START NEW BATCH SLEEP from [Check oracle error message for further information IDRSC301.pc
BATCH SLEEP ldrs_system_parameters.

IDRS30160 Error releasing old partitions Error whilst releasing old partitions [Check oracle error message for further information IDRSC301.pe

pkg_drs_batch_mgt.fn_release_all_mine
IDRS30161 Error releasing old partitions Error whilst releasing old partitions [Check oracle error message for further information IDRSC301.pe
pkg_drs_batch_mgt.fn_release_all_mine
DRS30201 I incorrect Command-line Incorrect number of command-line input parameters have been _I Check the TWS scripts to see if the call being made to the module IDRSC302.pe

parameters

supplied to the module DRSC302

is of the form: DRSC302 <Application Type> <instance Number>

<Total Instances>

© Copyright Fujitsu Services
Limited 2015

UNCONTROLLED IF PRINTED OR LOCALLY

FUJITSU RESTRICTED (COMMERCIAL IN. Ref:

CONFIDENCE)
Version:

Date:

STORED Page No:

DEV/APP/SPG/0028

19-Apr-2017
104 of 123
Fe)
FUJITSU

DRS Host Support Guide

FUJ00089582
FUJ00089582

FUJITSU RESTRICTED (COMMERCIAL IN
CONFIDENCE)
IDRS30202 _I Missing/invalid Command-line IMissing/Incorrect command-line input parameters have been ICheck the TWS scripts to see if the call being made to the module I[DRSC302.pe
parameters supplied to the module DRSC302 is of the form: DRSC302 <Application Type> <instance Number>
<Total Instances>
IDRS30203 Missing System parameter _INo entry for parameter ‘C4SD PAUSE WAIT LIMIT" found in table _ICheck the contents of table DRS_SYSTEM_PARAMETERS to IDRSC302.po
IDRS_SYSTEM_PARAMETERS [see if a record corresponding to the given parameter is present
IDRS30204 Missing System parameter _INo entry for parameter ‘C4SD FILE LOAD COMPLETE’ found in ICheck the contents of table DRS_SYSTEM_PARAMETERS to IDRSC302.po
ltable DRS_SYSTEM_PARAMETERS see if a record corresponding to the given parameter is present
IDRS30205 I Unparsable Exceptions The given number of exceptions related to input XML data which is ICheck the contents of the C4SD input exceptions table to manually IDRSC302.pe
loccurred lunparsable has occurred idecipher/reconcile data
IDRS30206 XML Parser Error XML Parser initialisation has failed with given error [Check if sufficient amount of memory is available for the process. IDRSC302.pe
[Also check if the Oracle XML parser for C has been correctly
installed
IDRS30207 Unknown Error during inserts IA non-data related Oracle error has occurred during bulk inserts _ICheck oracle error message for further information IDRSC302.po
into table DRS_RX_C4
IDRS30208 Unknown Error during inserts IA non-data related Oracle error has occurred during bulk inserts _ICheck oracle error message for further information IDRSC302.po
into table DRS_RX_D
IDRS30209 Unknown Error during inserts IA non-data related Oracle error has occurred during bulk inserts ICheck oracle error message for further information IDRSC302.po
into table DRS_RX_S
IDRS30210 invalid input Message Type _Iinvalid value of Message Type passed to the function that handles_ICheck contents of the FTMS_RX_C4SD input table to see if one or IDRSC302.pc
Data related exceptions more XML messages are of invalid message type
IDRS30211 Sequence reached Max Value [The Horizon Transaction Id - Receipt Date Sequence has reached IConfirm correct execution of the C4SD Loader process. Check for I[DRSC302.pc
its maximum allowed value valid data in the FTMS_RX_C4SD table
IDRS30212 [Unknown Error during inserts IA non-data related Oracle error has occurred during inserts into _ICheck oracle error message for further information IDRSC302.pc
ltables DRS_RX_C4 or DRS_RX_C4_EXCP
DRS30213 _ISequence reached Max Value IThe Horizon Transaction Id - Receipt Date Sequence has reached IConfirm correct execution of the C4SD Loader process. Check for /DRSC302.po
its maximum allowed value Valid data in the FTMS_RX_C4SD table
IDRS30214 Unknown Error during inserts IA non-data related Oracle error has occurred during inserts into. _ICheck oracle error message for further information IDRSC302.po
ltables DRS_RX_D or DRS_RX_D_EXCP.
IDRS30215 Sequence reached Max Value IThe Horizon Transaction Id - Receipt Date Sequence has reached IConfirm correct execution of the C4SD Loader process. Check for I[DRSC302.po

its maximum allowed value

valid data in the FTMS_RX_C4SD table

© Copyright Fujitsu Services
Limited 2015

FUJITSU RESTRICTED (COMMERCIAL IN.

CONFIDENCE) Ref. DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED PageNo: 105 of 123
Fe)
FUJITSU

DRS Host Support Guide

FUJITSU RESTRICTED (COMMERCIAL IN

FUJ00089582
FUJ00089582

CONFIDENCE)
IDRS30216 Unknown Error during inserts IA non-data related Oracle error has occurred during inserts into _ICheck oracle error message for further information IDRSC302.pc IB
lables DRS_RX_C4 or DRS_RX_C4_EXCP
IDRS30217 [Unknown Error during inserts IA non-data related Oracle error has occurred during inserts into _ICheck oracle error message for further information IDRSC302.pc IB
ltable DRS_RX_C4_EXCP.
IDRS30218 Unknown Error during inserts IA non-data related Oracle error has occurred during inserts into _ICheck oracle error message for further information IDRSC302.pc IB
ltable DRS_RX_D_EXCP
IDRS30219 [Unknown Error during inserts IA non-data related Oracle error has occurred during inserts into _ICheck oracle error message for further information IDRSC302.pc IB
ltable DRS_RX_S_EXCP
IDRS30220 invalid input Message Type _Iinvalid value of Message Type returned by the function that parses ICheck contents of the FTMS_RX_C4SD input table to see if one or [DRSC302.po IB
Ithe C4SD XML input more XML messages are of invalid message type
IDRS30401 _Iinvalid input Application Type IThe input Application Type parameter value is invalid [Check if the C12 Confirmation Agent is passing correct value of — Ipkg_c12_agent_ IB
input Application Type ldata_body.sal
IDRS30402 _ Invalid input Application Type IThe input Application Type parameter value is invalid [Check if the C12 Confirmation Agent is passing correct value of — Ipkg_c12_agent_ IB
input Application Type ldata_body.sql
IDRS30403 Severe Oracle Error detected ISevere Oracle Error detected in PKG_C12_AGENT_DATA. One or more errors have occurred in earlier calls to the interface or Ipkg_c12_agent_ IB
initialisation has failed with one/more errors during initialisation which prevent the processing from proceeding Idata_body.sql
[successfully
JDRS30501 incorrect Command-line Incorrect number of command-line input parameters have been _ICheck the TWS scripts to see if the call being made to the module IDRSC305.pc IB
parameters supplied to the module DRSC305 is of the form: DRSC305 <Application Type> <input C4SD
Filename incl Path>
IDRS30502 I Missing/invalid Command-line IMissing/Incorrect command-line input parameters have been [Check the TWS scripts to see if the call being made to the module IDRSC305.pe IB
parameters supplied to the module DRSC305 is of the form: DRSC305 <Application Type> <input C4SD
Filename incl Path>
IDRS30503 Environment Variable is ‘The environment variable <ApplicationType>_NBE_INPUT which ICheck whether the Rig has the correct DRS build. Also check the IDRSC305.pc IB
invalid points to the location of the C4/S/D input files is not set or has vars file for correct value of environment variable
invalid value <ApplicationT ype>_NBE_INPUT and confirm if the .vars file is
being executed for the Unix user
IDRS30504 Error during File-open Error occurred while opening the input file segment with given nameICheck for the existence of the file with correct filename and path. IDRSC305.pc IB

(inc! Path)

[Also check for correct read privileges on the file

© Copyright Fujitsu Services
Limited 2015

FUJITSU RESTRICTED (COMMERCIAL IN.

CONFIDENCE) Ref. DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED PageNo: 106 of 123
Fe)
FUJITSU

DRS Host Support Guide

FUJITSU RESTRICTED (COMMERCIAL IN

FUJ00089582
FUJ00089582

CONFIDENCE)
IDRS30505 Error during Fite close Error occurred while closing the currently open file segment Check if the file has been modified while it was being read from by IDRSC305.po
DRSC305. Also check if the privileges on the file have been altered
in any way
DRS30506 _Iincorrect File Header Record IA header record, which wasn't the first record of the file, was [Check if the input File contents are valid IDRSC305.pc
ldetected in the Input C4/S/D file
IDRS30507 incorrect File Trailer Record File trailer record, which wasn't the last record of the file, was Check if the input File contents are valid IDRSC305.po
Jdetected in the input C4/S/D file
IDRS30508 [Trailer Record count ‘The record count in the C4/S/D File Segment Trailer does not Check if the input File contents are valid IDRSC305.pe
mismatch match with the count of records processed
IDRS30509 Invalid File Segment Header invalid value of File Segment Header Record-type found in the inputICheck if the input File contents are valid IDRSC305.po
File Segment
IDRS30510 _ Iinvalid File Segment Header I The File Segment Header Record does not have the expected Check if the input File contents are valid IDRSC305.pe
number of elements
IDRS30511 invalid File Segment Trailer _ invalid value of File Segment Trailer Record-type found in the input ICheck if the input File contents are valid IDRSC305.pc
File Segment
IDRS30512 invalid File Segment Trailer IThe File Segment Trailer Record does not have the expected [Check if the input File contents are valid IDRSC305.pe
number of elements
DRS30513 input File Segment being _I The Input File Segment is being reprocessed [Check if the TWS scripts are re-processing the file or if the Control IDRSC305.pe
reprocessed land/or Data Files are being re-transmitted by NBE
IDRS30514 I Program/Rig Error Function StartControl () returned a value of 0 when a file entry couldI Contact technical support for more information IDRSC305.pc
lbe made in the C4SD File Register
DRS30515 I Proram/Rig Error No record found in the C4SD File Register for given input File Most likely cause is that the entry for DRSC30S in IDRSC305.pe
[Segment and Application Type DRS_PROCESSES does not have the Multiple-Runs-in-single-day
fiag set. Contact technical support for more information
IDRS30516 input File Segment being _I The Input File Segment is being reprocessed [Check if the TWS scripts are re-processing the file or if the Control IDRSC305.pe
reprocessed land/or Data Files are being re-transmitted by NBE
IDRS30517 I Proram/Rig Error Function StartControl () returned a value of 0 when a file entry couldIMost likely cause is that the entry for DRSC305 in IDRSC305,pc

be made in the C4SD File Register

DRS_PROCESSES does not have the Multiple-Runs-in-single-day
{fiag set. Contact technical support for more information

© Copyright Fujitsu Services
Limited 2015

FUJITSU RESTRICTED (COMMERCIAL IN.

CONFIDENCE) Ref. DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED PageNo: 107 of 123
Fe)
FUJITSU

DRS Host Support Guide

FUJITSU RESTRICTED (COMMERCIAL IN

FUJ00089582
FUJ00089582

CONFIDENCE)
IDRS30518 [Unable to rename File Cannot file a '' separator in the input File Segment Name hence _IRefer to the error message for more details before deciding on IDRSC305.pc — Ic
Segment cannot rename the file to change its extension faction
IDRS30519 [Unable to rename File The File rename operation to change theFile Segment extension _IRefer to the error message for more details before deciding on IDRSC305.p¢ —Ic
Segment has failed with error laction. Probable causes would be user privileges on the File or
[special characters in the File name
IDRS30520 _Iinvalid File Record The first record of the C4/S/D File Segment is not a header record ICheck if the input File contents are valid IDRSC305.p¢— ID
IDRS30521 No File Trailer Record No File Segment Trailer record found as the last record of the input ICheck if the input File contents are valid IDRSC305.pc — ID
CAISID file
DRS30601 incorrect Command-line Incorrect number of command-line input parameters have been _ICheck the TWS scripts to see if the call being made to the module IDRSC306.pe IB
parameters supplied to the module DRSC306 is of the form: DRSC306 <Application Type>
IDRS30602 _IInvalid/Null Parameter Value _Iinvalid/Null value fetched for system parameter ‘C4SD FILE LOAD ICheck contents of table DRS_SYSTEM_PARAMETERS for a validIDRSC306.pc IB
COMPLETE" [character value for ‘C4SD FILE LOAD COMPLETE’
IDRS30701 _Iincorrect no of Command-line IIncorrect number of command-line parameters [Check the TWS scripts to see if the call being made to the module IDRSC307.pc IB
parameters is of the form: DRSC307 <Application Type>
<TWSSequenceNumber>
IDRS30702 _ Iinvalid Command line Invalid command-line parameter [Check the TWS scripts to see if the call being made to the module IDRSC307.pe IB
parameter is of the form: DRSC307 <Application Type>
<TWSSequenceNumber>
IDRS30703 Environment variable is not IEnvironment variable is not set Set the Environment variable with correct value. IDRSC307.pc IB
set
IDRS30704 [Failed to access directory _IFailed to access directory set by EFT_C2_OUTPUT IChange the access permissions for the directory IDRSC307.pc IB
IDRS30705 _IDRS SYSTEM DATE not set [DRS SYSTEM DATE not set in DRS_SYSTEM_PARAMETERS ICheck table DRS_SYSTEM_PARAMETERS for DRS SYSTEM IDRSC307.p¢ IB
able DATE
IDRS30706 [Fite already exists JOutput File TRN already exists IDRSC307.pc (IB
IDRS30707 [Failed to open File Failed to open .LCK File Refer to the Exception Error message for further details IDRSC307.pc IB
IDRS30708 _ [Failed to write Header Failed to write Header record to .LCK File Refer to the Exception Error message for further details IDRSC307.pc IB
IDRS30709 [Update of C2 XML records —_IUpdate of Host Array for C2 XML records failed [Check oracle error message for further information IDRSC307.pc IB

failed

© Copyright Fujitsu Services
Limited 2015

FUJITSU RESTRICTED (COMMERCIAL IN.

CONFIDENCE) Ref. DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED PageNo: 108 of 123
Fe)
FUJITSU

DRS Host Support Guide

FUJITSU RESTRICTED (COMMERCIAL IN

FUJ00089582
FUJ00089582

CONFIDENCE)
IDRS30710 I Failed to write Body record Failed to write Body record to .LCK File Refer to the Exception Error message for further details IDRSC307.pe 1B
IDRS30711 I Failed to write Trailer Failed to write Trailer record to .LCK File Refer to the Exception Error message for further details IDRSC307.pe 1B
IDRS30712 I Failed to close File Failed to close .LCK File Refer to the Exception Error message for further details IDRSC307.pe 1B
IDRS30713 I Failed to rename file Failed to rename .LCK file to .TRN file Refer to the Exception Error message for further details IDRSC307.pce 1B
IDRS30801 [Incorrect no of Command-line IIncorrect number of command-line parameters ‘Check the TWS scripts to see if the call being made to the module IDRSC308.pc 1B
parameters is of the form: DRSC307 <Application Type>
<TWSSequenceNumber>
IDRS30802 [Invalid Command line Invalid command-line parameter ICheck the TWS scripts to see if the call being made to the module IDRSC308.pc iB
parameter is of the form: DRSC307 <Application Type>
<TWSSequenceNumber>
IDRS30803 Environment variable is not I Environment variable is not set ‘Set the Environment variable with correct value. IDRSC308.pce 1B
set
IDRS30804 Failed to access directory _I Failed to access directory set by EFT_C2_INPUT Change the access permissions for the directory IDRSC308,pc IB
IDRS30805 IDRS SYSTEM DATE not set IDRS SYSTEM DATE not set in DRS_SYSTEM_PARAMETERS ICheck table DRS_SYSTEM_PARAMETERS for DRS SYSTEM IDRSC308.pc iB
Jtable DATE
IDRS30806 [Invalid File Name Invalid File Name <inputFileName> IDRSC308.pe 1B
IDRS30807 I Failed to open File Failed to open <InputFileName> File Refer to the Exception Error message for further details IDRSC308.pe 1B
IDRS30808 __IFile already processed File <InputFileName> already processed Refer to the Exception Error message for further details IDRSC308.pc «IB
IDRS30809 _ Invalid Header Record Invalid Header Record in Input File Refer to the Exception Error message for further details IDRSC308.pc 1B
IDRS30810 I Header record missing IHeader record missing in Input File Refer to the Exception Error message for further details IDRSC308.pe 1B
IDRS30811 [Invalid Body Record Invalid Body Record in Input File Refer to the Exception Error message for further details IDRSC308.pc iB
IDRS30812 Error Threshold Reached Number of Invalid Body Record Count has increased the error Refer to the Exception Error message for further details IDRSC308.pce 1B
Ithreshold
IDRS30813 [Invalid Body Record Invalid Body Record in Input File for Insert Sequence Number Refer to the Exception Error message for further details IDRSC308.pc iB
<insSeqNo>
IDRS30814 I Body Record missing Body Record Missing in Input file Refer to the Exception Error message for further details IDRSC308.pce 1B
IDRS30815__IFailed to update records Failed to update C2 XML records Refer to the Exception Error message for further details IDRSC308.pc iB
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN. Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) i
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED PageNo: 109 of 123
Fe)
FUJITSU

DRS Host Support Guide

FUJITSU RESTRICTED (COMMERCIAL IN

FUJ00089582
FUJ00089582

CONFIDENCE)
IDRS30816 [Trailer record missing Invalid Trailer Record in Input File / Trailer Record missing in Input IRefer to the Exception Error message for further details, IDRSC308.po
File
IDRS30817 _Iinvalid Trailer Record Invalid Trailer Record in Input File / Trailer Record missing in Input IRefer to the Exception Error message for further details, IDRSC308.pc
File
IDRS30818 [Failed to rename file Failed to rename .LCK file to .TRN file Refer to the Exception Error message for further details IDRSC308.pc
IDRS30819 Unable to access Unable to access database table DRS_TX_C2 [Check the database to see proper permissions have been given to. I[DRSC308.pe
DRS_TX_c2 the users.
IDRS30820 Unable to fetch from [Unable to do a fetch from database table DRS_TX_C2 Check the database to see proper permissions have been given to I[DRSC308.po
DRS_TX_c2 the users.
IDRS30821 incomplete transactions exist IOne or more transactions with PROCESS_STATUS = "T" found in IContact support with error details IDRSC308.pc
IDRS_TX_C2 table
IDRS31001 incorrect Command-line Incorrect number of command-line input parameters have been —_I Usage: DRSC310 <Run Type> <Application Type> <instance  IDRSC310.pe
parameters supplied to the module DRSC310 Number> <Total Instances>
DRS31002 _Iincorrect Command-line Incorrect value/number of the RunType command-line parameter _IInvalid Run Type passed on the command-line. Only ‘DAY’ or IDRSC310.pe
parameters has been supplied to the module DRSC310 NIGHT is allowed.
DRS31003 _Iincorrect Command-line Missing or invalid command-line parameters have been supplied to IUsage: DRSC310 <Run Type> <Application Type> <instance  IDRSC310.pc
parameters Ithe module DRSC310 Number> <Total Instances>
IDRS31005 [State lookup buffer overflow _IFatal Error. More than 256 elements required in State Lookup Increase the state lookup buffer size in the program. Contact 4th [DRSC310.pc
Buffer. The buffer could not be populated successfully. line support.
IDRS31006 I Match not found in DRS No match found in State Lookup Buffer for the Current State and _ICheck the contents of DRS Transaction States table. Contact —_ IDRSC310.pe
States table ‘Transaction Part Arrived. Isupport with error details.
IDRS31007 [No room to store the next _IAlll state columns for the transaction have been occupied, Could notICheck the contents of the transaction present in the Main Store _ IDRSC310.pc
trans state store the next state of the transaction into Main Store table. table. Contact support with error details
DRS31008 _Istate rules lookup buffer _IFatal Error. More than 128 elements required in State Rules Lookup] increase the state rules lookup buffer size in the program. Contact IDRSC310.pe
loverfiow Buffer. The buffer could not be populated successfully. [support with error details.
IDRS31009 I Missing state validation rule id IRule Id was not found in DRS_STATE_VALIDATION_RULES —_ICheck the contents of DRS_STATE_VALIDATION_RULES table. [DRSC310.po
lable IContact support with error details.
IDRS31010 Main Store buffer overflow —_ICan not initialise a new transaction record in Main Store Buffer. IContact support with error details. IDRSC310.pe

Maximum count has been reached.

© Copyright Fujitsu Services
Limited 2015

FUJITSU RESTRICTED (COMMERCIAL IN.

CONFIDENCE) Ref. DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED PageNo: 110 of 123
Fe)
FUJITSU

DRS Host Support Guide

FUJITSU RESTRICTED (COMMERCIAL IN

FUJ00089582
FUJ00089582

CONFIDENCE)
IDRS31011 Duplicate C12 transaction _I Duplicate flag has been found set by the daily input processing —_ICheck the contents of the DRS Main Store and C12 Daily input IDRSC310.po IB
part not found lwhere there is no existing transaction part for the matching Primary Itables. Contact support with error details.
Key present in the Main Store table
IDRS31012 Duplicate C4 transaction part IDuplicate flag has been found set by the daily input processing —_ICheck the contents of the DRS Main Store and C4 Daily Input [DRSC310.pc IB
not found lwhere there is no existing transaction part for the matching Primary Itables. Contact support with error details.
Key present in the Main Store table.
IDRS31013 Duplicate C112 trans part not IDuplicate flag has been found set by the daily input processing —_ICheck the contents of the DRS Main Store and C112 Daily input [DRSC310.pc IB
ound lwhere there is no existing transaction part for the matching Primary Itables. Contact support with error details.
Key present in the Main Store table.
IDRS31014 Duplicate D trans part not —_I Duplicate flag has been found set by the daily input processing _ICheck the contents of the DRS Main Store and "D" Daily Input [DRSC310.po IB
found lwhere there is no existing transaction part for the matching Primary Itables. Contact support with error details.
Key present in the Main Store table.
IDRS31015 Duplicate S trans part not —_I Duplicate flag has been found set by the daily input processing _ICheok the contents of the DRS Main Store and "S" Daily Input  [DRSC310.po IB
found lwhere there is no existing transaction part for the matching Primary Itables. Contact support with error details.
Key present in the Main Store table.
IDRS31016 Insert into Main Store Update ICould not insert a record into DRS Main Store Updates table. Check the contents of DRS Main Store Updates table. Contact IDRSC310.pe IB
failed Isupport with error details.
IDRS31017 [Missing DRS System No record found in table DRS_SYSTEM_PARAMETERS for the _ ICheck the contents of the table DRS_SYSTEM_PARAMETERS. IDRSC310.pc IB
Parameter parameter named ‘PARTITION RECEIPT DATE" IContact support with error details.
IDRS31018 State validation rules has _IFatal Error. One or more validation rules have changed in [Check the definition of state validation rules in the database and the IDRSC310.p¢ IB
changed IDRS_STATE_VALIDATION_RULES table. program and update program accordingly. Contact support with
lerror details
IDRS31019 ILoss of State in Main Store _IState information has been lost when updating state to F99 via the ICheck the DRS_Operational_Exceptions table for lost information. IDrs Workstation IB
table. IDRS Workstation. IContact support with error details.
IDRS31101 incorrect number of Incorrect number of command-line input parameters have been _ICheck the TWS scripts to see if the call being made to the module IDRSC311.p¢ IB
parameters supplied to the module is of the form: DRSC311 <Application Type>
IDRS31102 _ISingle insert failed [Single Insert into DRS_RX_C12_EXCP_MAIN has failed Check ORACLE error message for further information IDRSC311.po IB
IDRS31103 _ I Exception unknown The exception to be copied is of unknown type Check ORACLE error message for further information IDRSC311.pc IB
IDRS31104 _IRead current state has failed Unable to process the current state of the transaction Check ORACLE error message for further information IDRSC311.po IB

© Copyright Fujitsu Services
Limited 2015

FUJITSU RESTRICTED (COMMERCIAL IN.

CONFIDENCE) Ref. DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED PageNo: 111 of 123
Fe)
FUJITSU

DRS Host Support Guide

FUJITSU RESTRICTED (COMMERCIAL IN

FUJ00089582
FUJ00089582

CONFIDENCE)

IDRS31105 Too many elements in state Itoo many elements in the state lookup butter so the buffer could not ICheck total state records in DRS_TRANSACTION_STATES IDRSC311.po IB
lookup buffer be populated successfully

IDRS31106 no match in lookup buffer _I Unable to find matching primary keys in the main store for the Check data in DRS_RX_MAIN_STORE IDRSC311.pc IB

lduplicate exception in the daily table.

IDRS31107 _ISingle insert failed [Single Insert into DRS_RX_C4_EXCP_MAIN has failed Check ORACLE error message for further information IDRSC311.po IB

IDRS31108 _ISingle insert failed [Single Insert into ORS_RX_D_EXCP_MAIN has failed Check ORACLE error message for further information IDRSC311.po IB

IDRS31109 _ISingle insert failed [Single Insert into DRS_RX_S_EXCP_MAIN has failed Check ORACLE error message for further information IDRSC311.po IB

IDRS31110 _ {Single insert failed [Single Insert into DRS_RX_C112_EXCP_MAIN has failed Check ORACLE error message for further information IDRSC311.po IB

DRs31111 [Data Error [Unable to copy a transaction due to a data error. Transaction may not exist in main store. Check log to see what field IDRSC311.pe IB

failed.

DRS32001 I incorrect Command-line Incorrect number of command-line input parameters have been _I Check the TWS scripts to see if the call being made to the module IDRSC320.pe IB
parameters supplied to the module DRSC320 is of the form: DRSC320 <Application Type>

IDRS32002 _I Missing/invalid Command-line IMissing/Incorrect command-line input parameters have been [Check the TWS scripts to see if the call being made to the module IDRSC320.pe IB
parameters lsupplied to the module DRSC320 is of the form: DRSC320 <Application Type>

DRS32201 I incorrect Command-line Missing/Incorrect command line input parameters have been [Check the TWS scripts to see if the call being made to the module IDRSC322,pe IB
parameters supplied to the module DRSC322 is of the form DRSC322 <Application Type>

IDRS32202 _IMissing/invalid Command-line I The input parameter <Application Type> value is NULL, specify a _ICheck the TWS soripts to see if the call being made has avalid + IDRSC322.po IB
parameters valid value. Application Type.

IDRS32203 No report line query found —_INo report line query found for report NB101, check [Check table DRS_REP_LINES for appropriate query IDRSC322.po IB

IDRS_REP_LINES table

IDRS32204 [Failed to open cursor C1 _IFailed to open cursor C1, check ORACLE error code Check ORACLE error message for further information IDRSC322.po (IB

IDRS32205 Insert into NB101 Results —_ICould not insert a record into DRS NB101 Results table. [Check oracle error message for further information IDRSC322.po IB
table failed

DRS32206_IPARTITION RECEIPT No record found in DRS_SYSTEM_PARAMETERS table for Check table DRS_SYSTEM_PARAMETERS for the appropriate IDRSC322pc IB
DATE" Not found (PARTITION RECEIPT DATE’. parameter

IDRS32207_IPARTITION RECEIPT [System Parameter ‘PARTITION RECEIPT DATE’ is NULL [Check table DRS_SYSTEM_PARAMETERS for the appropriate IDRSC322pc IB

DATE’ is NULL

parameter

© Copyright Fujitsu Services
Limited 2015

FUJITSU RESTRICTED (COMMERCIAL IN.

CONFIDENCE) Ref. DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED PageNo: 112 of 123
Fe)
FUJITSU

DRS Host Support Guide

FUJITSU RESTRICTED (COMMERCIAL IN

FUJ00089582
FUJ00089582

CONFIDENCE)

DRS32301 incorrect Command-line Incorrect number of command-line input parameters have been _I Check the TWS scripts to see if the call being made to the module IDRSC323.pe
parameters supplied to the module DRSC323 is of the form: DRSC323 <Application Type>

IDRS32302 I Missing/invalid Command-line IMissing/Incorrect command-line input parameters have been Check the TWS scripts to see if the call being made to the module I[DRSC323.pc
parameters supplied to the module DRSC323 is of the form: DRSC323 <Application Type>

IDRS32303 _INo report line query found for INo report line query found for report, check DRS_REP_LINES I Check table DRS_REP_LINES for appropriate query IDRSC323,pc
report table

IDRS32304 [Failed to open cursor Failed to open cursor CUR_DRS_REP_LINES, check ORACLE _ICheck ORACLE error message for further information IDRSC323.pe
CUR_DRS_REP_LINES __Ierror code

DRS32401 incorrect Command-line Incorrect number of command-line parameters ICheck the TWS scripts to see if the call being made to the module I[DRSC324.pe
parameters is of the form: DRSC324 [ApplicationType]

DRS32402 _IMissing/Invalid command-line IMissing/Invalid command-line parameters ICheck the TWS scripts to see if the call being made to the module I[DRSC324.pe
parameters is of the form: DRSC324 [ApplicationType]

IDRS32403 Environment variable is not _IEnvironment variable is not set [Check the environment variable SNWB_MSU_OUTPUT or IDRSC324.po
set $_NWB_OUTPUT or $NWB_AUDIT_OUTPUT or.

sNWB_TIP_OUTPUT
IDRS32404 [Opening file failed with error IOpening report file failed with error [Check if file already exists with restricted permissions or if IDRSC324.pc
Jdirecctory has restricted permissions

IDRS32405 _IClosing file failed with error IClosing report file failed with error [Check if file exists in SNWB_MSU_OUTPUT or $_MSU_OUTPUT IDRSC324.po

IDRS32406 [Writing Header error Header being printed is too big Increase header size if necessary IDRSC324.po

IDRS32407 Error Printing 1st column —_IError in printing first column headings row ICheck column heading data IDRSC324.po
headings

[DRS32408 [Error Printing 2nd column —_ [Error in printing second column headings row [Check column heading data IDRSC324.pc
headings

IDRS32409 Error Printing 1st column —_IError in printing last TOTAL row [Check column heading data IDRSC324.po
headings

IDRS32410 Error formatting record Error printing data from drs_rep_file register to the output file Check data in drs_rep_results_nb101 IDRSC324.po
outputs

IDRS32411 Error renaming .LCK file to. I Error renaming .LCK file to .TXT file in $NWB_MSU_OUTPUT _ICheck permissions on .LCK files in $NWB_MSU_OUTPUT IDRSC324.pc

TXT file

© Copyright Fujitsu Services
Limited 2015

FUJITSU RESTRICTED (COMMERCIAL IN.
CONFIDENCE) Ref. DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED PageNo: 113 of 123
Fe)
FUJITSU

DRS Host Support Guide

FUJITSU RESTRICTED (COMMERCIAL IN

FUJ00089582
FUJ00089582

CONFIDENCE)

IDRS32412 [Error whilst removing file __I Error whilst removing file <TxtFile>:<ErrorMsg> Check <ErrorMsg> for further details IDRSC324.po

IDRS32413 [Unable to link file TIP/AUDIT IUnable to link file from $NWB_MSU_OUTPUT to Delete file from $NWB_TIP_OUTPUT and/or IDRSC324.pc
directory SNWB_TIP_OUTPUT or SNWB_AUDIT_OUTPUT directory SNWB_AUDIT_OUTPUT. Check permissions on directory

DRS32501 incorrect Command-line Missing/Incorrect command-line input parameters have been [Check the TWS scripts to see if the call being made to the module I[DRSC325.pe
parameters supplied to the module DRSC325 is of the form: DRSC325 <Application Type>

IDRS32502 _IMissing/invalid Command-line Incorrect number of command-line input parameters have been _ICheck the TWS scripts to see if the call being made to the module IDRSC325.po
parameters supplied to the module DRSC325 is of the form: DRSC325 <Application Type>

IDRS32503 Environment variable is not _IEnvironment variable is not set Check the environment variable SNWB_MSU_OUTPUT or IDRSC325.po
set $_NWB_OUTPUT or $NWB_AUDIT_OUTPUT or

sNWB_TIP_OUTPUT
1DRS32504 [Writing Header error Header being printed is too big Increase header size if necessary IDRSC325,pc
IDRS32505 [Opening file failed with error IOpening report file failed with error Check if file already exists with restricted permissions or if IDRSC325.po
Jdirecctory has restricted permissions

IDRS32506 _IClosing file failed with error _IClosing report file failed with error [Check if file exists in SNWB_MSU_OUTPUT or $_MSU_OUTPUT IDRSC325.pe

IDRS32507 Error Printing 1st column —_IError in printing first column headings row Check column heading data IDRSC325.po
headings

DRS32508 [Error Printing 2nd column —_IError in printing second column headings row ICheck column heading data IDRSC325.po
headings

IDRS32509 [Error formatting record Error printing data from drs_rep_file register to the output file Check data in drs_rep_results_nb102_x IDRSC325.pe
outputs

IDRS32510 Error renaming .LCK file to. Error renaming .LCK file to TXT file in $NWB_MSU_OUTPUT __ICheck permissions on .LCK files in $NWB_MSU_OUTPUT IDRSC325.pe
TXT file

IDRS32511 [Error whilst removing file _I Error whilst removing file <TxtFile>:<ErrorMsg> ICheck <ErrorMsg> for further details IDRSC325.pe

IDRS32512 [Unable to link file TIP/AUDIT IUnable to link file from $NWB_MSU_OUTPUT to Delete file from $NWB_TIP_OUTPUT and/or IDRSC325,pc
directory SNWB_TIP_OUTPUT or SNWB_AUDIT_OUTPUT directory ISNWB_AUDIT_OUTPUT. Check permissions on directory

JDRS32801 _Iincorrect Command-line Incorrect number of command-line parameters [Check the TWS scripts to see if the call being made to the module I[DRSC328.pe

parameters

is of the form: DRSC328 [ApplicationType]

© Copyright Fujitsu Services
Limited 2015

UNCONTROLLED IF PRINTED OR LOCALLY

FUJITSU RESTRICTED (COMMERCIAL IN. Ref:

CONFIDENCE)
Version:

Date:

STORED Page No:

DEV/APP/SPG/0028

19-Apr-2017
114 of 123
Fe)
FUJITSU

DRS Host Support Guide

FUJITSU RESTRICTED (COMMERCIAL IN

FUJ00089582
FUJ00089582

CONFIDENCE)

IDRS32802 I Missing/invalid command-line IMissing/Invalid command-line parameters ICheck the TWS scripts to see if the call being made to the module I[DRSC328.pe
parameters is of the form: DRSC328 [ApplicationType]

IDRS32803 Environment variable is not IEnvironment variable is not set Check the environment variable SNWB_MSU_OUTPUT or IDRSC328.pc
set $_NWB_OUTPUT or $NWB_AUDIT_OUTPUT or

sNWwB_TIP_OUTPUT
IDRS32804 [Opening file failed with error IOpening report file failed with error Check if file already exists with restricted permissions or if IDRSC328.po
Jdirecctory has restricted permissions

IDRS32805 _IClosing file failed with error _ IClosing report fie failed with error Check if file exists in $NWB_MSU_OUTPUT or $_MSU_OUTPUT IDRSC328.pc

IDRS32806 [Writing Header error Header size being printed is too big Increase header size if necessary IDRSC328.pc

[DRS32807 Error Printing 1st column —_IError in printing first column headings row [Check column heading data IDRSC328.pc
headings

[DRS32808 [Error Printing 2ndcolumn —_ Error in printing second column headings row Check column heading data IDRSC328.po
headings

IDRS32809 [Error formatting record Error printing data from drs_rep_file register to the output file ICheck data in drs_rep_file_register IDRSC328.pc
outputs

IDRS32810 _ Iinvalid/No row selected in _Iinvalid/Null SQL found in DRS_REP_LINES for report = NB000 I Check entry in drs_rep_lines for report_number = 'NBO0O' IDRSC328.pc
\drs_rep_lines land (Application-Type = x Or Application-Type = NULL)

IDRS32811 Error renaming .LCK file to. I Error renaming .LCK file to TXT file in SNWB_MSU_OUTPUT __ICheck permissions on .LCK files in $NWB_MSU_OUTPUT DRSC328.pc
TXT file

DRS32812 [Error whilst removing file __I Error whilst removing file <TxtFile>:<ErrorMsg> ICheck <ErrorMsg> for further details IDRSC328.pc

IDRS32813 [Unable to link file TIP/AUDIT IUnable to link file from $NWB_MSU_OUTPUT to Delete file from $NWB_TIP_OUTPUT and/or IDRSC328.pe
directory SNWB_TIP_OUTPUT or SNWB_AUDIT_OUTPUT directory ISNWB_AUDIT_OUTPUT. Check permissions on directory

IDRS35001 incorrect no of Command-line IIncorrect number of command-line input parameters have been _ICheck the TWS scripts to see if the call being made to the module IDRSC350.pc
parameters supplied to the module DRSC350 is of the form: DRSC350 <Application Type>

IDRS35002 invalid Command line Invalid command-line input parameters have been supplied to the _ICheck the TWS scripts to see if the call being made to the module I[DRSC350.pe
parameter module DRSC350 is of the form: DRSC350 <Application Type>

IDRS35003 [Failed to retrieve Tablespace ICould not retrieve tablespace Name for <TableName> Check ORACLE error message for further information IDRSC350.pc

Name

© Copyright Fujitsu Services
Limited 2015

FUJITSU RESTRICTED (COMMERCIAL IN.

CONFIDENCE) Ref. DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED PageNo: 115 of 123
Fe)
FUJITSU

DRS Host Support Guide

FUJITSU RESTRICTED (COMMERCIAL IN

FUJ00089582
FUJ00089582

CONFIDENCE)
IDRS35004 Parameter not set Parameter MAXIMUM NUMBER OF PARTITIONS not set for [Check ORACLE error message for further information IDRSC350.po
<ApplicationType>
IDRS35005 Parameter not set Parameter PARTITION RECEIPT DATE not set for Check ORACLE error message for further information IDRSC350.pc
<ApplicationType>
IDRS35006 _IFailed to drop Partition Failed to drop Partition <PartitionNAme> for <TableName> Check ORACLE error message for further information IDRSC350.pc
IDRS35007 _IFailed to create Partition Failed to create Partition <PartitionNAme> for <TableName> Check ORACLE error message for further information IDRSC350.po
IDRS35008 [Failed to update Failed to update DRS SYSTEM DATE and PARTITION RECEIPT ICheck ORACLE error message for further information IDRSC350.po
IDRS_SYSTEM_PARAMETE IDATE for <ApplicationType>
RS
IDRS35009 [Failed to update Failed to update C4SD FILE LOAD COMPLETE, DRS Check ORACLE error message for further information IDRSC350.pc
DRS_SYSTEM_PARAMETE IPROCESSING DAY COMPLETE and BATCH JOB STARTED forI
RS <ApplicationType>
IDRS35101 incorrect Command-line Incorrect number of command-line input parameters have been _I Check the TWS scripts to see if the call being made to the module IDRSC351.pe
parameters supplied to the module DRSC351 is of the form: DRSC351 <Application Type>
IDRS35102 Missing System parameter _INo entry for parameter ‘DRS PROCESSING DAY COMPLETE’ —_ICheck the contents of table DRS_SYSTEM_PARAMETERS to IDRSC351.pc
found in table DRS_SYSTEM_PARAMETERS. [see if a record corresponding to the given parameter is present
DRS35301 incorrect Command-line Incorrect number of command-line input parameters have been _ICheck the TWS scripts to see if the call being made to the module IDRSC353.pe
parameters supplied to the module DRSC353 is of the form: DRSC350 <Application Type>
IDRS35302 Invalid Command line Invalid command-line input parameters have been supplied to the _ICheck the TWS scripts to see if the call being made to the module IDRSC353.pe
parameter module DRSC353 is of the form: DRSC350 <Application Type>
IDRS35303 Update of Batch Parameter ITable DRS_SYSTEM_PARAMETERS could not be updated Check ORACLE error message for further information IDRSC353.pc
failed
DRS36101 _Iincorrect Command-line Incorrect number of command-line input parameters have been _ICheck the TWS scripts to see if the call being made to the module IDRSC361.pe
parameters supplied to the module DRSC361 is of the form: DRSC361 [ApplicationType]
IDRS36102 I Missing/invalid Command-line IMissing/Invalid command-line parameters have been supplied to —_ICheck the TWS scripts to see if the call being made to the module [DRSC361.pc
parameters Ithe module DRSC361 is of the form: DRSC361 [ApplicationType]
IDRS36103 System parameter not found _IPARTITION RECEIPT DATE or MAXIMUM NUMBER OF ICheck table DRS_SYSTEM_PARAMETERS for the appropriate IDRSC361.pe
PARTITIONS not found. parameters
IDRS36104 Unable to access table Unable to access DRS_SYSTEM_PARAMETERS table ICheck Oracle table DRS_SYSTEM_PARAMETERS exists and IDRSC361.pe

has necessary permissions

© Copyright Fujitsu Services
Limited 2015

FUJITSU RESTRICTED (COMMERCIAL IN.

CONFIDENCE) Ref. DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED PageNo: 116 of 123
Fe)
FUJITSU

DRS Host Support Guide

FUJITSU RESTRICTED (COMMERCIAL IN

FUJ00089582
FUJ00089582

CONFIDENCE)
IDRS36105 invalid System parameter. IPARTITION RECEIPT DATE system parameter is NULL Check table DRS_SYSTEM_PARAMETERS for the appropriate IDRSC361.pc IB
parameter
IDRS36106 Invalid System parameter. _ I MAXIMUM NUMBER OF PARTITIONS System parameter is Check table DRS_SYSTEM_PARAMETERS for the appropriate IDRSC361.pc IB.
NULL parameter
IDRS36107 Unable to access table lUnable to access DRS_ARCHIVED_TABLES table Check Oracle table DRS_ARCHIVED_TABLES exists andhas  IDRSC361.pc IB
necessary permissions.
IDRS36108 Unable to fetch from table I Unable to fetch from DRS_ARCHIVED_TABLES table Check Oracle table DRS_ARCHIVED_TABLES for the appropriate [DRSC361.pc IB.
message
IDRS36109 Environment variable is not Environment variable <EnvVar> is not set Set the Environment variable with correct value. IDRSC361.pc IB
set
IDRS36110 Error creating parameter file _IError creating parameter file <Parfile>:<ErrorMsg> ICheck <ErrorMsg> for further details DRSC361.pc IB
IDRS36111 _IUnable to create a link to a file IUnable to create a link to the file <Source> -> Check <ErrorMsg> for further details IDRSC361.po IB
}<Target>:<ErrorMsg>
IDRS36112 Unable to execute Dynamic _IUnable to execute dynamic SQL statement <SQL Stmt> Check ORACLE error message for further information IDRSC361.pc IB
SQL stmt
IDRS36113 Unable to access table Unable to access USER_TAB_PARTITIONS table Check Oracle table USER_TAB_PARTITIONS exists andhas  IDRSC361.pe IB
necessary permissions
IDRS36114 [Unable to fetch from table _IUnable to fetch from USER_TAB_PARTITIONS table Check Oracle table USER_TAB_PARTITIONS for appropriate  IDRSC361.p¢ IB
message
IDRS36115 Error executing unix Error executing command <CommandStr>:<ErrorMsg> ICheck <ErrorMsg> for further details IDRSC361.po IB
command
IDRS36116 Error opening export Log file _IError opening export Log file <Logfile>:<ErrorMsg> ICheck <ErrorMsg> for further details DRSC361.pc IB
IDRS36117 Error whilst exporting data__IError whilst exporting data, check log file <LogFile> ICheck export log file <Logfile> for the actual error message. IDRSC361.pc IB
IDRS36118 [Unable to read export log file IUnable to read export log file <Logfile>:<ErrorMsg> ICheck <ErrorMsg> for further details IDRSC361.pc IB
IDRS36119 _IStatic data missing IDRS_ARCHIVED_TABLES static data missing, no tables Check Oracle table DRS_ARCHIVED_TABLES, if entries missing, IDRSC361.pe IB
archived/purged run build script to populate.
IDRS36120 [Error whilst renaming .dmp to [Error whilst renaming file from <SrcFile> to <TgtFile>:<ErrorMsg> I Check <ErrorMsg> for further details IDRSC361.pc IB

err file

© Copyright Fujitsu Services
Limited 2015

FUJITSU RESTRICTED (COMMERCIAL IN.

CONFIDENCE) Ref. DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED PageNo: 117 of 123
Fe)
FUJITSU

DRS Host Support Guide

FUJITSU RESTRICTED (COMMERCIAL IN

FUJ00089582
FUJ00089582

CONFIDENCE)

DRS36201 [File Housekeeping job has _IDRS File Housekeeping job has failed due to an application or _—_ICheck the TWS log for more details of the error. Contact DRSX362 sh
tailed ldatabase error EDSC/SSC (3rd Line Support) in normal working hours.

DRS36401 incorrect Command-line _I Missing/Incorrect command-line input parameters have been Check the TWS scripts to see if the call being made to the module IDRSC364.pc
parameters supplied to the module DRSC364 is of the form: DRSC364 <Application Type>

IDRS36402 No data to be copied from _INo data has been found to be copied from RDDS table ICheck the data and correct public synonyms exist. DRSC364,pc
DDS IDRS_ROUTING_GATEWAYS

IDRS36403 _INo data to be copied from _INo data has been found to be copied from RDDS table Check the data and correct public synonyms exist. DRSC364,pc
DDS IDRS_ACCOUNTING_WEEKS

DRS36601 incorrect Command-line __I Missing/Incorrect command-line input parameters have been ICheck the TWS scripts to see if the call being made to the module IDRSC366.pc
parameters supplied to the module DRSC366 is of the form: DRSC366 <Application Type>

IDRS36602 No data to be copied from _INo data has beenn found to be copied from the TPS tabe ICheck the data and correct public synonyms exist. DRSC366.pc
TPS TPS_OUTLETS_LAST_POLLED

DRS36701 Iincorrect Command-line _ I Missing/Incorrect command-line input parameters have been ICheck the TWS seripts to see if the call being made to the module IDRSC367,pc
parameters supplied to the module DRSC367 is of the form: DRSC367 <Application Type>

DRS36702 I Missing/Invalid Command-lineIincorrect number of command-line input parameters have been _I Check the TWS scripts to see if the call being made to the module IDRSC367.pe
parameters supplied to the module DRSC367 is of the form: DRSC367 <Application Type>

DRS36703 Environment variable is not [Environment variable NWB II _TIP_OUTPUT is not set Set environment variable appropriately DRSC367.pc
set

IDRS36704 Error occurred opening pipe I Error occurred opening pipe Refer to the Exception Error message for further details, DRSC367.pc

IDRS36705 Error occurred closing pipe _I Error occurred closing pipe Refer to the Exception Error message for further details IDRSC367.pc

DRS36706 I TIP Receipt File open failed Error occurred while opening the TIP harvest receipt file in Read __I Check for the existence of TIP harvest receipt file and refer tothe IDRSC367.pc
with error mode Exception Error message for further details

IDRS36707 I TIP File Delivery Date/Time _I The file delivery Date/Time of corresponding transaction file for the DRSC367.pc
not found TIP interface was not found in the TIP Harvest Receipt fle

DRS36708 File entry not found in File Entry for the TIP transaction file was not found in the table DRSC367.pc
Register tps_file_register

DRS36709 Error while renaming receipt [An Error occurred while renaming the TIP Harvest Receipt fle to ICheck Exception Error message for further details DRSC367.pc

file

change file extension from “ACK” to “.ack”

© Copyright Fujitsu Services
Limited 2015

FUJITSU RESTRICTED (COMMERCIAL IN.
CONFIDENCE) Ref. DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED PageNo: 118 of 123
Fe)
FUJITSU

DRS Host Support Guide

FUJITSU RESTRICTED (COMMERCIAL IN

FUJ00089582
FUJ00089582

CONFIDENCE)
DRS36801 I incorrect Command-line Incorrect number of input command-line parameters. Check the TWS scripts to see if the call being made to the module I[DRSC368.pc
parameters is of the form: DRSC368 <Application Type> <Run Group
1>...<Run Group N>
IDRS36802 Invalid Command line No input Run Groups have been provided on command line [Check the TWS scripts to see if the call being made to the module IDRSC368.pe
parameters is of the form: DRSC368 <Application Type> <Run Group
1>...<Run Group N>
IDRS36803 invalid input Record Group _INo records found in table DRS_ANALYZED_OBJECTS for Object ICheck if the Run-Group being passed command-line corresponds IDRSC368.pc
IGroup with given name with data in DRS_ANALYZED_OBJECTS table
IDRS36804 I No record found in DRS No corresponding record for the input Table/Index with given name ICheck contents of DRS_ANALYZED_OBJECTS to ensure that the IDRSC368.pe
Metadata found in DRS Metadata correct Object Name and Object Type are used
IDRS36805 Given Partition Number not _ IThe given partition number for Table/Index with given Object Name ICheck contents of DRS_ANALYZED_OBJECTS to ensure that the [DRSC368.po
available is not available as the object has only set sumber of partitions correct Partition Number is present as parameter for the Object
Name and Object Type
IDRS36806 Given Partition Number not __INo corresponding entry for the input Table/index with given name _ICheck contents of DRS_ANALYZED_OBJECTS to ensure that the [DRSC368.pc
available land given partition position found in DRS Metadata correct Partition Number is present as parameter for the Object
Name and Object Type
DRS37101 incorrect Command-line Incorrect number of command-line input parameters have been _ICheck the TWS scripts to see if the call being made to the module IDRSC371.pe
parameters supplied to the module DRSC371 is of the form: DRSC371 <Application Type>
IDRS37102 _IMissing/invalid Command-line IMissing/Incorrect command-line input parameters have been ICheck the TWS scripts to see if the call being made to the module IDRSC371.pe
parameters supplied to the module DRSC371 is of the form: DRSC371 <Application Type>
IDRS37106 _Iinvalid C4/D table names _I invalid C4/D table names entry in tes_partition_creates table ICheck C4/D entry in tes_partition_creates table IDRSC371,pc
IDRS37107 _IUnknown Error during inserts IA non-data related Oracle error has occurred during bulk inserts _ICheck oracle error message for further information IDRSC371.po
into table DRS_RX_C4
IDRS37111__ISequence reached Max Value IThe Horizon Transaction Id - Receipt Date Sequence has reached IConfirm correct execution of the C4SD process(TESC340). Check IDRSC371.pc
its maximum allowed value or valid data in the TES_TX_C4 table
IDRS37112 [Unknown Error during inserts IA non-data related Oracle error has occurred during inserts into _ICheck oracle error message for further information IDRSC371.pc
tables DRS_RX_C4 or DRS_RX_C4_EXCP
DRS37117 [Unknown Error during inserts IA non-data related Oracle error has occurred during inserts into _ICheck oracle error message for further informatio IDRSC371.po

table DRS_RX_C4_EXCP

© Copyright Fujitsu Services
Limited 2015

FUJITSU RESTRICTED (COMMERCIAL IN.

CONFIDENCE) Ref. DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED PageNo: 119 of 123
Fe)
FUJITSU

DRS Host Support Guide

FUJITSU RESTRICTED (COMMERCIAL IN

FUJ00089582
FUJ00089582

CONFIDENCE)
IDRS37108 _IUnknown Error during inserts IA non-data related Oracle error has occurred during bulk inserts _ICheck oracle error message for further information IDRSC371.po
into table DRS_RX_D
IDRS37113 _ISequence reached Max Value IThe Horizon Transaction Id - Receipt Date Sequence has reached IConfirm correct execution of the C4/D process(TESC340). Check IDRSC371.pc
its maximum allowed value Hor valid data in the TES_TX_D table
IDRS37114 [Unknown Error during inserts IA non-data related Oracle error has occurred during inserts into _ICheck oracle error message for further information IDRSC371.pc
tables DRS_RX_D or DRS_RX_D_EXCP,
IDRS37118 [Unknown Error during inserts IA non-data related Oracle error has occurred during inserts into _ICheck oracle error message for further information IDRSC371.pc
ltable DRS_RX_D_EXCP
IDRS37110 _ invalid Input Message Type _Iinvalid value of Message Type passed to the function that handles ICheck contents of the TES_TX_C4/D input table to see if one or IDRSC371.pc
Data related exceptions more messages are of invalid message type
DRS37101 incorrect Command-line Incorrect number of command-line input parameters have been _ICheck the TWS scripts to see if the call being made to the module I[DRSC371.pe
parameters supplied to the module DRSC371 is of the form: DRSC371 <Application Type>
IDRS37201 incorrect no of Command-line IIncorrect number of command-line parameters [Check the Maestro scripts to see if the call being made to the IDRsc372
parameters module is of the form: DRSC372 <Application Type> <Routing
Gateway><DCSSETDT>
DRS37202 _ invalid Command line Invalid Command line parameter [Check the Maestro scripts to see if the call being made to the DRsc372
parameter module is of the form: DRSC372 <Application Type> <Routing
Gateway>><DCSSETDT>
IDRS37203 _Iinvalid Input Routing Gateway Iinput Routing Gateway not find in ICheck the Maestro scripts to see if the correct input routing IDRsc372
IRDDS_ROUTING_GATEWAYS Igateway is invoked to the module DRSC372
DRS37204 [Error whilst OPEN cursor —_I The process is Unable to open the SQL cursor due to some [Check the SQL statement in the exception message for any syntax IDRSC372
ldatabase issues lerrors or table access errors.
IDRS37205 [Error whilst FETCH from —_I The process is unable to fetch from the SQL cursor due to some _ICheck the SQL statement in the exception message for any syntax IDRSC372

cursor

ldatabase issues

lerrors or table access errors.

© Copyright Fujitsu Services
Limited 2015

FUJITSU RESTRICTED (COMMERCIAL IN.

CONFIDENCE) Ref. DEV/APP/SPG/0028
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017
STORED PageNo: 120 of 123
FUJ00089582
FUJ00089582

co DRS Host Support Guide .
FUJITSU FUJITSU RESTRICTED (COMMERCIAL IN &

CONFIDENCE)

Appendix F — DRS Archiving Table Mapping

a)

DRS_ARCHIVED_TAB

LES.csv
© Copyright Fujitsu Services FUJITSU RESTRICTED (COMMERCIAL IN Ref: DEV/APP/SPG/0028
Limited 2015 CONFIDENCE) *
Version: 5.0
UNCONTROLLED IF PRINTED OR LOCALLY Date: 19-Apr-2017

STORED Page No: 121 of 123
