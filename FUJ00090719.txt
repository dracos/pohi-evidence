Fujitsu Services

DRS Host Support Guide

COMMERCIAL_IN_CONFIDENCE

Ref:

Version:

Date:

FUJ00090719
FUJ00090719

NB/MAN/003
5.0

13/04/2005

Document Title:

Document Type:

Release:

Abstract:

Document Status:

Originator & Dept:

Contributors:

Internal Distribution:

External Distribution:

Approval Authorities:

DRS Host Support Guide

Support Guide

BI3 S80

This document details the Maestro scheduling of the DRS Host
processes including NWB, DCP and ETU.

APPROVED

Tom Northcott, Development Unit

Matt Arris, Rahul Shah, Sudhanshu Agrawal, Siva Gurunathan

Fujitsu Services Document Management

Name

Position

Signature

Date

Mik Peach

SSC

Mark Taylor

Development Manager

Kevin Watson

Design Manager

© 2005 Fujitsu Services

COMMERCIAL_IN_CONFIDENCE

Page: 1 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
0.0Document Control
0.1 Document History
Version No. I Date Reason for Issue Associated
CP/PinICL.
0.1 02-Aug-2002 Draft — Based on NWB schedule with DCP I CP3263
additions
0.2 08-Aug-2002 Draft — minor revisions
0.3 04-Sept-2002 Draft — further minor revisions
0.4 13-Sept-2002 Draft — further minor revisions 81375
Added additional = dependencies _to I 81160
DRS_EFT_C4L_SOB1 &
DRS_EFT_ C41 SOB2
0.5, 0.6 & I 23-Sept-2002 Draft — further minor changes
0.7 Change report schedule 81374
Add DRSX362E to DCP 81321
Rename DRSX361? To DRSC361?
Correct typo on DRS_FILE_TRN_ACK
0.8 27-Sep-2002 Separation of 353 from C4SD_ loading I 81764
schedule
0.9 8-Oct-2002 Change of schedule for DRSC323 to run it I 81891
once for each of the twelve sections.
0.10 8-Oct-2002 Addition of 9" run of DRSC303 for 65" I 82282
partition
0.11 24-Oct-2002 Removal of Main Store night sweep up I 82279
(DRSC310)
0.12 04-Nov-2002 DRSC366 to run after TPSREP 83414
0.13 05-Nov-2002 Various dependency changes. 83414
12-Nov-2002 I Revised DRS_EFT PAUS AGT _ pause I 83719
0.14 period from 5 to 15 minutes
0.15 & 0.16 I 18-Dec-2002 Addition of DRSC368 84186
0.17 23-Dec-2002 Various changes to schedule I Review
DRS_EFT C4LD_1 comments
0.18 23-Dec-2003 Updated the document with NWB and DCP
processes and schedule details.
0.19 21-Jan-2003 Updated the document as per the review I Review
comments. comments
1.0 30-Jan-2003 Sent the document for approval
Ll 02-May-2003 Revised to include new ETU schedule and
resultant dependencies.
12 12-Sept-2003 Revised to define schedule for DCS
permanent EMIS fix (Removed for S50
baseline)

© 2005 Fujitsu Services

COMMERCIAL_IN_CONFIDENCE

Page: 2 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
2.0 13-Oct-2003 Revised as per comments and released for
Approval. (permanent EMIS specific
information removed so document can be
baselined for S50, will be issued for review in
later draft)
2.1 17-Jun-2004 Revised to include permanent EMIS specific
information — process DRSC370
3.0 09-July-2004 Released for Approval
3.1 13-Oct-2004 Schedule updated for S75
3.2 1 Nov-2004 All sections revised where appropriate for
S75
4.0 14-Jan-2005 Released for Approval
41 18-Jan-2005 First draft containing revised schedule for I CP3716
S80
5.0 13-Apr-2005 Released for Approval

0.2 Review Details

Review Comments by:

Review Comments to:

Tom Northcott

Mandatory Review Authority

Name

DRS Development Team Leader

Andrew Carruthers

SSC Mik Peach
ISD Manager Andrew Gibson
ITU System Validation and Integration Hermia Figueiredo

Optional Review / Issued for Information

Delivery Unit Host Manager

Nick Lawman

Delivery Unit DELT Test

Julie Havard

Development Unit Team Member

Meenakshi Mehta

Development Unit Team Member

Duncan Brown

Development Unit Maestro Team Member I Andy Scott

Development Unit Team Member Wing Pang

(*) = Reviewers that returned comments

0.3. Associated Documents

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 3 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
Reference Version I Date Title Source
[R1] I NB/HLD/003 I 1.0 20/09/200 I DRS Network Banking High I PVCS
2 Level Design
[R2] I NB/IFS/004 0.6 09/09/200 I Network Banking Message I PVCS
2 Flows and Interfaces
[R3] I PA/PER/O31 I 2.0 11/06/200 I Horizon New Service I PVCS
2 Business Volumes
[R4]_ I NB/HLD/009 DRS Live Sizing Analysis
[RS] I TD/MAN/021 I 2.2 04/09/200 I Maestro Support Guide PVCS
2
[R6] I T/MAN/002_ I 5.0 16/04/200 I TPS Operations Manual PVCS
2
[R7] AD/DES/032 I 1.1 03/12/200 I Maestro Agent Schedule I PVCS
1 Design
[R8]_ I TD/AION/035_ I 2.0 16/08/02 FTMS Configuration for I PVCS
DRS to POL Reporting
[R9] I TD/ION/036 I 1.0 14/08/02 FTMS- Configuration for I PVCS
DCP Reports to POL
[R10]I EF/DES/009 Debit Card System EMIS I Fujitsu
Timestamp Correction I POA
Design Proposal
[R11]I NB/HLD/015 S75 High Level Design for I Fujitsu
DRS POA
[R12]I NB/HLD/019 TES Maestro Schedule Fujitsu
POA
[R13]I NB/HLD/016 TES High Level Design Fujitsu
POA
[R14]I DE/DES/161 Raw Volume Sizes for S75 I Fujitsu
Databases POA
[R15]I NB/HLD/026 DRS Host Application and I Fujitsu

Workstation High Level I POA
Design Delta for IMPACT
Release 3

0.4 Abbreviations/Definitions

© 2005 Fujitsu Services

COMMERCIAL_IN_CONFIDENCE Page: 4 of 183
Fujitsu Services

FUJ00090719

FUJ00090719
DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

Abbreviation Definition

BCV Business Continuity Volume

DCP Debit Card Project. New name for EFTPoS/Debit Card Service
DRS Data Reconciliation Service

DRS System Date

The logical DRS business day. DRS business day falls between running
DRS Start of Day and DRS End of Day jobs. Normally same as the
calendar day DRS Start of Day was run on.

DW Fujitsu Services Data Warehouse

EFT EFTPS. Old name for Debit Card Project
EMIS Electronic Management Information Service
EOD End of Day

ETS Electronic Top-Up Service

ETU Electronic Top-Up

FTMS File Transfer Managed Service

MA Merchant Acquirer (Debit Card Project specific)
MAC Message Authentication Code

MSU Management Support Unit

NBE Network Banking Engine

NBS Network Banking Service

NSI National Savings and Investments

NWB DRS-specific abbreviation for Network Banking Service
PFG Payment File Generation

Reconciliation Date

The Reconciliation Date is the date attributed to a transaction to allow PO
Ltd to reconcile. It will be set to the first available Settlement Date from
the Transaction Elements ((C112], [C12], [C4], [S], [D]) that make up that
transaction. If no Settlement Date is available, the Reconciliation Date will
be set to the processing date that the DRS first recorded any element of the
transaction. If a Settlement Date subsequently becomes available, the first
available Settlement Date will replace the processing date. However, once a
transaction has been accounted for on a reconciliation report, the
Reconciliation Date will never change.

Routing Gateway

The Routing Gateway as defined Network Banking Message Flows and
Interfaces [NB/IFS/004].

Run Date

The DRS logical date listed on a report and shows which calendar day the
data is for. It is same as DRS System Date in all cases except NB103
reports where it is a day (configurable) behind DRS System Date.

Settlement Date

The date on which the Client has settled the transaction (in some instances
a default is set by the Banking Host). The Settlement Date will be allocated
by the Client (or failing that the Banking Host) and included in both

© 2005 Fujitsu Services

COMMERCIAL_IN_CONFIDENCE Page: 5 of 183
Fujitsu Services

FUJ00090719

FUJ00090719
DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

authorisations and confirmations. The [C4], IS], and [D] always contain a
Settlement Date. Other messages may contain a Settlement Date.

TES Transaction Enquiry Service
TIP Transaction Information Project
TPS Transaction Processing System
XML eXtensible Mark-up Language

0.5 Changes in this Version

Version Changes
0.1 First Draft
0.2 DCP changes and additions captured
0.3 Minor changes resulting from comments
0.4 Minor changes resulting from comments
0.5, 0.6 & I Various changes — see section 0.1
0.7
0.8 Separation of 353 from C4SD loading schedule.
0.9 Changes for DRSC323 schedule.
0.10 Addition of 9® run of DRSC303 for 65" partition
0.11 Removal of Main Store night sweep up — ninth instance.
0.12 DRSC366 to run after TPSREP plus various other dependency changes relating
to the same move
0.13 TPSTIPL changed to TPSCAREP
MS day will stop at 17:01 instead of 20:00
SOB will be dependent on MS day finishing for both NWB and EFT
SOB dependent on SOD removed for NWB and DCS
MS day Monitors changed to alert at 17:45 for NWB and DCS
0.14 Revised DRS_EFT_PAUS_AGT pause period from 5 to 15 minutes
0.15 Addition of job DRSC368 database ‘analyze’ job
0.16 Amended DRSC368 entries to make the job names unique
0.17 Various changes to schedule DRS_EFT_C4LD_1
0.18 Added various sections detailing the NWB and EFT processes and schedule.
0.19 Minor updates to various sections as per the review comments.
1.2 Updated to include revised schedule for DCS Permanent EMIS functionality

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 6 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

(Removed for approval at v2.0 & to be re-introduced in later draft)
2.1 Re-introduction of DCS Permanent EMIS functionality for S60. Also Online

Transaction Monitoring schedule requirements.
3.1 Addition of new TES to DRS C4/D Copy process and reporting dependencies,

note this draft captures only schedule changes. Further drafts will capture
remaining operational information

3.2 Completion of S75 related information including:

Revised NBS DRSC350 functionality for C2 table partition management
Revised NBS DRSC301 functionality to write data to C2 tables

New NBS process DRSC371 to copy C4/D data from the TES

Revised NBS schedule and Exceptions table to reflect processes above.
Replacement of volume information with reference to DE/DES/161
Also includes revisions associated with the following PEAKS:

PC0103444 — Maestro Resource Lock implemented between DRSC350E and
DRSC350N to prevent deadlock on data-dictionary when dropping partitions

PC0106514 — DRSC350 modified such that it will not roll the DRS logical
processing day forward unless the multiple runs flag in DRS_PROCESSES
table is changed from its default of ‘N’ to “Y’

4.0 Minor revisions following comments from v3.1 that were not included in V3.1

41 First draft of S80 changes mainly related to the removal of the NB103 report.
This results in the removal of CAP totaling process (DRSC321), the NB103
report population process (DRSC326) and the NB103 Report File generation
process (DRSC327).

5.0 None — issued for approval

0.6 Changes Expected

Changes

None

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 7 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

0.7 Table of Contents

1 INTRODUCTION

1.1 DOCUMENT OVERVIEW...
1.2. DRS DaTA FLOW DIAGRAM..

2 INSTALLATION...
ENVIRONMENT VARIABLES.

DATABASE ROLES AND USERS..
Roles.
Oracle Users.
DRS Workstation Users.
1 DRS Workstation Secu . 7

3.2 DRS Workstation User Account Setup. 28
2.5.4 DRS Workstation User Account Closure.
2.5.5. DRS Workstation User Account Unlocking.....

3 MAESTRO RESOURCES.

4 TRANSACTION VOLUMES AND DATABASE STORAGE CAPACITY.........046 29

5 PROCESS FAILURE AND RECOVERY.

5.1 AUTOMATIC RE-RUN BY MAESTRO...
5.2 FAILURES DUE TO ORACLE ERROR......
5.3 FAILURES DUE TO APPLICATION AND S:

6 NETWORK BANKING SCHEDULE DETAILS...
6.1 SCHEDULE M_DB_SRV#DRS_NWB_SOD.

TEM ERROR. 31

6.1.1

6.1.2
6.1.2.1
6.1.2.2 3
6.1.2.3 Rerun action.

6.2 SCHEDULE M_DB_SRV#DRS_ETU_C4LD 3
6.2.1 Dependencies. 3.
6.2.2 Process DRSC30:

6.2.2.1 Implementation. 3:
6.2.2.2 Job Dependenci
6.2.3 Process DRSC306,
6.2.3.1 Implementation.
6.2.3.2 Job Dependenci

6.2.3.3 Rerun action.

6.3. SCHEDULE M_DB_SRV#DRS_NWB_ANALYZE
6.3.1 Dependencies...
6. Process DRSC368.

6.3.2.2
6.3.2.3 Rerun action.

6.4 SCHEDULE M_DB_SRV#DRS_RDDS_EXTRACT

AGASERERRERESSADASSSALS

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 8 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

6.4.1 Dependencies.
6.4.2 Process DRSC364.
6.4.2.1 Implementation.
6.4.2.2 Job Dependencie
6.4.2.3 Rerun action,
6.5 SCHEDULE M_DB_SRV#DRS_NWB_RUN_AGT.
6.6 SCHEDULE M_DB_SRV#DRS_NWB_C12_PARS
6.6.1 Dependencies.
6.6.2 Process DRSC301.

6.6.2.1 Implementation
6.6.2.2 Job Dependencies...
6.6.2.3. Rerun action.

6.6.3 Process DRSC312.
6.6.3.1 Implementation.
6.6.3.2 Job Dependencies.

6.6.3.3 Rerun action...

6.7 SCHEDULE M_} DB SRVEDRS NWB MS DAY
6.7.1 Dependencies.
6.7.2. Process DRSC310 [DAY]

6.7.2.1 Implementation.
6.7.2.2 Job Dependen
6.7.2.3 Rerun action...

6.8 SCHEDULE M_I DB: SRV#DRS_NWB_SOB
6.8.1 Dependencies.
6.8.2 Process DRSC353.

68.2.1 Implementa
6.8.2.2 Job Dependencies.......
6.8.2.3 Rerun action.......

6.9 SCHEDULE M_DB I SRVETES AL REC ~RUN..
6.9.1 Dependencies.
6.9.2. Job DRSC371

6.9.2.1 Implementatio
6.9.2.2 Job Dependencies.
6.9.2.3 Rerun actio

6.10 SCHEDULE M_DB_ SRV#TES_CAPO_REC_RUN
6.10.1 Dependencies.
6.10.2 Job DRSC371N.

6.11 SCHEDULE M_DB_SRV#TES_LINK_REC_RUN.
6111 Dependencies.
6.11.2 Job DRSC371N. -

6.12 SCHEDULE M_DB_SRV#DRS.  NWB C4 PARSE
6.12.1 Dependencies.
6.12.2 Process DRSC-

6.12.2.1 Implementatior
6.12.2.2 Job Dependencies.
6.12.2.3 Rerun action. .......cceeccseeecseeseesseesseesenseeeeesesenseensesesseesnsnecnuseesnaneenseseueesnaceenuseeenacesnsesnnseesneseenaeee 43

6.13 SCHEDULE M_DB_SRV#DRS_NWB_TPS_COPY
6.13.1 Dependencies...
6.13.2 Process DRSC303.

6.13.2.1 Implementation.
6.13.2.2 Job Dependencies.
6.13.2.3 Rerun action......

6.14 SCHEDULE M_DB_SRV#DRS_NWB_MS_NIGHT.
6.14.1 Dependencies
6.14.2 Process DRSC310. [NIGHT

6.14.2.1 Implementation.
6.14.2.2 Job Dependencies.......csssssccssssseeseesnsnesccensnnescesnneees

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 9 of 183
FUJ00090719

FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

6.14.2.3 Rerun action...
6.15 I SCHEDULE M_] DB I SRV#DRS_  NWB. MS EXCPTN.
6.15.1 Dependencies
6.15.2 Process DRSC311
6.15.21 Implementation.
6.15.2.2 Job Dependencies...
6.15.2.3 Rerun action.

6.16 SCHEDULE M_DB_SRV#DRS_TPS_EXTRCT_D.

Process DRSC366.
16.2.1 Job Dependencie
6.16.2.2 Implementation.
6.16.2.3 Rerun action...
6.17 SCHEDULE M_DB_SRV#DRS_NWB_REP_101
6.17.1 Dependencies.
6.17.2 Process DRSC322.
6.17.2.1 Job Dependencies.
6.17.2.2 Implementation...........csesssesecessssieseecesssneeecesnsneneessnene
6.17.2.3 Rerun action.
6.17.3 Process DRSC324
6.17.31 Job Dependencies
6.17.3.2 Implementation.
6.17.3.3 Rerun action........
6.18 SCHEDULE M_DB SRVEDRS 1 NWB REP_ 102
6.18.1 Dependencies.
6.18.2 Process DRSC320.
6.18.21 Job Dependencies.
6.18.2.2 Implementation.
6.18.2.3 Rerun action......
6.18.3 Process DRSC323...
6.18.3.1 Job Dependencies.
6.18.3.2 Implementation...
6.18.3.3 Rerun action.
6.18.4 Process DRSC325,
6.18.4.1 Job Dependencies
6.18.4.2_ Implementation.....
6.18.4.3 Rerun action.
6.19 SCHEDULE M_DB_SRV#DRS_NWB_REP_000.
6.19.1 Dependencies.
6.19.2 Process DRSC328
6.19.21 Job Dependencies............+
6.19.2.2 tnplementation
6.19.2.3 Rerun action... os
6.20 SCHEDULE M DB I “SRVADRS. ADMIN
6.20.1 Dependencies.
6.20.2 Script DRSX365
6.20.2.1

SCHEDULE M1 DB_SRV#DRS_NWB_ADMI
6.21.1 Dependencies
6.21.2 Process DRSC361

6.21.21 Job Dependencies.
Implementation...
Rerun action.

Process DRSC368
Job Dependencie:
Implementation.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 10 of 183
FU.
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

FUJ00090719
IJ00090719

6.21.3.3 Rerun action.
6.21.4 Script DRSX3.
6.21.41 Job Dependenc
6.21.4.2 Implementation...
6.21.43 Rerun action...

6.22 SCHEDULE M_DB  SRVEDRS I NWB_PAUS_AGT.

6.23 SCHEDULE M_DB_SRV#DRS_NWB_ TRN_ACK.
6.23.1 Dependencies.
6.23 Process DRSC367.

6.23.2.1 Job Dependencie:
6.23.2.2 Implementation
6.23.2.3 Rerun action...

6.24 SCHEDULE M_} DB SRVEDRS NWB. EOD.
6.24.1 Dependencies.
6.24.2 Process DRSC-

6.24.2.1 Implementatior
6.24.2.2 Job Dependencies
6.24.2.3 Rerun action...

6.25 SCHEDULE M_I DB  SRVHDRS. COLD. BU...
6.26 SCHEDULE M_DB_SRV#DRS_COMPLETE...

7 DEBIT CARD SCHEDULE DETAILS..

7A SCHEDULE M_DB_SRV#DRS_EFT_SOD.
1 Dependencies...
.2 Process DRSC350..
1 Implementation.
2 Job Dependencies
3 Rerun action... - .
(CHEDULE M. DB I “SRVADRS I EFT ANALYZE..
7.21 Dependencies..
7.2.2 Process DRSC368..
72.21 Job Dependencies.
7.2.2.2 Implementation...
7.2.2.3 Rerun action...

7.3. SCHEDULE M_DB_SRV#DRS_EFT_RUN_AGT
7.4 SCHEDULE M_DB_SRV#DRS_EFT_C12_PARS

7.4.1 Dependencies.
7.4.2 Process DRSC30

QR

7.4.2.1 Implementation
7.4.2.2 Job Dependencies.
74.2.3 Rerumaction.

Process DRSC312.
7 Implementation.....
74.3.2 Job Dependencies.
7433 Rerun action.
7.5. SCHEDULE M_DB_SRV#DRS_EFT_MS_DAY.
7.5.1 Dependencies.
7.5.2. Process DRSC310 [DAY]
7521 Implementatio:
75.2.2 Job Dependencies
75.2.3 Rerun action..
7.6 SCHEDULE M DB I SRV#DRS. EFT C2 Pl _D.
7.6.1 Dependencies.
7.6.2 Process DRSC307..

7.6.2.1 Implementation...
76.2.2 Job Dependencies
7623 Rerunaction.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 11 of 183
FUJ00090719

FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

7.6.2.3.1  DRSC307 Job Reset Procedure.

7.6.3 Process DRSC308..
7.6.3.1 Implementation..
7.6.3.2 Job Dependencies
7.63.3 Rerum action...

7.7 SCHEDULE M_DB  SRV#E DRS I EFT. PAUS. AGT
78 SCHEDULE M_DB_SRV# DRS_EFT_C2_P2_D.

7.8.1 Dependencies.
7.8.2 Process DRSC307..

7.8.2.1 Implementatioi
7.8.2.2 Job Dependencies
7.8.2.3 Rerum action,

7.8.3 Process DRSC30:
7.83.1 Implementation.......

78.3.2 Job Dependencies.
78.3.3 Rerun action.

7.9 SCHEDULE M_DB_SRV# DRS_EFT_C2_P1_SU
7.9.1 Dependencies.
7.9.2 Process DRSC307

7.9.2.1 Implementatioi
7.9.2.2 Job Dependencies
7.9.2.3 Rerun actio

7.9.3. Process DRSC308.

7931 Implementation.
7.9.3.2 Job Dependencies...
7.93.3 Rerun action.

7.10 SCHEDULE M_DB_SRV#DRS_EFT_SOB.
7.10.1 Dependencies.
7.10.2 Process DRSC.

7.10.21 Implementatioi
7.10.2.2 Job Dependencies
7.10.2.3 Rerun action...

7.11 I SCHEDULE M DB I SRV#DRS, EFT ‘C4LD_ 1
TALL Dependencies.
7AL2 Process DRSC305.
TAL Implementatior
7AN2.2 Job Dependencie:
7112.3 Rerun action.
7.113 Process DRSC306.
7113.1 Implementatio:

7113.2 Job Dependencies.
7113.3 Rerun action.
7.12 I SCHEDULE M_DB_SRV#DRS_EFT_C4LD_’

TAZA Dependencies...
712.2 Process DRSC305
7.12.2.1 — Implementatioi
7.12.2.2 Job Dependencies
7.12.23 Rerun action...
712.3 Process DRSC306,
7.12.31 Implementation.
7.12.3.2 Job Dependencies.
7.12.3.3 Rerun action.......
7.13 SCHEDULE M_DB_SRV#DRS_EFT_C4_PARSE
1 Dependencies.
2 Process DRSC302.
2.1 Implementation.
2.2 Job Dependencies.
2.3

13.
13.
7
7
7. Rerun action...

1
13
13

Bao

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 12 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
7.13.3 Process DRSC370......c.csssessssessssseeessssieesssseenssesessssesenssessersneesssineessnineesssiaessieesssenesssieneesnee 70

7.13.31 Implementation. . . 70
7.13.3.2 Job Dependenc
TL Rerun action...
7.14 SCHEDULE M_DB_SRV#DRS_EFT_TPS_COPY.
7.14.1 Dependencies
714.2 Process DRSC303.
7.14.21 Implementation.
7.14.2.2 Job Dependencies.
7.14.23 Rerun action..
7.15 I SCHEDULE M_DB I SRVEDRS ) EFT_MS NIGHT.
TAS Dependencies.
7.AS.2 Process DRSC310 (NIGHT,
7.15.2.1 Implementation...........
7.15.2.2 Job Dependencies. 72
7.15.2.3 Rerun actio
7.16 SCHEDULE M_DB_SRV#DRS_EFT_MS I EXCPTN
7.16.1 Dependencies...
7.16.2 Process DRSC311...
7.16.2.1 Implementation.
7.16.2.2 Job Dependencies.
7.16.2.3 Rerun action........
7.17 SCHEDULE M_DB I SRVEDRS EFT_REP_101
TATA Dependencies
TAI2 Process DRSC322.
TATA Job Dependencies
7.7.2.2 Implementatior
717.23 Rerun action...
7.17.3 Process DRSC324.
7AT3A Job Dependencies
7732 Implementation
7.17.33 Rerun action... -
7.18 SCHEDULE M_1 DB SRVEDRS I EFT REP_ 102
TAB Dependencies.
718.2 Process DRSC320.
7.18.21 Job Dependencies.
7.18.2.2 Implementatior
7.18.2.3 Rerun action.
7.18.3 Process DRSC323.
7.18.3.1 Job Dependenc
Implementation...
3.3 Rerun action.
7.18.4 Process DRSC325
TAB.41 Job Dependencie:
7.18.42 Implementation.
7.18.43 Rerun action
7.19 SCHEDULE M_DB_SRV#DRS_EFT_ADMIN.
TAO Dependencies.
7.19.2 Process DRSC361....
719.21 Job Dependencies.
7.19.2.2 Implementatio
7.19.2.3 Rerun action...
7.19.3 Process DRSC368.
7.19.3.1 Job Dependen
7.19.3.2 Implementation.
7.19.33 Rerun action........
794 Script DRSX362.sh.
719.41 Job Dependencies. convene
7.19.4.2 Implementation...

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 13 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

7.19.4.3 Rerun action...
TIS DRS_EFT_AUDI
7.20 SCHEDULE M_DB_SRV#DRS_EFT_TRN_ACK.
7.20.1 Dependencies.
7.20.2 Process DRSC367.
7.20.21 Job Dependencie:
7.20.2.2 Implementation.
7.20.2.3 Rerun action.
7.21 SCHEDULE M_DB_SRV#DRS_EFT_EOD.
7.21.1 Dependencies.
7.21.2 Process DRSC.
7.21.21 Implementatioi
7.21.22 Job Dependencies
7.21.23 Rerun action...

8 DRS TABLES OVERVIEW........

8.1 COMMON TABLES.
8.2. SYSTEM PARAME
8.3. DRS TABLES........
8.3.1 Static Data Tables.
8.3.2. Control/Registry Data Tables.
8.3.3. Transaction Data Tables.

9 FILES CREATED/USED...

91 INPUT AND OUTPUT DATA FILES

9.1.1 Network Banking & Electronic Top-Ups.

OAL C4/D Input.

9.1.2 Debit Card...
9121 C2 Output
9.1.2.2 C2 Status Input.

1.23 C40 (Zero-Value-Confirmations) Input.......c.--ccssosesssvessesesveseesesvsseeuesseseensnnsseessseeeennseeeseseeee 87
9.1.24 — S Input
9.1.2.5 C4/D Input.

9.2 REPORT FILES.

9.2.1 Network Banking (Including ETU) and Debit Card.

9211 MSU Report Files.

9.21.2 TIP Report and Acknowledgement Files...

9.3 ORACLE Export FILES FOR AUDIT, ARCHIVE AND ‘SUPPORT.

93.1 Network Banking and Debit Card...

3.11 Oracle Export Files for Support...

9.3.1.2 Oracle Export Files for Archive.
9.3.1.3 Oracle Export Files for Audit.

10 SUPPORT USAGE OF ARCHIVE/SUPPORT EXPORT FILES.

1 BACKUP AND RECOVERY....

11.1 BACKupP.

11.2) RECOVERY...
11.2.1 Process Failure.
11.2.2 System Failur
11.2.3 Media Failure...

12 EXTERNAL SYSTEM FAILURES/RESTARTS..

12.1 C12 CONFIRMATION AGENT FAILURE
12.2. TPS Host/AGENT FAILURE.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE

FU.
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

FUJ00090719
IJ00090719

12.2.1 C112 Confirmation Agent Failure.

12.2.2.‘ TPS Host failure... secssseee
12.3. RDDS Host DATABASE FAILURE
12.4 TES Host DATABASE FAILURE..
12.5 FTMS REPORT-FILE TRANSFER FAILURE........ ceseeeee sees ID
12.6 MAESTRO FILE TRANSFER FAILURE...
12.7 AUDIT SERVER FILE TRANSFER FAILUR'

13 TUNING

13.1 ORACLE TUNING
13.2 SCHEDULE TUNING..
13.2.1 Schedule parallelism
13.2.2 Resource pools.
13.3. MAIN STORE PARTITION 1

13.4 SQL HINT TUNING.

15 APPENDIX A - NETWORK BANKING MAESTRO SCHEDULE.

16 APPENDIX B - DEBIT CARD MAESTRO SCHEDULE.

17 APPENDIX C - TABLESPACES AND RAW VOLUMES..

18 APPENDIX D - DRS TABLES.

18.1. COMMON TABLE.. oe
18.2. NETWORK BANKING TABL
18.3. DEBIT CARD TABLES.

19 APPENDIX E — DRS EXCEPTIONS...

20 APPENDIX F —- DRS ARCHIVING TABLE MAPPING...

21 APPENDIX G — DRS FILE HOUSEKEEPING PARAMETER...

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 15 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

1 ‘Introduction

1.1. Document Overview

This document describes the operational requirements of the DRS application. The
document also describes the procedures for supporting and tuning the application.

The introduction of ETU and NSI transactions at S50 are considered, for the
purposes of this document, to be a subset of Network Banking transactions. The
DRS is not performing any ETU or NSI specific functionality.

Like other pathway host systems, the DRS application has been designed to fail-
over from one data centre to the fallback data centre without the need for operator
intervention. The restart which requires an operator intervention can be done on
the fall-over data centre.

DRS application performs two main functions during a business day:

1. Provide a high throughput Reconciliation Service handling Debit Card, and
Network Banking transactions in large volumes. Also, for Debit Card provide
a real time Transaction Processing System for forwarding the [C2]
confirmation messages to the Confirmation Agents. At S75, Network Banking
transactions will also be transformed into [C2] confirmation messages for the
TES.

2. Provide an Online Database for 91 (configurable) days to support the
Reconciliation Reports and the Online Query and Resolution System.

The database schema and application modules that primarily deal with the first
function have been designed to provide high throughput and make use of
parallelism in processing.

The schema objects and modules (batch and online) that facilitate the second
function have been designed to meet the query requirements with quickest
response time.

Most DRS jobs that run as a part of the Network Banking and Debit Card Maestro
Schedules make use of checkpoints. These checkpoints are created/maintained in
the database and offer the following benefits:

¢ Minimise the work that needs to be re-done in the event of fail-over from
one data centre to the other.

e Prevent duplicate report files being produced for the report clients
(MSU/Audit/TIP).

¢ Avoid re-creating transient objects and data in case of a re-start.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 16 of 183
FUJ00090719
FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

The DRS Maestro schedule must be run once for each calendar day’. DRS
records the Current Working Day in the database in order to ensure that a process
is not run twice or not skipped in the event of fail-over from one data centre to the
other.

The document provides the following appendices for quick reference:
Appendix A — Network Banking Maestro Schedule

Appendix B — Debit Card Maestro Schedule

Appendix C — Tablespaces and Raw Volumes

Appendix D — DRS Tables

Appendix E — DRS Exceptions

Appendix F — DRS Archiving Table Mapping

Appendix G — DRS File Housekeeping Parameters

‘ETS schedule items where distinct from NBS are included in the NBS schedule

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 17 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
1.2. DRS Data Flow Diagram
PO Ltd H
Transaction File to and from DRS TP ' TIP
[DCSM] or dblink copy to/from TES Workstation 1
c2 C2 Status C4,D, User Reports
[DCSM} $[DCSM] Query
— DRS
C2 Out C4/D/S In Host
Agent Interfaces
Report ‘a
Tables Audit
Server
c2 C4/D/S
Output Input
Table Tables
Accounting
Weeks RODS
T Client info
Local
C12 Reference (
Input Data
Table Cash Alc Info
TIP Receipts
Non Polled
tt meat I TPs
Agent Interfaces Batch
Confirmation C12 In Confirmation C112 In J
C112
C12 [embedded C2] cit
Transactions from Agents from Riposte from Counters

The C12 transaction parts are input into DRS database through Agents calling an
Oracle Stored Procedure.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 18 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

DCS C2 transaction parts are output to the MA through Agents using a file
interface. At S75, NBS C2 transaction parts are copied from the DRS by the TES
Host application over a database link.

The C112 transaction parts are input into DRS from TPS over a unique database
link from DRS to TPS database The DRS requires financial C112 transaction parts
only, not Balance Enquiry's or PIN changes. Furthermore a list of Non Polled
Offices and TIP receipted Cash Account Lines are also input into DRS from TPS.

At S75, NBS C4/D transaction parts are copied from the TES Host application
over a database link. These transactions are written directly into the DRS C4/D
daily main and daily main exception tables. The existing NWB C4/D file load
process will remain throughout the S75 migration period.

At S80, the cash account is replaced by the branch trading statement. This will
entail removing the NB103 report and supporting processes. Additionally some
NB102 report titles will be modified. The DRS changes are detailed in the high
level design [R15].

The Account Week and Client Information are input into DRS from RDDS. Again,
the data is copied over a unique database link from DRS to RDDS database.

The DRS produces a number of ASCII Text Reconciliation Reports which are
transferred to the MIS Workstation, POCL TIP and the Audit Server.

The Network Banking and Debit Card transactions stored in DRS database are
sent to the Audit Server in Archive format.

The DRS Workstation accesses the DRS database for MSU On-line Queries.

Within DRS Host the transaction parts C12, C4, D and S are first stored in XML
format as received from the Agents. The C112 transaction parts are copied directly
from TPS transaction table to DRS transaction table. Therefore, C112 transaction
parts are not stored in XML format.

Next, the DRS Parse and Load Process parses, validates and loads the data into a
set of Daily Input tables. These tables are transient and are emptied every day. Any
transaction parts which fail the validation are stored in Daily Exceptions tables.

At S60 new functionality is required to enable the Receipt Date to be correctly set
on DCS C4/D transaction parts derived from Streamline EMIS files. The full
requirements are defined in Design Proposal [R10].

Finally, the DRS Match and Merge Process reads the Daily Input and Exceptions
tables and moves the matched and merged data into a permanent storage called
DRS Main Store. The data in DRS Main Store is kept for a configurable number
of days currently set to 91 days.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 19 of 183
Fujitsu Services

FUJ00090719

FUJ00090719

Ref: NB/MAN/003

Version: 5.0

DRS Host Support Guide

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

All the Reconciliation Reports and MSU On-line Queries access data from DRS
Main Store. The Reconciliation Reports and MSU On-line Queries also make use
of the reference data copied from TPS and RDDS.

Installation

Environment Variables

All the DRS environment variable names and values are present in the
“/home/drs/.vars” file. When a DRS user logs in, all the variables are "exported" so
that they become available to the DRS executables.

The following table lists the name and values of all the environment variables used
by DRS.

The “Accessed by” column in the table below indicates that this directory is
accessed by another application through NFS to move the data in and out of DRS.
The details of the data access will be specified in the IPDU Main Host Platform

Specification or the relevant Application Specification/User Guide.

Environment Variable Value Accessed by
ORACLE_HOME <Path-of-the-Oracle-Home>
ORACLE SID DRS
NWB_AUDIT_OUTPUT /ovnw01/drs/trans/drsaudit AUDIT SERVER
NWB_MSU_OUTPUT /bvnw01/drs/trans/drsmsu SSC SERVER
NWB_TIP_OUTPUT /ovnw01/drs/trans/nwbtip FTMS
NWB_NBE_INPUT /bvnw01/drs/trans/nwbC4Din I MAESTRO NBE IN
NWB_SUPPORT_OUTPUT /bvnw01/drs/trans/drssupport I SSC ARCHIVE SERVER
NWB_ARCHIVE_OUTPUT /ovnw01/drs/trans/drsarchive I SSC ARCHIVE SERVER
NWB_EXPORT_LOG /ovnw01/drs/trans/drsexplog SSC ARCHIVE SERVER
EFT_AUDIT_OUTPUT /ovnw01/drs/trans/drsaudit AUDIT SERVER
EFT_FILE_AUDIT /bvnw01/drs/trans/depfileaudit I AUDIT SERVER
EFT_MSU_OUTPUT /bvnw01/drs/trans/drsmsu SSC SERVER/DCSM
SERVER
EFT_TIP_OUTPUT /bvnw0l/drs/trans/efitip FTMS
EFT_NBE_INPUT /bvnw01/drs/trans/eftC4DSin DCSM SERVER
EFT_C2_INPUT /ovnw01/drs/trans/eftC2in DCSM SERVER
EFT_C2_OUTPUT /ovnw01/drs/trans/efiC2out DCSM SERVER
EFT_SUPPORT_OUTPUT /bvnw01/drs/trans/drssupport I SSC ARCHIVE SERVER
EFT_ARCHIVE OUTPUT /ovnw01/drs/trans/drsarchive _I SSC ARCHIVE SERVER

© 2005 Fujitsu Services

COMMERCIAL_IN_CONFIDENCE

Page: 20 of 183
Fujitsu Services

DRS Host Support Guide

COMMERCIAL_IN_CONFIDENCE

Ref:

Version:

Date:

FUJ00090719
FUJ00090719

NB/MAN/003
5.0

13/04/2005

EFT_EXPORT_LOG

/ovnw01/drs/trans/drsexplog,

SSC ARCHIVE SERVER

DRS_CONNECT_STR

drs

DRS_PROC /app_sw/drs/c

DRS_SH /app_sw/drs/sh

DRS_SQL /app_sw/drs/sql
EXCP_USER ORAEXCP/EXCP123
DATA_CENTRE_CHAR WwW

TZ Set to the format described in

the Host handover note e.g.
GMTOBST —
1,M3.5.0/1:00:00,M10.5.0/2:0
0:00

NLS_DATE_FORMAT DD-MON-YYYY

NLS_LANG AMERICAN_UNITED
KINGDOM. WESISO8859P 1

LD_LIBRARY_PATH <Path-of-the-Oracle-
Home>/lib:/usr/lib:/opt/epe/li

b:/usr/include

PATH

/bin:/usr/bin:<Path-of-Oracle-
Home>/bin:/app_sw/drs/c:/ap
p_sw/drs/sh

The syntax of TZ can be described as follows:

TZ > zone

I zone signed_time
I zone signed_time zone
I zone signed_time zone dst

zone > letter letter letter
signed_time > sign time

I time
time > hour

I hour : minute

I hour : minute : second
dst > signed_time

I signed_time: dst_date
dst_date > date/time
date > Jjulianone

I julianzero

I Mmonth.week.day
month > -
week >
day >
letter >
hour > 00/0102).
minute > 00\01)02I
second > 00I01\02I.

© 2005 Fujitsu Services

COMMERCIAL_IN_CONFIDENCE

Page: 21 of 183
FUJ00090719
FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
julianzero > Of )2).... (365
julianone > 12/3)... [366
sign > -I+

For more information, refer to the UNIX manual pages for “tzset”

2.2 Directories

Following table lists the directories for Network Banking and Debit Card. The
table also shows the minimum storage required on the file-system for these
directories. The actual space allocated could be more and will be set by the System
Administrator [ISD].

No I Directory Name Owner Group Unix Live Size (in
Mode Mbytes)
1. I /oracle/DRS/bdump oracle8i dba 750 100
2. I /oracle/DRS/cdump oracle8i dba 750 100
3._I /oracle/DRS/udump oracle8i dba 750 100
4._I /archredo/DRS oracle8i dba 750 20000
3. I /home/drs (Home directory drs pathway 770 180
common to all 9 DRS Unix
Users)
6. I /ovnw01/drs/trans/drsaudit drs pathwa 770 1200
7.__I /bvnw01/drs/trans/drsmsu. drs pathway 770 6000.
8.__I /bvnw01/drs/trans/drssupport drs pathway 770 9000
9.__I /ovnw01/drs/trans/drsarchive drs pathwa 770 3000.
10. I /ovnw01/drs/trans/drsexplog drs pathway 770 200
LL. I /app_sw/drs/c drs pathway 550 200
12. I /app_sw/drs/sh drs pathwa 550. 10
13. I /app_sw/drs/sql drs pathway 550 10
14. I /db_build/DRS oracle8i pathway 770 100
15. I /ovnw0 l/drs/trans/nwbtip drs pathway 770 5500
16. I /bvnw01/drs/trans/nwbC4Din drs pathway 770 8000.
17. I /ovnw01/drs/trans/efitip drs pathway 770 600
18. I /bvnw01/drs/trans/efiC4DSin drs pathway 770 1500
19. I /ovnw01/drs/trans/eftC2in drs pathway 770 200
20. I /ovnw01/drs/trans/eftC2out drs pathway 770 1000
21. I /ovnw01/drs/trans/depfileaudit I drs pathway 770 1500
2.3. Unix Users
The following Unix users are used by DRS Application for Network Banking and
Debit Card:
Unix User Name Group Home Profile
oracle8i dba /home/oracle8i /home/oracle8i/.profile
drs pathway /home/drs /home/drs/.profile

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 22 of 183
Fujitsu Services

DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
drsnwb pathway /home/drs /home/drs/.profile
drsnwbl pathwa /home/drs /home/drs/.profile
drsnwb2 pathway /home/drs /home/drs/.profile
drsnwb3 pathway /home/drs /home/drs/.profile
drsnwb4 pathwa /home/drs /home/drs/ profile
drsnwb5 pathway /home/drs /home/drs/.profile
drsnwb6 pathway /home/drs /home/drs/.profile
drsnwb7 pathway /home/drs /home/drs/.profile
drsnwb8 pathway /home/drs /home/drs/.profile
drseft pathway /home/drs /home/drs/.profile
drseftl pathway /home/drs /home/drs/.profile
drseft2 pathway /home/drs /home/drs/.profile
drseft3 pathway /home/drs /home/drs/.profile
drsefi4 pathway /home/drs /home/drs/.profile
drseft5 pathway /home/drs /home/drs/.profile
drsefté pathway /home/drs /home/drs/.profile
drseft7 pathway /home/drs /home/drs/ profile
drsefi8 pathway /home/drs /home/drs/.profile
<User Name> for Pathway /home/drs /home/drs/.profile
DRS Workstation
Security Manager

2.4 Oracle Tablespaces and Raw Volumes

The details of storage space allocated to DRS database for both Network Banking
and Debit Card are present in Appendix C — Tablespaces and Raw Volumes.

2.5 Database Roles and Users

2.5.1 Roles

DRS has following Oracle roles which are

Debit Card:

used for both Network Banking and

Role Name_ I Roles

System Privs

Granted Granted

Description

ALT_MAIN
_STORE

Role has been granted to DRS-Host users
“OPSSDRSNWB” and "OPSSDRSEFT" in
order to allow them to add/drop the
partitions of tables
DRS_RX_NWB MAIN STORE and
DRS_RX_EFT_MAIN_ STORE

AUDITOR I MONITOR

Role defined for use by Internal/External
auditors of the system

BMC CONNECT Role has been granted to “BMC_USER” in
RESOURCE order to support the BMC Patrol and.
Knowledge Modules
MONITOR e Select Any Role made available for all users that
Table require query-only access to the system
SECURITY e Alter User Role has been defined for use by support

© 2005 Fujitsu Services

COMMERCIAL_IN_CONFIDENCE Page: 23 of 183

FUJ00090719
FUJ00090719
Fujitsu Services

FUJ00090719
FUJ00090719

DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
_MANAGE © Drop User staff who are authorised to administer
R ¢ Grant Any Role I support users and to investigate security
¢ Select Any breaches
Table
© Create User
ssc MONITOR Role has been defined for use by SSC
(EDSC) Support which will act as third
line support team for the DRS Application
TMS Role is used by the NBS [C12] agents and
has been granted to users
“TMS_NWB_USER” and
"TMS_EFT_USER" to allow the agents to
call the DRS-interface to transfer [C12]
XML records. This role has got the object
privileges necessary to harvest C12
messages into DRS database.
DRS_EXCE I CONNECT Role has been granted to user “ORAEXCP”
PTIONS RESOURCE to enable it to log an operational exception
DRS_BATC I CONNECT Ie Create Role is used all DRS batch users. It has
H RESOURCE Procedure been granted to users “OPSSDRSNWB” ,
* Select Any “OPSSDRSNWBI...8”, OPSSDRSEFT and
Table OPS$DRSEFT1...8.
Insert Any
Table
© Create Session
© Create Public
Synonym
© Update Any
Table
© Delete Any
Table
Drop Public
Synonym
Create Database
Link
© Create
Sequence
© Create Public
Database link
© Create
Synonym
© Drop Public
Database Link
© Create Table
* Create View
© Select Any
Sequence
MSU CONNECT Role will be been granted to DRS
RESOURCE Workstation users. in order to enable them
to access the DRS Database. The DRS.

© 2005 Fujitsu Services

COMMERCIAL_IN_CONFIDENCE Page: 24 of 183
FUJ00090719
FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

Workstation users will be created on

demand.
TES_USER I CONNECT Role is used by the TES copy processes and
Ss RESOURCE TES Query applications and has been

granted to user “DRSTES” to allow the
processes to extract parsed [C2] messages.
This role has got the object privileges
necessary to read [C2] messages from DRS.
database.

APPSUP. CONNECT All System Role has been defined for use by ISD
RESOURCE I privileges belong I Support which will act as first line support
to the DBA role. team for the DRS Application

DB_MONIT I CONNECT © Select Any Role has been defined for use by ISD.
OR Table Support which will act as first line support
team for the DRS Application
UNXADM CONNECT Role has been defined for use by ISD
RESOURCE Support which will act as first line support
DBA team for the DRS Application

2.5.2 Oracle Users
DRS has following Oracle Users which are used for both Network Banking and

Debit Card:

User Default Temp Roles Privs Description

Name Tablespace I Tablespace I Granted Granted

BMC_U I USER_TAB I TEMP BMC User is used by the

SER LESPACE BMC/Patrol scripts to
connect to the DRS
database and fetch details
about operational
exceptions

ORAEX I USER_TAB I TEMP DRS_EXCEP User is used to connect to

cP LESPACE TIONS the DRS database via a
concurrent connection in
order to log an operational
exception

OPS$D I USER_TAB I TEMP DRS_BATC Owns the DRS schema.

RS LESPACE H Has been granted the DBA
role in order to allow the
build to create objects in
all user tablespaces and to
allow executing jobs that
perform
purge/housekeeping
functions

OPS$M I USER_TAB I TEMP ¢ Select I Used by the Metron

ET_DR I LESPACE Any performance monitoring

Ss Table I tool to gather database
statistics

OPS$D I USER_TAB I TEMP DRS_BATC Used to execute single

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 25 of 183
FUJ00090719
FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
RSNWB I LESPACE H instance jobs including
ALT_MAIN_ Main-Store partition
STORE creation for Network
Banking
OPSSD I USER_TAB I DRS_TEMP I DRS_BATC Used to execute the
RSNWB I LESPACE 1.8 H multiple instance jobs for
1.8 Network Banking
OPS$D I USER_TAB I TEMP DRS_BATC Used to execute single
RSEFT I LESPACE H instance jobs including
ALT_MAIN_ Main-Store partition
STORE creation for Debit Card.
OPS$D I USER_TAB I DRS_TEMP I DRS_BATC Used to execute the
RSEFTI I LESPACE 1...8 H multiple instance jobs for
8 Network Banking/Debit
Card.
DRSN USER_TAB I TEMP CONNECT User owns the PL/SQL
WBAG I LESPACE RESOURCE package interface used by
ENT the Horizon NBS Agents

for transferring [C12]
XML for NWB to DRS.

TMS_N I USER_TAB I TEMP CONNECT Used by the Horizon NBS
WB_US I LESPACE RESOURCE Agent/s to connect to the
ER DRS database for

transferring [C12] XML
for NWB via the PL/SQL
package interface to DRS.

DRSEF I USER_TAB I TEMP CONNECT User owns the PL/SQL
TAGEN I LESPACE RESOURCE package interface used by
T the Horizon NBS Agents
for transferring [C12]
XML for DCP to DRS.
TMS_E I USER_TAB I TEMP CONNECT Used by the Horizon NBS
FT_US_ I LESPACE RESOURCE Agent/s to connect to the
ER DRS database for

transferring [C12] XML
for DCP via the PL/SQL
package interface to DRS.

DRSTE I USER_TAB I TEMP CONNECT Used by the TES copy
Ss LESPACE TES_USERS process to access the DRS
C2 tables.

2.5.3 DRS Workstation Users

DRS Workstation users will be created on demand as per Access Control Policy
(RS/POL/003). The DRS Workstation users include the MSU or SSC users who
will be accessing the DRS database using DRS Workstation Application and one
or more DRS Workstation Security Manager users who will be creating and
managing DRS Workstation MSU and SSC users.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 26 of 183
FUJ00090719
FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

2.5.3.1 DRS Workstation Security Manager Setup
The procedure for DRS Workstation Security Manager user setup is as follows:

e MSU/SSC will fill the application form as defined in RS/PRO/040 (Application
for Access to the Live Network) to create a new Unix user account on the
Host as per the following details:

User Name: As per RS/PRO/040
User Description: DRS Workstation Security Manager
User Home Directory: /home/drs
Unix Profile: /home/drs/.profile
User Group: pathway
e Host Administrator/DBA (ISD) will create a Unix user account. Also, they will
create an Oracle account (OPS$<Unix User Name>) in the DRS database. The

Oracle account will be identified "externally". That is, no explicit password will
be assigned to the Oracle account.

e Host Administrator/DBA (ISD) will grant SECURITY_MANAGER role to
the newly created Oracle account. The SECURITY_MANAGER role already
exists in the DRS database.

For example, the SQL commands to create an Oracle user account for the Unix
user "arrism" and grant the required role are:

(Connect to DRS database as the Oracle user "sys" or a user with DBA privileges)

SQL> create user ops$arrism identified externally
default tablespace USER_TABLESPACE temporary tablespace TEMP:
SQL> grant SECURITY_MANAGER to ops$arrism;

2.5.3.2. DRS Workstation User Account Setup
The procedure for DRS Workstation user account setup is as follows:

e MSU/SSC will fill the application form as defined in RS/PRO/040 (Application
for Access to the Live Network) to create a new Oracle account in the DRS
database.

¢ The DRS Workstation Security Manager will create the DRS Workstation user
account by running a Unix shell script. The script will also create the necessary
Oracle synonyms and grant user the privileges to access the DRS database.

e The Security Manager will confirm to user that account has been created along
with password to use for first logon (the user will automatically be forced to
change this).

The steps required by the Security Manager to create a DRS Workstation user are
as follows:

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 27 of 183
FUJ00090719
FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

2.5.4

2.5.5

e Login to the Host as Security Manager Unix user.

e Execute the following command on the Unix prompt (the shell script is present
in the directory "/app_sw/drs/sh" but the directory has been included in the
PATH):
create_drs_workstation_user.sh <Oracle_User_Name> <Oracle_User_Password>

Where the <Oracle_User_Name>
- must start with the letters DRSWKSNWB for Network Banking users and
DRSWKSEFT for Debit Card Project users.
- can be up to 30 characters long and should contain only letters and numbers.
The <Oracle_User_Password>
- must be at least 6 chars long.
- must be a mixture of alphanumeric characters i.e. a mixture of letters and numbers
(must contain at least 1 char in the range a-z,A-Z and 1 char in the range 0-9).
- must not have two consecutive characters the same.
- can not be the same as the username.

The successful execution of the script displays a number of messages on the
standard output. The exit code of the shell script must be 0 (After running the
script, check the exit code using the command echo $?).

DRS Workstation User Account Closure
The procedure for DRS Workstation user account closure is as follows:

e¢ MSU/SSC will fill in the account closure application form as defined in
RS/PRO/040.
e ISD will lock the user account using the following commands:
(Login to the Host as Security Manager Unix user)
sqlplus /
SQL> alter user <Oracle_User_Name> account lock;
SQL> quit;
DRS Workstation User Account Unlocking
The DRS will lock MSU/SSC Oracle user accounts following 3 unsuccessful logon
attempts. In the event of this
© Call will be raised with ISD.

e ISD will unlock the account. If the password has been forgotten, it will be
reset and the account status will be set to "password expired"(to force
password change on first use). The procedure for unlocking the account
and/or resetting the password follows:

(Login to the Host as Security Manager Unix user)
sqlplus /

SQL> alter user <Oracle_User_Name> account unlock:

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 28 of 183
FUJ00090719
FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

SQL> alter user <Oracle_User_Name> identified by <Temporary_Password>;
SQL> alter user <Oracle_User_Name> password expire:
SQL> quit;

¢ Confirmation will be sent by ISD to the user that the account has been
unlocked along with temporary password to use (the user will automatically be
forced to change this at the first logon).

3. Maestro Resources

No Maestro resources have been explicitly defined in the DRS Network Banking
and Debit Card project schedules.

4 Transaction Volumes and Database Storage
Capacity

This section has been included only for reference and to provide a brief description
of the expected data volume and the method used to estimate the database storage
required. The details of the current and the estimated transaction volumes are
available in [R3]. The details of the sizing analysis for the DRS database are
available in [R4].

As described in [R4], the DRS database can handle Phase-2 ‘Design-Limit’
volumes of 4.45 million (combined) Network Banking, Debit Card and Electronic
Top-Up transactions. Further, to handle situations where all the transactions for a
day are not harvested until the following day, i.e., two days of transactions are
harvested on a single day, the DRS tables have been sized to handle up to 8.6
million transactions.

The storage required for the DRS Main Store table, which keeps the data online
for up to 91 days, has been estimated as follows:

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 29 of 183
FUJ00090719
FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

Measure Value

Peak daily transactions (Contract Limit) 3,711,000

Peak daily transactions (Design Limit) 4,445,000

Number of Days for which the data is stored 91 Days

Average Main Store record size 460 bytes

Maximum Main Store record Size 767 bytes

Database Storage required for one day considering average daily 3,711,000 * 767

transaction volumes where each record is of maximum size =2.65GB

Storage allocated at BI3 for one day’s Main Store data 2000MB

Additional Storage required input/output, Report tables and indexes 136GB

Total Database size considering peak daily transaction volumes 2000MB * 91 days +
136GB
=314GB

5 Process Failure and Recovery

DRS Host processes can fail due to Oracle, Application or System errors. The
various types of error conditions leading to process failure and the possible
recovery actions are common for most processes and are listed below:

5.1 Automatic re-run by Maestro

In some cases, if a process instance fails a recovery job is automatically started
by Maestro, which effectively reruns the process instance once.

For example, Maestro reruns a failed instance of C12 Parser. The auto rerun of
an instance is done only once. Subsequent failures on the same instance require
manual intervention.

5.2 Failures due to Oracle Error

In case of Oracle failures such as ‘Object does not exist’ or ‘Insufficient Oracle
privileges’ or ‘Insufficient Rollback segments’ or ‘Unable to access database
links’ and others, an Operational Exception is logged in the DRS Operational
Exceptions table along with the SQL statement that caused the failure.

Please refer to Oracle message manual (or “oerr ORA ####” from a command
prompt) for advice on the appropriate recovery action for all such failures.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 30 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

5.3

6.1

6.1.1

6.1.2

Failures due to Application and System Error

In case of Application errors such as invalid reference data or reference data
does not exist, an exception to indicate process failure is raised and recorded in
the DRS Operational Exceptions table which would be highlighted by BMC /
PATROL.

In case of System errors such as errors related to the Operating System please
refer to the Operating System manual for advice on the appropriate recovery.

All DRS processes can be restarted after rectifying the cause of failure.

Network Banking Schedule Details

This section describes all the Schedules and Jobs listed in Appendix A — Network
Banking Maestro Schedule. The Network Banking Maestro Schedule includes
network banking specific jobs and the jobs which are common (like Reference
Data Copy) between Network Banking and Debit Card.

For each job in the schedule, a brief description is included along with
implementation details, Job dependencies (if any) and Rerun action in case of a
failure.

Implementation includes the Job name as used in the Maestro Schedule. Full
details of the Jobs including the command-line parameters being passed can be
found in Appendix A — Network Banking Maestro Schedule.

Schedule M_DB_SRV#DRS_NWB_SOD

This is the start of the DRS Network Banking schedule. It will start after the
database restart on completion of cold backup at around 8am.

Dependencies

Follows successful completion of the DRS Network Banking schedule for the
previous logical processing day (implemented via a dependency on
DRS _NWB_BATCH_COMPLETE.FLAG).

Precedes schedules © DRS_RDDS_EXTRACT, DRS_NWB_RUN_AGT,
DRS_NWB_MS_DAY and DRS NWB_SOB.

Process DRSC350

Process DRSC350 runs at the start of the DRS Network banking day to set the
working day for the schedule, create the Main Store
(DRS_RX_NWB_MAIN STORE) partition for that working day and re-set
various flags.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 31 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

The DRS working day is controlled by two logical dates that are stored as “DRS
SYSTEM DATE” and “PARTITION RECEIPT DATE” system parameters for
the Application Type "NWB" in the database. These dates normally correspond to
the System Date on the Rig with the exception of a post fail-over catch-up
situation where the dates could lag by one or more days.

At S75, DRSC350 has been revised to perform partition maintainence on the NBS
C2 tables. New partitions are created and old partitions dropped. The
DRS_NRT_INTERFACE METADATA table is updated to reflect the partition
state of each C2 output table.

6.1.2.1 Implementation

Implemented in the M_DB_SRV#DRSC350N job (postfix "N" stands for Network
Banking).

6.1.2.2. Job Dependencies

This job is dependent on the Maestro resource DRSC350LK. This is necessary so
that DRSC350N and DRSC350E do not run at the same time. This resource has a
value of I and will hold up the running of DRSC350N until it is available.
DRSC350E has the same dependency.

6.1.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery

Additionally, a migration specific Application error could occur in the form of
process failure when run for the first time on the Rig. The reason for such an error
could be missing values for “DRS SYSTEM DATE” and “PARTITION RECEIPT
DATE” system parameters in DRS_SYSTEM_PARAMETERS table. These
parameters are created with NULL values as a part of DRS database and schema
build and must be set by ISD to the value of Unix System Date one day prior to
running the BI3 schedule for the first time. The details of how to set these dates in
DRS_SYSTEM_PARAMETERS table are available in the DRS _ Delivery
Handover Note.

The process can be restarted after rectifying the cause of failure.

Note that it is possible due to the unavoidable implicit database commit performed
when adding/dropping table partitions that, in some esoteric failure scenarios, the
partition metadata will be out of sync with the actual partitions. In this situation, re-
running the SOD process will potentially fail.

In this scenario it will be necessary to confirm whether the metadata/partitions are
inconsistent by running a script provided by development.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 32 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

If the partitions/metadata are inconsistent it will be necessary to manipulate either
to remedy the situation. Given that the remedial activity will be dependent on a
number of variables including whether any data has been written to the new
partitions etc, a call should be raised with 4" line support.

In some situations, typically in test, it is desirable to run DRSC350 more than once
in a calendar day. The default (build) value of the
PROCESS_DAY_MULTIPLE_RUNS_YN flag in the DRS_PROCESSES table
for the DRSC350 process is ‘N’ so would prevent this. Therefore the
PROCESS DAY MULTIPLE RUNS YN flag should be changed to ‘Y’ to
allow this if required.

WARNING - This should only be done in Live at the guidance of development.

6.2 Schedule M_DB_SRV#DRS_ETU_C4LD

The schedule runs DRSC305 to load the ETU file containing C4/D messages into
the NWB C4SD input table and then DRSC306 to parse the C4/D messages into
the C4/D daily main tables.

6.2.1 Dependencies
Follows successful completion of the schedules DRS_NWB_SOD and
DRS_ETU_BATCH_COMPLETE.FLAG.

6.2.2 Process DRSC305

This process reads [C4/D] XML records from a data-file whose absolute filename
is passed to it on command-line by Maestro and loads them into the
FTMS_ RX NWB C4SD input table.

The input data-file/s are read from directory $NWB_NBE_INPUT and are
renamed to change their extension to lowercase once they have been successfully
processed.

6.2.2.1 Implementation
Implemented in M_DB_SRV#DRSC305T where the postfix "T" stands for ETU.

6.2.2.2. Job Dependencies

None

6.2.3 Process DRSC306

This process sets the value of DRS system parameter “C4SD FILE LOAD
COMPLETE” for Application Type "NWB" to ‘Y’ to indicate that all the DRS
C4/S/D files have been successfully loaded. Once this flag is set, all instances of

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 33 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

DRSC302 (see section 6.19.2) exit after processing the last set of C4/S/D input
records.

6.2.3.1 Implementation
Implemented in M_DB_SRV#DRSC306N.

6.2.3.2. Job Dependencies
Depends on successful completion of DRSC305T where the postfix “T’ stands for
ETU.

6.2.3.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

6.3 Schedule M_DB_SRV#DRS_NWB_ANALYZE

The schedule runs a job every day to gather the statistics for specified DRS
database objects. The statistics are used by Oracle optimiser to improve the query
performance.

6.3.1 Dependencies
Follows successful completion of the M_DB_SRV#DRS_NWB_SOD.

6.3.2 Process DRSC368

The process reads the table DRS_ANALYZED_OBJECTS for the details of DRS
database objects to be "ANALYZED". It then runs DBMS_STATS package or
SQL command "ANALYZE" to gather and store statistics on the objects specified.
This is required when ever a tables data content changes or a partition is dropped
as part of Start of Day. In this way Workstation Query and Report Generation
performance can be optimised.

6.3.2.1 Job Dependencies

None.

6.3.2.2. Implementation

Implemented in the M_DB_SRV#DRSC368N_1 job (the postfix "N" stands for
Network Banking).

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 34 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

6.3.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

6.4 Schedule M_DB_SRV#DRS_RDDS_EXTRACT

This schedule runs DRSC364, which copies RDDS reference data for Routing
Gateways and Accounting Weeks into DRS.

The schedule is common between Network Banking and Debit Card.

6.4.1 Dependencies

This schedule follows the successful completion of the schedule DRS_NWB_SOD
and DRS_EFT_SOD.

6.4.2 Process DRSC364

Process DRSC364 refreshes accounting weeks
(RDDS_ACCOUNTING_WEEKS), routing gateways
(RDDS_ROUTING_GATEWAYS) tables and clients (RDDS_CLIENTS) using
corresponding tables/views in RDDS-Host system. The RDDS objects are
accessed via a pre-defined database link. The RDDS table names from where the
data is copied from are DRS_ACCOUNTING_WEEKS,
DRS_ROUTING_GATEWAYS and DRS_CLIENTS respectively.

6.4.1.1 Implementation
Implemented in M_DB_SRV#DRSC364C (the postfix "C" stands for Common).

6.4.1.2 Job Dependencies

None.

6.4.1.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery. The exception to the rerun action described
in the common section is that Maestro will continue processing in case of a
process failure. No page message will be sent to first-line support. Operational
exception/s will be logged and they can be used for error analysis and resolution.

6.5 Schedule M_DB_SRV#DRS_NWB_RUN_AGT

This schedule contains jobs that set the appropriate run state in table
TMS_ART_DRS to allow the C12 agents to call the C12-interface to populate the
DRS database and informs the schedule that C12 agents can populate the database.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 35 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

6.6

6.6.1

6.6.2

6.6.2.1

The schedule and job details have been provided by the TMS agent team. Refer to
[R7] for further details.

Schedule M_DB_SRV#4DRS_NWB_C12_PARS

This schedule runs multiple instances of the DRS [C12] parse and load process.
The schedule becomes active after completion of DRS start-of-day and continues
until the DRS end-of-day processing has completed.

Dependencies

Follows successful completion of DRS Network Banking schedule
DRS_NWB_SOD and DRS NWB_RUN_AGT.

Precedes schedule DRS_COLD_BU.

Process DRSC301

This process reads [C12] XML records from TMS_RX_NWB_C12 (C12-Input),
parses and loads them into the DRS_RX_NWB C12 and
DRS_RX_NWB_C12_EXCP tables.

Maestro invokes eight instances of DRSC301 at the start of the schedule.

The process polls the C12-Input table once there are sufficient records to be
processed in the input table or after a timeout occurs whose duration in seconds is
taken from the value of “HORIZON C12 INPUT ALERT TIMEOUT” system
parameter.

The process can be re-run during a DRS processing Day and every run of the
process, which is not a_ re-start, will create a new entry in
DRS_ PROCESS CONTROL.

Introduced at S75, the DRSC301 instances will write NBX transactions (as
derived from Logical FI) into a set of partitioned C2 tables. These tables are used
to copy C2 transactions in the TES.

The process execution is controlled by the value of system parameter “DRS
PROCESSING DAY COMPLETE”. At the end of DRS processing day, the
parameter value is set to “N” by DRSC351, which would result in all eight
instances of DRSC301 exiting successfully.

Implementation

Implemented in the M_DB_SRV#DRSC301N_1...8 jobs (the postfix "N" stands
for Network Banking).

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 36 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

6.6.2.2 Job Dependencies

None

6.6.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery. As listed in this section, if an instance of
DRSC301 fails, Maestro automatically reruns the failed instance once. If it fails on
the rerun, Maestro does not attempt any further automatic reruns for that instance.
Any failures would result in operational exceptions being logged which can be
used for fault analysis/resolution.

6.6.3 Process DRSC312

At regular intervals (every C12_MONITOR_SLEEP_INTERVAL seconds), this
process summarises entries made by the ClI2 parsers into the
DRS_C12_APP_7YP_MONITOR table. Where an entry for the relevant time
interval and routing gateway doesn’t exist, the process will insert a new record.
Where an entry already exists it will update the Transaction_Count, Failed_Count,
Failure_Percentage and Alert values as appropriate. If the failure percentage
exceeds a threshold value (C12. MONITOR_FAILURE_THRESHOLD), in
addition to inserting or updating a row in the monitor table, it will write an entry
into the application log file which is monitored by Tivoli. See [R11] for full details
of file format and path.

Only one instance of the program must be run at any time (per app_type). This
program will be run once during a day as part of DRS Start of Day , if it fails it can
be restarted. . Processing is complete when DRSC351 sets the summary complete
flag (C12_MONITOR_COMPLETE) to Y when the end of the DRS processing

day occurs.
. Implementation
Implemented in the M_DB_SRV#DRSC312N job (the postfix "N" stands for
Network Banking).
. Job Dependencies
None

6.6.1.1 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 37 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

6.7 Schedule M_DB_SRV#DRS_NWB_MS DAY

This schedule runs DRS Main Store Processing (DRSC310) during the day until
17:01 hours at a configurable interval currently set to 30 minutes. This is to enable
MSU (Management Support Unit) querying on transaction parts which arrived late
in DRS. The same process DRSC310 is also used as part of the Batch overnight
schedule. See section 6.21 for details.

6.7.1 Dependencies

This schedule follows the successful completion of the schedule
DRS_NWB_SOD.

6.7.2 Process DRSC310 [DAY]

The "DAY" run of the process picks up only those transaction parts for processing
which have Receipt Date older than the current Partition Receipt Date. The value
of current Partition Receipt Date is derived from DRS System Parameter
"PARTITION RECEIPT DATE" and APPLICATION_TYPE [refer to System
Parameters for details].

This process reads the transaction parts [C12/C112/C4/S/D] from Daily Input
tables [DRS RX NWB C12, DRS RX NWB C112, DRS RX NWB C4,
DRS_RX_NWB_D and DRS_RX_NWB S] in the order of their arrival sequence
in DRS. No [S] transactions are expected for Network Banking. The transaction
parts are matched on necessary elements and the State Information is derived and
set in chronological order once for the arrival of cach transaction part. The
resulting transaction record containing all the available transaction parts and the
State Information is then inserted into DRS_RX_NWB_MAIN_STORE table. The
process also inserts a copy of Main Store record into
DRS_RX_NWB_MAIN_ STORE UPDATES to facilitate fast reporting.

Multiple instances of the process can be run in parallel. Each instance can process
a set number of Daily Input table partitions.
6.7.2.1 Implementation

This process has been implemented in M_DB_SRV#DRSC310DN_x, where x is
the instance number ranging from I to 8 and the postfix "DN" stands for Day and
Network Banking.

6.7.2.2, Job Dependencies

None

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 38 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

6.7.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

6.8 Schedule M_DB_SRV#DRS_NWB_SOB

This schedule runs the first job of the DRS batch overnight for Network Banking
which is Start of the Batch overnight.

6.8.1 Dependencies
Follows successful completion of TPS schedule TPSCAREP.
Precedes schedule DRS_NWB_TPS_COPY.

6.8.2 Process DRSC353

This job runs at the start of the DRS batch overnight process on completion of the
TPS TIP and the APS Client Host processing jobs.

It sets the value of system parameter “BATCH JOB STARTED” for Application
Type "NWB" to “Y” to inform the DRS Workstation that the batch overnight has
started and all subsequent connections should be read-only. It also ‘kills’ the
SQL*Net connections made by DRS workstation users (all Oracle usernames
starting with “DRSWKS”) to the database using the SQL statement “ALTER
SYSTEM DISCONNECT SESSION...”

6.8.2.1 Implementation
Implemented in job M_DB_SRV#DRSC353N (the postfix "N" stands for Network
Banking).

6.8.2.2 Job Dependencies

None.

6.8.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

6.9 Schedule M_DB_SRV#TES_AL_REC_RUN

This schedule is defined in [R12] and contains all jobs associated with producing
REC files for Alliance and Leicester. It is included in this document because it
contains the DRS job DRSC371N. See 6.15.2 for more details.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 39 of 183
FUJ00090719

FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
6.9.1 Dependencies

See [R12].
6.9.2 Job DRSC371N

The TES_TX_C4 and the TES_TX_D tables will be partitioned by a single
numeric column (PARTITION_ID) and the TES will create a new partition in
each table for each Routing Gateway’s delivery of data to the DRS.

For each table in turn, the DRS [C4/D] copy process should select all rows from
TES_PARTITION_CREATES and where a row contains a status value ‘AVAIL’
use the partition_id value to qualify the selection of transactions from the input
table.

Following processing of all the rows, within each partition:

1. a single row will be written into table APPLICATION_ACCESSES to
indicate that the data within the partition has been accessed and is no
longer required by DRS.

2. The TES PARTITION_CREATES row status value should be
updated to ‘USED’

3. A new row should be inserted into the
TES_PARTITION_STATUS_HISTORY table to reflect the change in
partition status. The status should be set to ‘AVAIL’ and the create
date value set to sysdate.

A single commit at this point ties-up the retrieval of the data with the indicator to
TES that the data is no longer required. This ensures re-runnability of the job
without needing any special condition processing.

Each available partition is processed in-turn for both the C4 and the D tables. The
following processing is performed for each row within each partition:

All rows from the partition will be inserted into the C4 daily table using a single
SQL INSERT INTO....SELECT FROM.... statement. This gives maximum
performance since all of the data operations are contained within the Oracle
instance and Oracle can manage parallel DML. However, there is a remote
possibility that this may result in a duplicate primary constraint or other schema
constraint violations. If this is the case, then the partition must be read and inserts
performed on a row-by-row basis. This will be done in a similar manner to the
existing C4/D parsers; the existing DRS HLD describing these parsers is repeated
here for clarity:

If an insert fails due to unique key violation, the insert will be re-attempted using
only the primary key values and after incrementing the sequence number value.
Non-key data will not be mandatory and so does not require default values. The

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 40 of 183
FUJ00090719
FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

duplicate flag will be set to indicate that this exception is a duplicate. The data
exception flag will accordingly not be set. Once the duplicate record entry has
been made in the respective Daily table, the entire record (including non-primary
key values) will be inserted into the corresponding exception table. Alerts will be
raised for exception conditions as deduced from insertion. The C4/D type daily
tables will be constrained in order to validate each record’s value to the respective
domains. If a record cannot be inserted due to check constraint violation on
one/more columns of the daily table, the record will be inserted using the database
default values for all non-primary key columns. A copy of the erroneous record
will be inserted into the C4/D Exceptions table along with the error details.

6.9.2.1 Implementation
Implemented in the M_DB_SRV#DRSC371N job (the postfix "N" stands for
Network Banking).

6.9.2.2, Job Dependencies

None

6.9.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery. As listed in this section, if an instance of
DRSC371 fails, Maestro automatically reruns the failed instance once. If it fails on
the rerun, Maestro does not attempt any further automatic reruns for that instance.
Any failures would result in operational exceptions being logged which can be
used for fault analysis/resolution.

6.10 Schedule M_DB_SRV#TES_CAPO_REC_RUN

This schedule is defined in [R12] and contains all jobs associated with producing
REC files for Card Account. It is included in this document because it contains the
DRS job DRSC37IN. See 6.15.2 for more details.

6.10.1 Dependencies
See [R12].

6.10.2. Job DRSC371N

See 6.15.2 for more details.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 41 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

6.11 Schedule M_DB_SRV#TES_LINK_REC_RUN

This schedule is defined in [R12] and contains all jobs associated with processing
LREC files from LINK. It is included in this document because it contains the
DRS job DRSC371N.

6.11.1. Dependencies
See [R12].

6.11.2 Job DRSC371N

See 6.15.2 for more details.

6.12 Schedule M_DB_SRV#DRS_NWB_C4_ PARSE
This schedule runs multiple instances of the DRS [C4/D] parse and load process.

6.12.1 Dependencies
Follows successful completion of schedule DRS_ETU_C4LD.DRSC306N.
Precedes schedule DRS_NWB_MS_NIGHT.

6.12.2 Process DRSC302

This process reads [C4 /D] XML records from FTMS_RX_NWB_C4SD (C4D-
Input), parses and loads them into the DRS_RX_NWB_{C4ID} and
DRS_RX_NWB_{C4ID}_EXCP tables respectively.

Maestro invokes eight instances of DRSC302 at the start of the schedule.

The process polls the C12-Input table at periodic intervals after a pause whose
duration in seconds is taken from the value of “C4SD PAUSE WAIT LIMIT”
system parameter.

The process execution is controlled by the value of system parameter “C4SD FILE
LOAD COMPLETE” for Application Type "NWB". The parameter value is set to
“N” by process DRSC306 on successful completion of all C4SD file load jobs and
this would result in all eight instances of DRSC302 to exit after processing the last
let of records from the C4/D input table.

6.12.2.1 Implementation

Implemented in the M_DB_SRV#DRSC302N_1...8 jobs (the postfix "N" stands
for Network Banking).

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 42 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

6.12.2.2 Job Dependencies

None

6.12.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery. As listed in this section, if an instance of
DRSC302 fails, Maestro automatically reruns the failed instance once. If it fails on
the rerun, Maestro does not attempt any further automatic reruns for that instance.
Any failures would result in operational exceptions being logged, which can be
used for fault analysis/resolution.

6.13 Schedule M_DB_SRV#DRS_NWB_TPS_COPY

This schedule runs DRSC303, which copies [C112] transactions from TPS-Host to
DRS. This schedule is run daily however [C112] transactions are also copied on a
weekly basis just prior to NB103 report generation. See section 6.5 for more
details.

6.13.1 Dependencies
This schedule follows the successful completion of the schedule DRS_NWB_SOB.

6.13.2 Process DRSC303

Multiple instances of the process can be run in parallel. Each instance can process
a set number of Daily Input table partitions.

The process fetches data from the TPS table view over the database link "tps". The
data is extracted from TPS tables TMS_RX_NWB_TRANSACTIONS_n ("n" is
partition number) and inserted into DRS partitioned table DRS_RX_NWB_C112.
The TPS database has one physical table for each partition whereas DRS database
has one partitioned table to store the C112 data.

All transactions are copied where the value of the column
FINACIAL_TRANSACTION is set to 1 in the TPS table. If an error occurs
during an insert the record is inserted into the C112 daily exceptions table
(DRS_RX_NWB_C112_EXCP) and the appropriate flags are set in the DRS
C112 daily table (DRS_RX_NWB C112).

6.13.2.1 Implementation

This process has been implemented in M_DB_SRV#DRSC303N_x, where x is the
instance number ranging from I to 9 and the postfix "N" stands for Network
Banking. A 9" instance of the process is run to deal with any TIP repaired
transactions in the 65" partition.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 43 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

6.13.2.2 Job Dependencies

None

6.13.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

6.14 Schedule M_DB_SRV#DRS_NWB_MS NIGHT

This schedule runs DRS Main Store Processing (DRSC310) as "batch-overnight"
to process all the transaction parts [C12/C112/C4/D] received in DRS since the
last run of the schedule. The same process DRSC310 is also used as part of the
daily schedule. See section 6.9 for details.

6.14.1 Dependencies

This schedule follows the successful completion of the schedule
DRS_NWB_C4_PARSE and DRS_NWB_TPS_COPY.

This schedule precedes the schedule DRS_NWB_MS_EXCPTN.

6.14.2 Process DRSC310 [NIGHT]

The ‘NIGHT’ run of the DRSC310 process picks up all the transaction parts for
processing which have Receipt Date less than or equal to the current Partition
Receipt Date. The value of current Partition Receipt Date is derived from DRS
System Parameter "PARTITION RECEIPT DATE" for the Application Type
"NWB" [refer to System Parameters for details].

This process reads the transaction parts [C12/C112/C4/S/D] from Daily Input
tables [DRS_RX_NWB C12, DRS RX NWB C112, DRS RX NWB C4,
DRS_RX_NWB_D and DRS_RX_NWB SI] in the order of their arrival sequence
in DRS. No [S] transactions are expected for Network Banking. The transaction
parts are matched on necessary elements and the State Information is derived and
set in chronological order once for the arrival of each transaction part. The
resulting transaction record containing all the available transaction parts and the
State Information is then inserted into DRS_RX_NWB_MAIN_ STORE table. The
process also inserts a copy of Main Store record into
DRS_RX_NWB_MAIN_STORE_UPDATES table where the transaction part(s)
had the Receipt Date less than the current Partition Receipt Date to facilitate fast
reporting.

Multiple instances of the process can be run in parallel. Each instance can process
a set number of Daily Input table partitions.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 44 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

6.14,2.1 Implementation

This process has been implemented in M_DB_SRV#DRSC310NN_x, where x is
the instance number ranging from I to 8 and the postfix "NN" stands for Night
Network Banking.

6.14.2.2 Job Dependencies

None

6.14.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

6.15 Schedule M_DB_SRV#DRS_NWB_ MS EXCPTN

This schedule runs DRSC311, which copies records from the daily exception
tables into the corresponding main store exception tables.

6.15.1 Dependencies

This schedule follows the successful completion of the schedule
DRS_NWB_MS NIGHT.

6.15.2 Process DRSC311

The purpose of this module is to merge those DRS Transaction parts [C112, C12,
D, C4, S] that are in exception with the corresponding DRS main exception tables.
No [S] transactions are expected for Network Banking.

Only one instance of the program must be run at any time. Multiple instances could
result in duplicate rows being inserted into the main exception tables.

All the transaction parts that have the value of Receipt Date less than or equal to
the current Partition Receipt Date are processed. The value of current Partition
Receipt Date is derived from DRS System Parameter "PARTITION RECEIPT
DATE" for the Application Type "NWB". The record is validated to check it
exists in the Main Store (DRS_RX_NWB_MAIN_STORE) and the current state
of the transaction part in exception is derived or copied from the main store.

After a record has been successfully processed and inserted into the Exceptions
Main table, the PROCESSED_YN flag for the corresponding record in Daily
Exceptions table is set to “Y’.

6.15.2.1 Implementation

Implemented in M_DB SRV#DRSC311N (the postfix stands for Network
Banking).

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 45 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

6.15.2.2 Job Dependencies

None

6.15.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

6.16 Schedule M_DB_SRV#DRS_TPS_EXTRCT_D

This schedule executes the process DRSC366, which transfers the data about the
TPS Outlets last polled and Cash Accounts delivered to TIP from the TPS-Host
database. Note that at S80, no Cash Account information will be returned however
the process will remain in the schedule to copy non-poll information.

6.16.1 Dependencies

Follows successful completion of the schedules DRS_RDDS_EXTRACT,
DRS NWB MS EXCPTN and DRS EFT MS EXCPTN. Precedes schedule
DRS_NWB_REP_101.

This schedule is also dependent on the TPS job TPSREP.TPSC234.

6.16.2 Process DRSC366

The purpose of this DRS _ host program is to copy
TPS_OUTLETS_LAST_POLLED and TPS_TIP_CA_RECEIPTS from TPS to
their corresponding DRS tables through Oracle Views via database link.

6.16.1.1 Job Dependencies

None

6.16.1.2 Implementation

Implemented in the M_DB_SRV#DRSC366C job (the postfix "C" stands for
Common).

6.16.1.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

6.17 Schedule M_DB_SRV#DRS_NWB_REP_101

This schedule contains jobs that generate the Network Banking NB101 report.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 46 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

This Schedule is run daily after the DRS Main store processing and DRS Main
exception merge from daily exception tables.
6.17.1 Dependencies

Follows after successful completion of schedule DRS_NWB_MS_EXCPTN and
DRS_TPS_EXTRCT_D

Precedes schedule DRS_NWB_REP_000

6.17.2 Process DRSC322

The purpose of this DRS host program is to extract all C4 Transactions for each
Routing Gateway from DRS Main Store (DRS_RX_NWB_MAIN_STORE), Main
Store Updates (DRS_RX_NWB_MAIN STORE_UPDATES) and C4 Exception
Main table (DRS_RX_NW B_C4 EXCP_MAIN) tables against each settlement
date, received for the current Run date i.e., DRS Processing date. The extracted
information is then populated onto the DRS NBIO! Results table
(DRS_REP_NWB_RESULTS_NB101).

This program does not create any report files.

6.17.2.1 Job Dependencies

None

6.17.2.2 Implementation
Implemented in the M_DB_SRV#DRSC322N job (the postfix "N" stands for
Network Banking).

6.17.2.3. Rerun action
The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

6.17.3 Process DRSC324
The purpose of this DRS host program is to Generate NB101 Reconciliation

report for the current Run date. Data is extracted from
DRS_REP_NWB_RESULTS_NB101 table and written to the report text files.
6.17.3.1 Job Dependencies

Follows successful completion of M_DB_SRV#DRSC322N.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 47 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

6.17.3.2 Implementation
Implemented in the M_DB_SRV#DRSC324N job (the postfix "N" stands for
Network Banking).

6.17.3.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

6.18 Schedule M_DB_SRV#DRS_NWB_REP_102

The generation of DRS Network Banking NB102 reconciliation report involve
three functional steps:

1. Population of Intermediate tables DRS_REP_NWB_STATE_TOTALS

(process DRSC320).

2. Population of Result tables DRS_REP_NWB_RESULTS_NB102_1...12
(process DRSC323).

3. Producing the report text files on the Host operating system (process
DRSC325).

Jobs in this schedule perform the above-mentioned three steps.
This Schedule is run daily after successful completion of NB101 Reconciliation
report generation.

6.18.1. Dependencies

Follows after successful completion of schedule DRS_NWB_MS_EXCPTN and
DRS_TPS_EXTRCT_D.

Precedes schedule DRS_NWB_REP_000.

6.18.2 Process DRSC320

The purpose of this DRS host program is to populate the DRS State Totals table
(DRS_REP_NWB_STATE_TOTALS) from the transactions held within the DRS
Main store (for current day’s transactions), DRS Main Store Updates and the DRS
Exception tables for NB102 reports.

This program does not create any report files.

6.18.2.1 Job Dependencies

None

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 48 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

6.18.2.2 Implementation

Implemented in the M_DB_SRV#DRSC320N job (the postfix N stands for
Network Banking).

6.18.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

6.18.3. Process DRSC323

The purpose of this DRS host program is to populate the 12 tables of DRS report
NB102 results (DRS_REP_NWB_RESULTS_NB102_1...12) where each table
corresponds to a section of the report.

To derive this information records from the DRS Main Store
(DRS_RX_NWB_MAIN_ STORE), Exceptions Main tables
(DRS_RX_NWB_{C12\C112\C4ISID}_ EXCP_MAIN) and the State totals table
(DRS_REP_NWB_STATE_TOTALS) is populated into DRS NBIO2 result
tables. No [S] transactions are expected for Network Banking.

For performance this process is run twelve times, once for each section to be
produced. Sections 1,6,7 and 12 are run sequentially, then after these have finished
execution, sections 2,3,4,5,8,9,10 and 11 are run in parallel.

Please note that sections do not take similar lengths of time to run. For instance
sections 5 and 11 can take up to 30 to 40 minutes, while other sections may be
over in a few seconds.

This program does not create any report files.

6.18.3.1 Job Dependencies
This Program DRSC323N follows after successful completion of DRS host
program DRSC320N.

6.18.3.2 Implementation
Implemented in the M_DB_SRV#DRSC323N_x job. Where N is for Network
Banking and x is the section number.

6.18.3.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 49 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

6.18.4 Process DRSC325

The purpose of this DRS host program is to Generate NB102 Reconciliation
report for the current Run Date. Data is extracted from
DRS_REP_NWB_RESULTS_NB102_1...12 tables and written to text files.

This program is scheduled to run daily.

6.18.4.1 Job Dependencies
This Program follows successful completion of all M_DB_SRV#DRSC323N_x
jobs, where N is for Network Banking and x is the value all the sections run in
parallel in job DRSC323.

6.18.4.2 Implementation
Implemented in the M_DB_SRV#DRSC325N job (the postfix N stands for
Network Banking).

6.18.4.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

6.19 Schedule M_DB_SRV#DRS_NWB_REP_000
This schedule runs DRS328C job which produces Nil Returns Report.

6.19.1 Dependencies

Follows after successful completion of schedule DRS_NWB_REP_101 and
DRS_NWB_REP_102.

Precedes schedule DRS_NWB_ADMIN.

6.19.2 Process DRSC328

The purpose of this DRS host program is to create the DRS Nil Return Report
NBOOO.

This program displays reports produced for all routing gateways for the current
run date. For routing gateways where no transactions have been reported, a ‘[NIL
RETURN] entry is displayed on the report. Data is extracted from
DRS_REP FILE REGISTER, DRS_REPORTS and
RDDS_ROUTING_GATEWAYS to be written to a text file.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 50 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

6.19.2.1 Job Dependencies

None

6.19.2.2 Implementation

Implemented in the M_DB SRV#DRSC328C job (where "C" stands for
Common).

6.19.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

6.20 Schedule M_DB_SRV#DRS_ADMIN

The schedule generates the Database statistics.

6.20.1 Dependencies
Follows successful completion of DRS_NWB_REP_000.

6.20.2 Script DRSX365

This Unix shell script generates Database statistics such as Oracle Tablespace
usage, Extents and Data segments available.

6.20.2.1 Job Dependencies

None

6.20.2.2 Implementation

Implemented in the M_DB_SRV#DRSX365C job (the postfix "C" stands for
Common).

6.20.2.3. Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

6.21 Schedule M_DB_SRV#DRS_NWB_ADMIN

This is the Database housekeeping schedule. The schedule archives and purges
data and housekeeps file older than the pre-defined retention period.

6.21.1 Dependencies
Follows successful completion of DRS_ADMIN.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 51 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

Precedes schedule DRS_NWB_TRN_ACK

6.21.2 Process DRSC361

The purpose of this module is to Archive Control, Data and Report tables to
Support and Audit requirements and Archive/Purge Data and Report tables older
than the Retention period for Archive server. The archive files stored under
Archive server are for future references. The old data is cleared to make space for
the new data. Entries from the table DRS_ARCHIVED_ TABLES are used for
archive parameters and criteria. The records that go into this table are also present
in the form of a spreadsheet in Appendix F — DRS Archiving Table Mapping.

This module uses Oracle Export/Import method to archive data as specified in the
DRS High Level Design [R1].

Only one instance of the program must be run at any time. Multiple instances at
the same time could result in corrupt export dump files being created.

If the data purge process fails due to the process not being able to get exclusive
access to the table to purge, an exception is raised and it continues to the next
table. The next time the purge process is run it will purge two days worth of data.
Some of the tables (like the daily tables) can only hold around three days worth of
data, so three failures in a row will give problems.

6.21.2.1 Job Dependencies

None.

6.21.2.2 Implementation

Implemented in the M_DB_SRV#DRSC36I1N job (the postfix "N" stands for
Network Banking).

6.21.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

6.21.3 Process DRSC368

Please refer to the section 6.3.2 for details of the process.

6.21.3.1 Job Dependencies
Follows the successful completion of M_DB_SRV#DRSC36IN job.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 52 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

6.21.3.2 Implementation
The job runs every day. Implemented in the M_DB_SRV#DRSC368N_3 job (the
postfix "N" stands for Network Banking).

6.21.3.3 Rerun action
The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

6.21.4 Script DRSX362

The purpose of this Unix shell script is to housekeep various input/output files.
Entries from the table DRS_FILES_TO HOUSEKEEP are used as parameters for
file deletion.

6.21.4.1 Job Dependencies

This job should follow after successful completion of the job DRSC361N.

6.21.4.2 Implementation
Implemented in the M_DB_SRV#DRSX362N job (the postfix "N" stands for
Network Banking).

6.21.4.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

6.22 Schedule M_DB_SRV#DRS_NWB_PAUS_AGT

This schedule contains jobs that set the appropriate run state in table
TMS_ART_DRS to inform the C12 agents about DRS End-of-Day and to wait for
the C12 agents to complete execution. This job should run at 23:30.

The schedule and job details have been provided by the TMS agent team. Refer to
[R7] for further details.

6.23 Schedule M_DB_SRV#DRS_NWB_TRN_ACK

The schedule contains a job that checks for delivery status of report files by FTMS
to the TIP remote gateway.
6.23.1 Dependencies
Follows after successful completion of Schedule DRS_NWB_ ADMIN
Precedes Schedule DRS_NWB_EOD

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 53 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

6.23.2 Process DRSC367

Report files created by DRS in the S$NWB_TIP_OUTPUT (for Network Banking)
directories are transferred by FTMS to the TIP remote gateway. For each report
file transferred, FTMS creates a delivery receipt (acknowledgement) file.

Process DRSC367 harvests file receipt information by checking for report file
delivery success in the delivery receipt files. If found, it renames the files and
updates the TIP Receipt date in DRS_REP_FILE_REGISTER for the
corresponding report file.

6.23.2.1 Job Dependencies

None

6.23.2.2 Implementation
Implemented in the M_DB_SRV#DRSC367N job (the postfix "N" stands for
Network Banking).

6.23.2.3. Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

6.24 Schedule M_DB_SRV#DRS_NWB_EOD
This schedule runs the last job/s of the DRS batch overnight for Network Banking.

6.24.1 Dependencies

Follows successful completion of schedules DRS_NWB_ TRN_ACK and
DRS_NWB_PAUS_AGT.

Precedes schedule DRS_COLD_BU.

6.24.2 Process DRSC351

This process sets the value of DRS system parameter “DRS PROCESSING DAY
COMPLETE” to ‘Y’ to indicate completion of the DRS Processing Day to all
Network Banking instances of DRSC301 and cause them to exit successfully.

6.24,2.1 Implementation

Implemented in M_DB SRV#DRSC351N (the postfix "N" stands for Network
Banking).

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 54 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

6.24.2.2 Job Dependencies

None

6.24,.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

6.25 Schedule M_DB_SRV#DRS_COLD_BU

This schedule contains jobs that ‘couple’ the BCV to bring it line with the active
volumes, shutdown the DRS database, split the BCV, start the DRS database and
backup the volumes from the BCV.

The schedule and job details have been provided by the ISD. Refer to [R5] for
further details.

6.26 Schedule M_DB_SRV#DRS_COMPLETE

This schedule contains a job that creates the Network Banking and Debit Card
schedule completion flags. These flags are used by Maestro to determine
successful logical completion of the processing.

The schedule and job details have been provided by the Maestro Development
team. Refer to [R5] for further details.

7 Debit Card Schedule Details

This section describes all the Schedules and Jobs listed in Appendix B — Debit
Card Maestro Schedule. The Debit Card Maestro Schedule includes just the Debit
Card specific jobs and NOT the jobs which are common (like Reference Data
Copy) between Network Banking and Debit Card.

For each job in the schedule, a brief description is included along with
implementation details, Job dependencies (if any) and Rerun action in case of a
failure.

Implementation includes the Job name as used in the Maestro Schedule. Full
details of the Jobs including the command-line parameters being passed can be
found in Appendix B — Debit Card Maestro Schedule.

7.1 Schedule M_DB_SRV#DRS_EFT_SOD

This is the start of the DRS Debit Card schedule. It will start after the database
restart on completion of cold backup at around 8am.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 55 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

TAA Dependencies

Follows successful completion of the DRS Debit Card schedule for the previous
logical processing day (implemented via a dependency on
DRS_EFT BATCH _COMPLETE.FLAG).

Precedes schedules © DRS_RDDS_EXTRACT, DRS_EFT_RUN_AGT,
DRS_EFT_MS_DAY, DRS_EFT_C2 P1_D, DRS_EFT_C2_P2_D,
DRS EFT C2 PI SU.

Process DRSC350

Process DRSC350 runs at the start of the DRS Debit Card day to set the working
day for the schedule, create the Main Store (DRS_RX_EFT_MAIN_STORE)
partition for that working day and re-set various flags.

The DRS working day is controlled by two logical dates that are stored as “DRS
SYSTEM DATE” and “PARTITION RECEIPT DATE” system in the database.
There are two sets of logical dates - one for NWB and EFT each. These dates
normally correspond to the System Date on the Rig with the exception of a post
fail-over catch-up situation where the dates could lag by one or more days.

7121 Implementation

Implemented in the M_DB_SRV#DRSC350E job (the postfix "E" stands for Debit
Card/EFTPoS).

7.1.2.2 Job Dependencies

This job is dependent on the Maestro resource DRSC350LK. This is necessary so
that DRSC350N and DRSC350E do not run at the same time. This resource has a
value of I and will hold up the running of DRSC350E until it is available.
DRSC350N has the same dependency.

7.1.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section 5-Process Failure and Recovery.

Additionally, a migration specific Application error could occur in the form of
process failure when run for the first time on the Rig. The reason for such an error
could be missing values for “DRS SYSTEM DATE” and “PARTITION RECEIPT
DATE” system parameters in DRS_SYSTEM PARAMETERS table. These
parameters are created with NULL values as a part of DRS database and schema
build and must be set by ISD to the value of Unix System Date one day prior to
the running the BI3 schedule for the first time. The details of how to set these
dates in DRS_SYSTEM_PARAMETERS table are available in the DRS Delivery
Handover Note.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 56 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

The process can be restarted after rectifying the cause of failure.

7.2. Schedule M_DB_SRV#DRS_EFT ANALYZE

The schedule runs a job every day to gather the statistics for specified DRS
database objects. The statistics are used by Oracle optimiser to improve the query
performance.

7.2.1 Dependencies
Follows successful completion of the M_DB_SRV#DRS_EFT_SOD.

7.2.2 Process DRSC368

Refer to the section 6.3.2 for details of the process.

7.2.21 Job Dependencies

None.

7.2.2.2 Implementation
Implemented in the M_DB_SRV#DRSC368E_1 job (the postfix "E" stands for
Debit Card/EFTPoS).

7.2.2.3. Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

7.3 Schedule M DB SRV4DRS_EFT_RUN_AGT

This schedule contains jobs that set the appropriate run state in table
TMS_ART_DRS to allow the C12 agents to call the C12-interface to populate the
DRS database and informs the schedule that C12 agents can populate the database.

The schedule and job details have been provided by the TMS agent team. Refer to
[R7] for further details.

7.4 Schedule M_DB_SRV#DRS_EFT_C12_PARS

This schedule runs multiple instances of the DRS [C12] parse and load process.
The schedule becomes active after completion of DRS start-of-day and continues
until the DRS end-of-day processing has completed.

TAA Dependencies

Follows successful completion of DRS Debit Card — schedule
DRS_EFT_RUN_AGT.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 57 of 183

FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

Precedes schedule DRS_COLD_BU.

742 Process DRSC301

This process reads [C12] XML records from TMS_RX_EFT_C12 (C12-Input),
parses and loads them into the DRS_RX_EFT_C12 and
DRS_RX_EFT_C12_EXCP tables for Debit Card. Maestro invokes eight
instances of DRSC301 at the start of the schedule.

The process polls the C12-Input table once there are sufficient records to be
processed in the input table or after a timeout occurs whose duration in seconds is
taken from the value of “HORIZON C12 INPUT ALERT TIMEOUT” system
parameter.

The process can be re-run during a DRS processing Day and every run of the
process, which is not a_ re-start, will create a new entry in
DRS PROCESS CONTROL.

The process execution is controlled by the value of system parameter “DRS
PROCESSING DAY COMPLETE”. At the end of DRS processing day, the
parameter value is set to “N” by DRSC351, which would result in all eight
instances of DRSC301 exiting successfully.

7.4.2.1 Implementation

Implemented in the M_DB_SRV#DRSC301E_1...8 jobs (the postfix "E" stands
for Debit Card/EFTPoS).

7.4.2.2 Job Dependencies

None

7.4.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section 5-Process Failure and Recovery. As listed in this section, if an instance of
DRSC301 fails, Maestro automatically reruns the failed instance once. If it fails on
the rerun, Maestro does not attempt any further automatic reruns for that instance.
Any failures would result in operational exceptions being logged which can be
used for fault analysis/resolution.

TA3 Process DRSC312

This process will query the C12 Daily table and C12 Daily Exceptions table, which
have C12 transactions for the current business day. The query will select all
transactions, group them by receipt time interval of m minutes which would be in
DRS_SYSTEM_PARAMETERS and calculate for each group what percentage of
transactions have failed. Any other values that are not defined in the parameter

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 58 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

value will be disregarded in computing failure percentage. The results of this query
will be written to a new summary table (DRS_C12_DAILY_SUMMARY) that
will hold 7 days (parameter defined in archived_tables) worth of data before being
house kept by the existing DRS housekeeping process. Should any of the
summarised records have a failure percentage greater than a parameterised value a
flag will be set in the summary and a message will be written to the application log.
The time interval, sleep time, failure threshold percentage and the response codes
are parameterised and kept in DRS_SYSTEM_PARAMETERS table to be able to
tune monitoring as required.

Only one instance of the program must be run at any time. This program should
only be run once during a day, if it fails it can be restarted. The module will sleep
for a certain period of time (also defined in DRS_SYSTEM_PARAMETERS)
before it runs again and refreshes the summary for the current processing day.
Processing is complete when DRSC306 sets the summary complete flag to Y when
the end of the DRS processing day occurs.

. Implementation
Implemented in the M_DB_SRV#DRSC312E job (the postfix "E" stands for
Network Banking).

. Job Dependencies
None

7.4.3.1 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

7.5 Schedule M_DB_SRV#DRS_EFT_MS_DAY

This schedule runs DRS Main Store Processing (DRSC310) during the day until
17:01 hours at a configurable interval currently set to 30 minutes. This is to enable
MSU (Management Support Unit) querying on transaction parts which arrived late
in DRS. The same process DRSC310 is also used as part of the Batch overnight
schedule. See section 7.16 for details.

751 Dependencies
This schedule follows the successful completion of the schedule DRS_EFT_SOD.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 59 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

75.2 Process DRSC310 [DAY]

The "DAY" run of the process picks up only those transaction parts for processing
which have Receipt Date older than the current Partition Receipt Date. The value
of current Partition Receipt Date is derived from DRS System Parameter
"PARTITION RECEIPT DATE" and APPLICATION_TYPE [refer to System
Parameters for details].

This process reads the transaction parts [C12/C112/C4/S/D] from Daily Input
tables [DRS_RX_EFT_C12, DRS_RX_EFT_C112, DRS_RX_EFT_C4,
DRS_RX_EFT_D and DRS_RX_EFT_S] in the order of their arrival sequence in
DRS. The transaction parts are matched on necessary elements and the State
Information is derived and set in chronological order once for the arrival of each
transaction part. The resulting transaction record containing all the available
transaction parts and the State Information is then inserted into
DRS_RX_EFT_MAIN_ STORE table. The process also inserts a copy of Main
Store record into DRS_RX_EFT_MAIN_STORE_UPDATES to facilitate fast
reporting.

Multiple instances of the process can be run in parallel. Each instance can process
a set number of Daily Input table partitions.

75.21 Implementation
This process has been implemented in M_DB_SRV#DRSC310DE_x, where x is
the instance number ranging from I to 8 and the postfix "DE" stands for Day and
Debit Card/EFTPoS.

7.5.2.2 Job Dependencies

None

7.5.2.3. Rerun action

The common process failure scenarios and rerun actions are described in the
section 5-Process Failure and Recovery.

7.6 Schedule M_DB_SRV#DRS_EFT_C2 P1_D

This schedule runs the jobs to generate the first (see section 7.9 for details of
second Payment File run) Payment File and load back the Status File produced by
the DCS C2 Agent. The schedule runs Monday to Saturday at 15:00 hours.

7.6.1 Dependencies
Follows successful completion of schedule DRS_EFT_SOD.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 60 of 183
FUJ00090719
FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

7.6.2 Process DRSC307

The process extracts the contents of C2 Output (DRS_TX_EFT_ C2) table into a
data file containing C2 XML messages. The data file is created in the directory
defined by the environment variable EFT_C2_OUTPUT.

The process extracts all C2 XML records from the C2 Output table where the
PROCESS_STATUS is set to "I" (Initial) and writes these records to a data file in
order of Merchant Number, Receipt Date and Sequence number in the ascending
order. After successfully writing a record to the file, the record's
PROCESS_STATUS is set to "T" (Transfer) and the RECORD_STATUS to "N"
(None).

If no records are found in C2 Output table for processing, the file is generated with
header and trailer records and the module exits with SUCCESS.

The single instance of the program can be run several times a day.

7.6.2.1 Implementation
Implemented in job M_DB_SRV#DRSC307E (the postfix "E" stands for Debit
Card/EFTPoS).

7.6.2.2 Job Dependencies

None.

7.6.2.3 Rerun action
The common process failure scenarios and rerun actions are described in the
section 5-Process Failure and Recovery.
. DRSC307 Job Reset Procedure
Execute the following script when logged in as ops$drs user:
update drs_tx_eft_c2
set record_status='N',
process _status='I',
transfer date='',
horizon_agent_error_code= aa
horizon_agent_error_message=''

where process _status='T';

This script will reset all records updated as part of the last DRSC307 run to allow
the transactions to be included in a future C2 Bulk File. Note that this script should

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 61 of 183
FUJ00090719

FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

NOT be run if DRSC308 has been run. The dependency revisions to the schedule
mean that DRSC308 will not run unless the S bulk process has completed
successfully.

WARNING ~ Indiscriminate use of this script can result in duplicate transactions being passed
to Streamline. Under no circumstances run this script unless absolutely sure that it is required.
This script should only be run where the payment run has been abandoned and no payment file
has been sent to Streamiine.

7.6.3 Process DRSC308

The process reads the C2 Status File sent by the DCS C2 Agent and updates the
C2 record status in the C2 Output (EFT_C2_OUTPUT) table. Once a record is
loaded successfully the record's PROCESS STATUS is set to "C" (complete and
the RECORD_STATUS to the value sent by the Agent. If the
RECORD_STATUS is received as "E" (Error) then the Agent Error Code and
Message are also updated in the C2 Output table.

The C2 Status File resides in the directory defined by the environment variable
EFT_C2_INPUT.

At present, the program is run twice every week day and Saturdays. It is run once
on Sunday. If no records are found in C2 status file for processing, the module
exits with SUCCESS.

7.611 Implementation
Implemented in job M_DB_SRV#DRSC308E (the postfix “E” stands for Debit
Card/EFTPoS).

7.6.1.2 Job Dependencies
Commencement of this job is dependent on completion of the job
DCSM_S BULK PID.DCSM_S BULK PI.

7.6.1.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section 5-Process Failure and Recovery.

7.7 Schedule M_DB_SRV# DRS_EFT PAUS_AGT
The schedule runs daily at 20:30 and signals the EFT C12 Agent to stop.

Once the C12 Agent has stopped, the schedule puts a 15 minutes delay before the
second Payment File generation for the day takes place. The 15 minutes gap
between stopping the C12 Agent and Payment File generation allows the C12

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 62 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

Parsers to catch up if there was a backlog in the C12 Input (TMS_RX_EFT_C12)
table.

The schedule and job details have been provided by the TMS agent team. Refer to
[R7] for further details.

7.8 Schedule M_DB_SRV#DRS_EFT_C2 P2_D

This schedule runs the jobs to generate second Payment File and load back the
Status File produced by the DCS C2 Agent. The schedule runs Monday to
Saturday at 20:30 hours.

7.8.1 Dependencies

Follows successful completion of schedule DRS _EFT_SOD and
DRS_EFT_PAUS_AGT.

7.8.2 Process DRSC307

Refer to the section 7.7.2 for the details of the process.

7.8.2.1 Implementation

Implemented in job M_DB_ SRV#DRSC307E (the postfix “E” stands for Debit
Card/EFTPoS).

7.8.2.2 Job Dependencies
None.

7.8.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section 5-Process Failure and Recovery.

7.8.3 Process DRSC308
Refer to the section 7.7.3 for the details.

7.8.3.1 Implementation
Implemented in job M_DB_SRV#DRSC308E (the postfix “E” stands for Debit
Card/EFTPoS).

7.8.3.2 Job Dependencies

Commencement of this job is dependent on completion of the job
DCSM_S_BULK_P2D.DCSM_S_BULK_P2.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 63 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

7.8.3.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section 5-Process Failure and Recovery.

7.9 Schedule M_DB_SRV# DRS_EFT_C2_P1_SU

This schedule runs the jobs to generate second Payment File and load back the
Status File produced by the DCS C2 Agent. The schedule runs on Sunday only at
20:30 hours.

7.9.1 Dependencies

Follows successful completion of schedule DRS _EFT_SOD and
DRS_EFT_PAUS_AGT.

7.9.2 Process DRSC307

Refer to the section 7.7.2 for the details of the process.

7.9.2.1 Implementation
Implemented in job M_DB_SRV#DRSC307E (the postfix “E” stands for Debit
Card/EFTPoS).

7.9.2.2 Job Dependencies

None.

7.9.2.3 Rerun action
The common process failure scenarios and rerun actions are described in the
section 5-Process Failure and Recovery.

7.9.3 Process DRSC308
Refer to the section 7.7.3 for the details.

7.9.31 Implementation
Implemented in job M_DB_SRV#DRSC308E (the postfix “E” stands for Debit
Card/EFTPoS).

7.9.3.2 Job Dependencies

Commencement of this job is dependent on completion of the job
DCSM_S_BULK_P1S.DCSM_S_ BULK _P1.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 64 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

7.9.3.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section 5-Process Failure and Recovery.

7.10 Schedule M_DB_SRV#DRS_EFT_SOB
This schedule runs the first job of the DRS batch overnight for Debit Card. The job
runs at around 20:30 every day.

7.10.1 Dependencies

Follows successful completion of schedule TPS.TPSCAREP and
DRS_EFT_MS DAY.

Precedes schedule DRS_EFT_TPS_COPY.

7.10.2 Process DRSC353

This job runs at the start of the DRS batch overnight process on completion of the
TPS Cash Account Report jobs.

It sets the value of system parameter “BATCH JOB STARTED” to “Y” to inform
the DRS Workstation that the batch overnight has started and all subsequent
connections should be read-only. It also ‘kills’ the SQL*Net connections made by
DRS workstation users (all Oracle usernames starting with “DRSWKS”) to the
database using the SQL statement “ALTER SYSTEM DISCONNECT
SESSION...”

7.10.1.1 Implementation

Implemented in job M_DB_SRV#DRSC353E (the postfix “E” stands for Debit
Card/EFTPoS).

7.10.1.2 Job Dependencies

None.

7.10.1.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section 5-Process Failure and Recovery.

7.11 Schedule M_DB_SRV#DRS_EFT_C4LD_1

This schedule runs the loading of the C4/S/D input data files into the DRS C4/S/D
XML input table from Monday to Saturday.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 65 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

DRS receives two sets of Zero-Value-C4 (corresponding to Null Confirmations)
and S input data files each day- one set for each Payment File generated. DRS also
receives a C4/D data file from Monday to Saturday. The schedule contains a set of
jobs for the multiple runs of the DRS C4D File Loader — one job for each input
data file received.

The schedule also contains a job to set “C4SD FILE LOAD COMPLETE?” flag in
the DRS database so that the C4/S/D parsers exit after processing the current set
of data loaded into the DRS C4/S/D XML input table.

711.1 Dependencies

Follows successful completion of schedules TPS.TPSCAREP,
DRS_EFT_C2_P2_D and DCSM_S_BULK_P2D.

Precedes schedule DRS_EFT_C4_PARSE.

7.11.2 Process DRSC305

This process reads [C4/S/D] XML records from input data file passed on the
command line and loads the contents into FTMS_RX_EFT_C4SD table.

The input data-file/s are read from the directory $EFT_NBE_INPUT and are
renamed to change their extension to lowercase once they have been successfully
processed.

7.11.2.1 Implementation

Implemented in M_DB_SRV#DRSC305E_C40_P1,
M_DB_SRV#DRSC305E_S P1, M_DB_SRV#DRSC305E_C40_P2,
M_DB_SRV#DRSC305E_S_P2 and M_DB_SRV#DRSC30SE_C4D, where PI
and P2 are the instances to process the data files for Payment File Generation
Cycles 1 and 2 respectively. Each job is passed the input data file name containing
[C4/D] or [S] parts as the command line parameter.

This job M_DB_SRV#DRSC305E_C4D is actually a part of DCSM_EMIS
schedule which runs this job only on working days, i.e., Monday to Friday except
bank holidays. But the job dependencies shown here have been implemented in the
same way.

7.11.2.2 Job Dependencies

The jobs are run serially within the schedule. That is, the job
M_DB_SRV#DRSC305E_S Pl runs after the successful execution of
M_DB_SRV#DRSC30SE_C40_P1, and so on.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 66 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

7.11.2.3 Rerun action
The common process failure scenarios and rerun actions are described in the
section 5-Process Failure and Recovery.

7.11.3 Process DRSC306

This process sets the value of DRS system parameter “C4SD FILE LOAD
COMPLETE?” for the Application Type “EFT” to ‘Y’ to indicate that all the DRS
C4/S/D files have been successfully loaded.

Once this flag is set, all instances of DRSC302 exit after processing the last let of
C4/S/D input records.

7.11.3.1 Implementation
Implemented in M_DB_SRV#DRSC306E (the postfix “E” stands for Debit
Card/EFTPoS).

7.11.3.2 Job Dependencies
Follows successful completion of M_DB_SRV#DRSC30S5E_C4D.

7.11.3.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section 5-Process Failure and Recovery.

7.12 Schedule M_DB_SRV#DRS_EFT_C4LD_2

This schedule runs the loading of the C4/S/D input data files into the DRS C4/S/D
XML input table for Sunday.

DRS receives one Zero-Value-C4 (corresponding to Null Confirmations) and one
S input data file on Sunday. DRS does not receive any C4/D files on Sunday. The
schedule contains a set of jobs for the multiple runs of the DRS C4/D File Loader
— one job for each input data file received.

The schedule also contains a job to set “C4SD FILE LOAD COMPLETE?” flag in
the DRS database so that the C4/S/D parsers exit after processing the current set
of data loaded into the DRS C4/S/D XML input table.

712.1 Dependencies

Follows successful completion of schedules TPS.TPSCAREP,
DRS_EFT_C2 Pl SU and DCSM_S BULK PIS.

Precedes schedule DRS_EFT_C4_PARSE.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 67 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

712.2 Process DRSC305
Refer to the section 7.12.2 for details.

7.12.2.1 Implementation

Implemented in M_DB_SRV#DRSC305E_C40_P1,
M_DB_SRV#DRSC305E_S_P1, where P1 is the instance to process the data files
for Payment File Generation Cycles 1. Each job is passed the input data file name
containing [C4/D] or [S] parts as the command line parameter.

7.12.2.2 Job Dependencies

The jobs are run serially within the schedule. That is, the job
M_DB_SRV#DRSC305E_S Pl runs after the successful execution of
M_DB_SRV#DRSC305E_C40_P1, and so on.

7.12.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section 5-Process Failure and Recovery.

712.3 Process DRSC306
Refer to the section 7.12.3 for details.

7.12.3.1 Implementation

Implemented in M_DB_SRV#DRSC306E (the postfix “E” stands for Debit
Card/EFTPoS).

7.12.3.2 Job Dependencies
Follows successful completion of M_DB_SRV# DRSC30S5E_S_P1.

7.12.3.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section 5-Process Failure and Recovery.

7.13 Schedule M_DB_SRV#DRS_EFT_C4 PARSE

This schedule runs multiple instances of the DRS C4/D parse and load process.

713.1 Dependencies

Follows successful completion of the jobs
DRS_EFT_C4LD_1.DRSC30SE_C40_P1 or
DRS _EFT_ C4LD_ 2.DRSC30SE_C40_P1.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 68 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

The job DRS_EFT_C4LD_1.DRSC305E_C40_P1 runs from Monday to Saturday
and DRS_EFT_C4LD_2.DRSC305E_C40_P1 runs only on Sunday.

Precedes schedule DRS_EFT_MS_NIGHT.

7.13.2 Process DRSC302

This process reads [C4/D] XML records from FTMS_RX_EFT_C4SD (C4D-
Input), parses and loads them into the DRS _RX_EFT_{C4ID} and
DRS_RX_EFT_{C4ID}_EXCP tables respectively for Debit Card.

Maestro invokes eight instances of DRSC302 at the start of the schedule.

The process polls the C12-Input table at periodic intervals after a pause whose
duration in seconds is taken from the value of “C4SD PAUSE WAIT LIMIT”
system parameter.

The process execution is controlled by the value of system parameter “C4SD FILE
LOAD COMPLETE?” for the Application Type “EFT”. The parameter value is set
to “N” by process DRSC306 on successful completion of all C4SD file load jobs
and this would result in all eight instances of DRSC302 to exit after processing the
last set of records from the C4/D input table.

7.13.2.1 Implementation

Implemented in the M_DB_SRV#DRSC302E_1...8 jobs (the postfix “E” stands
for Debit Card/EFTPoS).

7.13.2.2 Job Dependencies

None

7.13.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery. As listed in this section, if an instance of
DRSC302 fails, Maestro automatically reruns the failed instance once. If it fails on
the rerun, Maestro does not attempt any further automatic reruns for that instance.
Any failures would result in operational exceptions being logged, which can be
used for fault analysis/resolution.

7.13.3 Process DRSC370

This process updates the receipt date on each C4/D daily and daily exception
record using the receipt date defined for each record in the C2 Output table. This
is required to reconstitute the seconds information on the Receipt Date which is
removed by Streamline.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 69 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

7.13.3.1 Implementation

Implemented in M_DB_SRV#DRSC370E (the postfix “E” stands for Debit
Card/EFTPoS).

7.13.3.2 Job Dependencies

Follows normal completion of all parser jobs DRSC302E_1 — 8.

7.13.3.3 Rerun action

7.14

TAAL

7.14.2

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery. As listed in this section, if an instance of
DRSC302 fails, Maestro automatically reruns the failed instance once. If it fails on
the rerun, Maestro does not attempt any further automatic reruns for that instance.
Any failures would result in operational exceptions being logged, which can be
used for fault analysis/resolution.

Schedule M_DB_SRV#DRS_EFT_TPS_COPY

This schedule runs DRSC303, which copies [C112] transactions from TPS-Host to
DRS.

Dependencies
This schedule follows the successful completion of the schedule DRS_EFT_SOB.

Process DRSC303

Multiple instances of the process can be run in parallel. Each instance processes a
set number of TPS transaction tables.

The process fetches data from the TPS tables over the database link “tps” and
inserts into DRS table. The data is extracted from TPS tables
TMS_RX_EFT_TRANSACTIONS_n (“n” is partition number) and inserted into
DRS partitioned table DRS_RX_EFT_C112. The TPS database has one physical
table for each partition whereas DRS database has one partitioned table to store
the C112 data.

All transactions are copied where the value of the column
FINACIAL_TRANSACTION is set to 1 in the TPS table. If an error occurs
during an insert the record is inserted into the C112 daily exceptions table
(DRS_RX_EFT_C112_EXCP) and the appropriate flags are set in the DRS C112
daily table (DRS_RX_EFT_C112).

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 70 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

7.14.2.1 Implementation

This process has been implemented in M_DB_SRV#DRSC303E_x, where x is the
instance number ranging from 1 to 9 and the postfix “E” stands for Debit
Card/EFTPoS. The 9" instance of the process is run to deal with any TIP repaired
transactions present in the 65" partition.

7.14.2.2 Job Dependencies

The 9" instance of the process is dependent on the completion of the 1“ instance
(DRSC303E_1).

7.14.2.3. Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

7.15 Schedule M_DB_SRV#DRS_EFT_MS_ NIGHT

This schedule runs DRS Main Store Processing (DRSC310) as “batch-overnight”
to process all the transaction parts [C12/C112/C4/D/S] received in DRS since the
last run of the schedule. The same process DRSC310 is also used as part of the
daily schedule. See section 7.6 for details.

7.15.1 Dependencies

This schedule follows the successful completion of the schedule
DRS_EFT_C4_PARSE and DRS_EFT_TPS_COPY.

This schedule precedes the schedule DRS_EFT_MS_EXCPTN.

7.15.2 Process DRSC310 [NIGHT]

The ‘NIGHT’ run of the DRSC310 process picks up all the transaction parts for
processing which have Receipt Date less than or equal to the current Partition
Receipt Date. The value of current Partition Receipt Date is derived from DRS
System Parameter “PARTITION RECEIPT DATE” for the Application Type
“EFT” [refer to System Parameters for details].

This process reads the transaction parts [C12/C112/C4/S/D] from Daily Input
tables [DRS_RX_EFT_Cl2, DRS_RX_EFT C112, DRS _RX_EFT_C4,
DRS_RX_EFT_D and DRS_RX_EFT_S for Debit Card] in the order of their
arrival sequence in DRS. The transaction parts are matched on necessary elements
and the State Information is derived and set in chronological order once for the
arrival of each transaction part. The resulting transaction record containing all the
available transaction parts and the State Information is then inserted into
DRS_RX_EFT_MAIN_ STORE table. The process also inserts a copy of Main
Store record into DRS_RX_EFT_MAIN_STORE_UPDATES table where the

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 71 of 183

FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

transaction part(s) had the Receipt Date less than the current Partition Receipt
Date to facilitate fast reporting.

Multiple instances of the process can be run in parallel. Each instance can process
a set number of Daily Input table partitions.
7.15.2.1 Implementation

This process has been implemented in M_DB_SRV#DRSC310NE_x, where x is
the instance number ranging from I to 8 and the postfix “NE” stands for Night and
Debit Card/EFTPoS.

7.15.2.2 Job Dependencies

None

7.15.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

7.16 Schedule M_DB_SRV#4DRS_EFT_MS_EXCPTN

This schedule runs DRSC311, which copies records from the daily exception
tables into the corresponding main store exception tables and sets the appropriate
State for the records.

7.16.1 Dependencies

This schedule follows the successful completion of the schedule
DRS_EFT_MS NIGHT.

Precedes the schedules DRS_EFT_REP_101, DRS_EFT_REP_102.

7.16.2 Process DRSC311

The purpose of this module is to copy the DRS Transaction parts [C112, C12, D,
C4 and S] that are in exception from the Daily Exception tables
[DRS_RX_EFT_{C12IC112IC4IDIS}_EXCP] to the corresponding Exception
Main tables [DRS_RX_EFT_{C12IC112IC4IDIS}_ EXCP_MAIN].

Only one instance of the program must be run at any time. Multiple instances could
result in duplicate rows being inserted into the Exception Main tables.

On the pattern of DRS Main Store processing (DRSC310), only those exceptions
are processed that have the value of Receipt Date less than or equal to the current
Partition Receipt Date. The value of current Partition Receipt Date is derived from
DRS System Parameter “PARTITION RECEIPT DATE” for the Application
Type “EFT”. The record is validated to check it exists in the Main Store

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 72 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

(DRS_RX_EFT_MAIN_ STORE] table and the current state of the transaction
part in exception is either derived or copied from the Main Store table.

After a record has been successfully processed and inserted into the Exceptions
Main table, the PROCESSED_YN flag for the corresponding record in Daily
Exception table is set to ‘Y’.

7.16.2.1 Implementation
Implemented in M_DB SRV#DRSC311E (the postfix stands for Debit
Card/EFTPoS).

7.16.2.2 Job Dependencies

None

7.16.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

7.17 Schedule M_DB_SRV#DRS_EFT_REP_101

This schedule contains jobs that generate the Debit Card NB101 report.
This Schedule is run daily after the DRS Main store processing and DRS Main
exception merge from daily exception tables.

717.1 Dependencies

Follows after successful completion of schedule DRS_EFT_MS_EXCPTN and
DRS_TPS EXTRCT _D.

Precedes the Network Banking schedule DRS_NWB_REP_000.

717.2 Process DRSC322

The process extracts the C4 transactions for each Routing Gateway from DRS
Main Store (DRS_RX_EFT_MAIN_STORE), Main Store Updates
DRS_RX_EFT_MAIN STORE UPDATES) and C4 _ Exception Main
DRS_RX_EFT_C4_EXCP_MAIN) tables and inserts into the DRS NBIOL
Results (DRS_REP_EFT_RESULTS_NB101) table.

This program does not create any report files.

717.2.1 Job Dependencies

None

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 73 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

7.17.2.2 Implementation
Implemented in the M_DB_SRV#DRSC322E job (the postfix “E” stands for Debit
Card/EFTPoS).

7.17.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

717.3 Process DRSC324

The process generates NB101 reconciliation reports for the current Run date. The
data is extracted from DRS_REP_EFT_RESULTS_NB101 table and written to
the text files.

7.17.3.1 Job Dependencies
Follows successful completion of M_DB_SRV#DRSC322E.

7.17.3.2 Implementation
Implemented in the M_DB_SRV#DRSC324E job (the postfix “E” stands for Debit
Card/EFTPoS).

7.17.3.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

7.18 Schedule M_DB_SRV#DRS_EFT_REP_102

The generation of DRS NB102 reconciliation report for Debit Card involves three
functional steps:

1. Population of Intermediate tables DRS_REP_EFT_STATE_TOTALS

(process DRSC320).

2. Population of Result tables DRS _REP_EFT RESULTS NB102_1...12
(process DRSC323).

3. Producing the report text files on the Host operating system (process
DRSC325).

The jobs in this schedule perform the above-mentioned three steps.

This Schedule is run daily after the successful completion of NB101 reconciliation
reports.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 74 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

7.18.1 Dependencies

Follows after successful completion of schedule DRS_EFT MS EXCPTN and
DRS_TPS_EXTRCT_D.

Precedes the Network Banking schedule DRS_NWB_REP_000.

7.18.2 Process DRSC320

The process populates the DRS State Totals
(DRS_REP_EFT_STATE_TOTALS) table from the transactions held within the
DRS Main store (for current day’s transactions), DRS Main Store Updates and the
DRS Exception tables for NB102 reports.

This program does not create any report files.

7.18.2.1 Job Dependencies

None

7.18.2.2 Implementation

Implemented in the M_DB_SRV#DRSC320E job (the postfix E stands for Debit
Card/EFTPoS).

7.18.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

718.3 Process DRSC323

The process populates DRS report NB102 Results
(DRS_REP_EFT_RESULTS_NB102_1...12) tables where each table
corresponds to a section of the NB102 reports.

The data is extracted from the DRS Main Store (DRS_RX_EFT_MAIN_ STORE)
Exceptions Main (DRS_RX_EFT_{C12IC112IC4ISIID} EXCP_MAIN) and the
State Totals (DRS_REP_EFT_STATE_TOTALS) tables and inserted into DRS
NB102 Results tables.

The process runs once for each section. To reduce the overall run time, the
multiple instances of the process are run in parallel, where possible. The sections
1,6,7 and 12 are run sequentially — one after the other but the sections 2, 3, 4, 5, 8,
9, 10 and 11 are run in parallel.

Please note that sections do not take similar lengths of time to run. For instance
sections 5 and 11 can take up to 30 to 40 minutes, while other sections may be
over in a few seconds.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 75 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

This program does not create any report files.

7.18.3.1 Job Dependencies
Follows successful completion of M_DB_SRV#DRSC320E.

7.18.3.2 Implementation

Implemented in the M_DB_SRV#DRSC323E_x job. Where N is for Debit Card
and x is the section number ranging from I to 12. . Please refer to the Maestro
Schedule for Debit Card for inter-dependencies among the multiple instances of
DRSC323.

7.18.3.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

7.18.4 Process DRSC325

The process generates NB102 reconciliation reports. The data is extracted from
NB102 Results (DRS_REP_EFT_RESULTS_NB102_1...12) tables and written
to the text files.

7.18.4.1 Job Dependencies

This Program follows successful completion of M_DB_SRV#DRSC323N_x jobs,
where “E” stands for Debit Card/EFTPoS and x is the report sections run in
parallel (DRSC323).

7.18.4.2 Implementation
Implemented in the M_DB_SRV#DRSC325E job (the postfix E stands for Debit
Card/EFTPoS).

7.18.4.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

7.19 Schedule M_DB_SRV#DRS_EFT_ADMIN

This is the database housekeeping schedule. The schedule archives and purges data
from the Oracle tables and deletes the report/data files older than the pre-defined
retention period.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 76 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

7.19.1 Dependencies

Follows successful completion of the Network Banking schedules DRS_ADMIN
and DRS NWB_ADMIN.

Precedes schedule DRS_EFT_TRN_ACK

7.19.2 Process DRSC361

The purpose of this module is to Archive Control, Data and Report tables to
Support and Audit requirements and Archive/Purge Data and Report tables older
than the Retention period for Archive server. The archive files stored under
Archive server are for future references. The old data is cleared to make space for
the new data. Entries from the table DRS_ARCHIVED_TABLES are used for
archive parameters and criteria. The records that go into this table are also present
in the form of a spreadsheet in Appendix F — DRS Archiving Table Mapping.

This module uses Oracle Export/Import method to archive data as specified in the
DRS High Level Design [R1].

Only one instance of the program must be run at any time. Multiple instances at
the same time could result in corrupt export dump files being created.

If the data purge process fails due to the process not being able to get exclusive
access to the table to purge, an exception is raised and it continues to the next
table. The next time the purge process is run it will purge two days worth of data.
Some of the tables (like the daily tables) can only hold around three days worth of
data, so three failures in a row will give problems.

7.19.2.1 Job Dependencies

None.

7.19.2.2 Implementation

Implemented in the M_DB_SRV#DRSC361E job (the postfix “E” stands for Debit
Card/EFTPoS).

7.19.2.3 Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

7.19.3 Process DRSC368
Please refer to the section 6.3.2 for details of the process.

7.19.3.1 Job Dependencies
Follows the successful completion of M_DB_SRV#DRSC361E job.
© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 77 of 183

FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

7.19.3.2 Implementation
The job runs every day. Implemented in the M_DB_SRV#DRSC368E_3 job (the
postfix “E” stands for Debit Card/EFTPoS).

7.19.3.3 Rerun action
The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

7.19.4 Script DRSX362.sh

The purpose of this Unix shell script is to delete various report/data files older than
the file retention period. The script reads the records present in the table
DRS_FILES_TO HOUSEKEEP for the details of the report/data files to be
deleted.

7.19.4.1 Job Dependencies
This job should follow after successful completion of the job DRSC361E (the
postfix “E” stands for Debit Card/EFTPoS).

7.19.4.2 Implementation
Implemented in the M_DB_SRV#DRSX362E job (the postfix “E” stands for
Debit Card/EFTPoS).

7.19.4.3 Rerun action
The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

719.5 DRS_EFT_AUDIT
This job is for Debit Card File Auditing.

The schedule and job details have been provided by the Maestro Development
team. Refer to [R5] for further details.

7.20 Schedule M_DB_SRV#DRS_EFT_TRN_ACK
The schedule contains a job that checks for delivery status of report files by FTMS

to the TIP remote gateway.

7.20.1 Dependencies
Follows after successful completion of Schedule DRS_EFT_ ADMIN
Precedes Schedule DRS_EFT_EOD

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 78 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

7.20.2 Process DRSC367

The DRS report files for Debit Card are created in the directory pointed to by the
environment variable $EFT_TIP_OUTPUT. For each report file transferred to
TIP, FTMS creates a delivery receipt (acknowledgement) file in the same
directory.

Process DRSC367 harvests file receipt information by checking for report file
delivery success in the delivery receipt files. If found, it renames the files and
updates the TIP Receipt date in DRS_REP_FILE_REGISTER for the
corresponding report file.

7.20.2.1 Job Dependencies

None

7.20.2.2 Implementation
Implemented in the M_DB_SRV#DRSC367E job (the postfix “E” stands for Debit
Card/EFTPoS).

7.20.2.3. Rerun action

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

7.21 Schedule M_DB_SRV#DRS_EFT_EOD
This schedule runs the last job/s of the DRS batch overnight for Debit Card.

7.21.1 Dependencies
Follows successful completion of schedules DRS_EFT_TRN_ACK.
Precedes schedule DRS_COLD_BU.

7.21.2 Process DRSC351

This process sets the value of DRS system parameter “DRS PROCESSING DAY
COMPLETE?” to ‘Y’ to indicate completion of the DRS Processing Day. This
causes all instances of EFT C12 Parsers (DRSC301) to exit successfully.

7.21.2.1 Implementation

Implemented in M_DB_SRV#DRSC351E (the postfix “E” stands for Debit
Card/EFTPoS).

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 79 of 183
FUJ00090719

FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

7.21.1.2 Job Dependencies

None

7.21.13 Rerun action

8.2

The common process failure scenarios and rerun actions are described in the
section Process Failure and Recovery.

DRS Tables Overview

Common Tables

All DRS tables that are used to store non-transactional data are common to both
Network Banking and Debit Card/EFTPoS applications. These include tables for
storing system parameters, process control, audit and various file register tables.

All common tables have a column named APPLICATION_TYPE, which can be
mandatory or optional depending on the type of table. If the application type is
mandatory, it is a part of the key for the table and its value is derived from the
Application-Type command-line input parameter that is passed to the process. If
the application type is non-mandatory, it will be used only for records that are
Application specific. The two APPLICATION_TYPE values used are ‘EFT’ for
Debit Card Transactions and ‘“NWB’ for Network Banking Transactions and ETU
Transactions.

Refer to Appendix D — DRS Tables for a brief description of all common DRS
tables.

System Parameters

The System Parameters are configurable parameters stored in
DRS_SYSTEM_PARAMTERS table. One set of System Parameters is stored for
Network Banking (NWB) and Debit Card (EFT) each. The table below lists all the
System Parameters currently used by DRS.

Name App I Data-type I Description
DRS SYSTEM I NWB I DATE The current date that the DRS system is working
DATE & for.

EFT

The program DRSC350 at the start of each day
updates the parameter by incrementing its value
by I day.

Before the DRS logical processing day starts, this
parameter will have the value of the preceding
day. E.g. at 7am (or before execution of
DRSC350) on the 27" of June 2002, this
parameter will have the value “26" June 2002”.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 80 of 183
FUJ00090719
FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

The parameter value is set to NULL after DRS
baseline installation. It is expected to be set to
TRUNC (SYSDATE) on the day prior to running
the DRS schedule for the first time.

PARTITION NWB I DATE Indicates the Receipt Date that the most recent
RECEIPT DATE & partition in the DRS_RX_NWB_MAIN_STORE
EFT table will hold transactions for.

The program DRSC350 at the start of each day
updates the parameter by incrementing its value
by 1 day. Normally its value should match the
value of parameter “DRS SYSTEM DATE”.

Before the DRS logical processing day starts, this
parameter will have the value of parameter “DRS
SYSTEM DATE”.

The parameter value is set to NULL after DRS
baseline installation. It is expected to be set to
TRUNC (SYSDATE) on the day prior to running
the DRS schedule for the first time.

DRS C4SD INPUT I NWB I NUMBER I Indicates the number of partitions for the table

PARTITIONS & FTMS_RX_NWB_C4SD. This value is used by
EFT DRSC302 process to derive the next partition

number to be processed.
cl2 PARSE I NWB I NUMBER I Indicates the number of instances of C12 parser
PROCESS COUNT I & (DRSC301). This value is used to derive the total
EFT number of transactions processed before a set of

database alerts could be raised that trigger the
DRSC301 processing.

C12 INPUT ALERT I NWB I NUMBER I Stores the minimum number of transactions that
LIMIT & need to be loaded into a_ partition of
EFT TMS_RX_NWB C12 before a database alert is
raised to trigger the DRSC301 processing.

DRS C12 INPUT I NWB I NUMBER I Indicates the number of partitions for the table
PARTITIONS & TMS_RX_NWB_C12. This value is used by
EFT DRSC301 process to derive the next partition
number to be processed.

VERSION FOR I NWB I NUMBER I Stores the current major version number of the
WORKSTATION & DRS Workstation. This is compared by the
EFT Workstation with a number stored within the
application to check if the DRS Workstation
version is compatible with the DRS-Host.

HORIZON C12 I NWB I NUMBER Stores the number of seconds after which
INPUT ALERT I & instances of the C12 parse and loz
TIMEOUT EFT DRSC301 will timeout while waii
database alert to trigger C12 processing.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 81 of 183
FUJ00090719
FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

OPTIMUM C12 I NWB I NUMBER I Indicates the recommended number of records

XML COUNT & that the Horizon C12 NBS agent should pass to
EFT the Host in each call to the C12-interface.

C4SD PAUSE I NWB I NUMBER I Stores the number of seconds for which instances

WAIT LIMIT & of the C4/S/D parser (DRSC302) are required to
EFT pause before polling the FTMS_RX_NWB_C4SD

table for the next batch of input XML records.

C4SD PARSE I NWB I NUMBER I Indicates the number of instances of C4/S/D

PROCESS COUNT I & parser (DRSC302). This parameter is unused as of
EFT now.

DRS. DAILY I NWB I NUMBER I Indicates the number of partitions for each of the

TABLE & DRS Daily Tables i.e. DRS_RX_NWB_C12, C4,

PARTITIONS EFT C112, S and D. This value is used by instances of

the Main Store process (DRSC310) to derive the
next partition number to be processed.

TPS NWB TABLE I NWB I NUMBER I Indicates the number of partitions of the TPS-Host
PARTITIONS & table TMS_RX_NWB_TRANSACTIONS_1...64.

EFT This value is used by instances of the C112 TPS
copy process (DRSC303) to derive the next
partition number of the above-mentioned TPS-
Host table to be processed.

DRS PROCESSING I NWB I TEXT Indicates if the DRS Processing Day has
DAY COMPLETE I & completed. The value is set to “Y” by DRS End of
EFT Day process (DRSC351) and is used by instances

of C12-parse and load process (DRSC301) to exit
processing.

C4SD FILE LOAD I NWB I TEXT Indicates if the C4SD_ file(s) loading has
COMPLETE & completed. The value is set to “Y” by DRS File
EFT Load Complete process (DRSC306) and is used by

instances of C4SD-parse and load process
(DRSC302) to exit processing.

MAXIMUM NWB I NUMBER I Stores the maximum number of partitions of the
NUMBER OF I & table (DRS_RX_NWB_MAIN STORE that can
PARTITIONS EFT be created. Note that this parameter value must

correspond with the number of tablespaces
available to hold the main store partitions in order
for the DRS Start of Day process to succeed.

cl2 RAISE I NWB I TEXT Indicates if an alert should be raised by the C12
REPEATED KEY I & Parse and load process (DRSC301) if it
EXCEPTION EFT encounters a C12 record that matches a record

processed earlier during the processing day on the
Horizon-Transaction-Id and Receipt-Date.

BATCH JOB I NWB Indicates if the DRS batch processing has started.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 82 of 183
FUJ00090719
FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

STARTED & TEXT This is used by the DRS Workstation to prevent

EFT updates to the database.
NEWEST NWB I NUMBER I Specifies the upper limit wrt PARTITION
RECEIPT DATE I & RECEIPT DATE for allowable Receipt Dates
PRD OFFSET EFT
OLDEST RECEIPT I NWB I NUMBER I Specifies the lower limit wrt PARTITION
DATE PRD I & RECEIPT DATE for allowable Receipt Dates
OFFSET EFT
NB102 NWB I NUMBER I To store the maximum limit for records to printed
EXCEPTION & on the NB102 reports
LIMIT EFT
NB103_REP_RUN_ I NWB I NUMBER I NB103 Report Run date offset, either 0-
DATE_OFFSET & Today(FRI) or 1-NextDay(SAT)

EFT
INVALID PK I NWB I NUMBER I Specifies the threshold limit for reporting
OPERATIONAL & transaction parts with NULL key values as
EXCEPTION EFT Operational Exceptions
LIMIT
SUBPARTITION NWB I NUMBER I Specifies the number of rows Financial Institution
COUNT AL A AL_A subpartition can hold
SUBPARTITION NWB I NUMBER I Specifies the number of rows Financial Institution
COUNT ALB AL_B subpartition can hold
SUBPARTITION NWB I NUMBER I Specifies the number of rows Financial Institution
COUNT CAPO A CAPO_A subpartition can hold
SUBPARTITION NWB I NUMBER I Specifies the number of rows Financial Institution
COUNT CAPO B CAPO_B subpartition can hold
SUBPARTITION NWB I NUMBER I Specifies the number of rows Financial Institution
COUNT LINK A LINK_A subpartition can hold
SUBPARTITION NWB I NUMBER I Specifies the number of rows Financial Institution
COUNT LINK B LINK_B subpartition can hold
NRT LOCK FLAG I NWB I N/A Row used as a flag to implement serial access to

DRS_NRT_INTERFACE_METADATA.

cl2 DAILY I NWB I NUMBER I Specifies the Time (in minutes) for each summary
SUMMARY TIME I & interval.
INTERVAL EFT
cl2 DAILY I NWB I CHAR Specifies the list of response codes of the
SUMMARY & transactions that need to be summarised.
RESPONSE CODE I EFT

8.3. DRS Tables

The DRS tables can be divided into three categories:

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 83 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

8.3.1

8.3.2

8.3.3

Static Data Tables

Static data tables store reference-type information that is used by Host Processes
and DRS Workstation.

All static data tables have a column named APPLICATION_TYPE to show
whether the reference data is to be used for Network Banking (NWB), Debit Card
(EFT) or both. This column could be mandatory or nullable depending upon the
type of data stored in a static data table. If the column is nullable, just one set of
values is stored in the table and the APPLICATION_TYPE column is set only for
the records that are specific to an APPLICATION_TYPE. For example,
APPLICATION_TYPE column is nullable in DRS_PROCESSES table, which
stores the details of the DRS processes. APPLICATION_TYPE column in this
table is populated only for the processes specific to Network Banking or Debit
Card. For common processes, APPLICATION_TYPE column is not populated in
DRS_PROCESSES table.

If the APPLICATION_TYPE column is mandatory and a part of the
Unique/Primary Key constraint, common records in the table are repeated for each
application type. For example, APPLICATION_TYPE column is mandatory in
DRS_SYSTEM_PARAMETERS table which stores details of the System
Parameters. This table stores all common System Parameters twice, that is, once
for each application type.

Control/Registry Data Tables

The DRS database has a single set (as opposed to two sets of transaction tables) of
tables that store Control and Registry Information. The control records for both
Network Banking and Debit Card are stored in the same table and are
distinguished by the value in APPLICATION_TYPE column, which forms a part
of the Unique/Primary key for the table. Examples of such tables include
DRS_REP FILE REGISTER, DRS_C4SD_FILE REGISTER,
DRS_PROCESS_CONTROL etc.

Transaction Data Tables

The DRS has two sets of transaction data tables one for Network Banking and one
for Debit Card. Each set has a 3-letter acronym in the table name to show which
application type the table belongs to. The Network Banking tables use “NWB” and
the Debit Card tables use the “EFT” acronym. The tables storing similar
transactional data for Networking Banking and Debit Card reside in the same
tablespace. For example, DRS_RX_NWB_MAIN STORE_UPDATES and
DRS_RX_EFT_MAIN STORE UPDATES tables store updates to the old
Network Banking transactions and reside in the tablespace
DRS_MAIN_STORE_UPDATES.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 84 of 183
FUJ00090719
FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

The DRS has two sets of Oracle users one for Network Banking and one for Debit
Card. These users access the transaction data tables through a set of private
synonyms. From example, DRS_RX_NWB_MAIN STORE_UPDATES table is

accessed through a private synonym named
DRS_RX_MAIN STORE UPDATES for the Oracle users “OPS$DRSNWB”
and “OPS$DRSNWBI...8”. Similarly,

DRS_RX_EFT_MAIN_ STORE_UPDATES table is accessed through a private
synonym named DRS_RX MAIN STORE UPDATES for the Oracle users
“OPS$DRSEFT” and “OPS$DRSEFT1...8”. The names of the private synonyms
are same for both the sets of Oracle users.

9 Files Created/Used

9.1 Input and Output Data Files

The input data files contain [C4/D/S] messages in XML format received from the
Network Banking Engine (for Network Banking) or Merchant Acquirer (for Debit
Card). The input files containing [S] messages are received for Debit Card only.

The output data files contain [C2] messages in XML format and are sent to
Merchant Acquirer through DCP C2-Bulk File Agent. The output files containing
[C2] messages are created for Debit Card only.

9.1.1 Network Banking & Electronic Top-Ups

9.1.1.1 C4/D Input

These files contain [C4] and [D] messages in XML format and Control
Information received from the Network Banking Engine. Maestro runs a script
that delivers these files into a Host directory to be loaded into the DRS database.
For Electronic Top-Ups the daily transaction feed file from e-pay is converted into
[C4] and [D] messages in XML format and placed by Maestro into the same Host
directory used for Network Banking. No MAC or control information is required
for Electronic Top-Ups.

The file names and storage location areas are as follows:

Storage Location File Naming Convention I Extension Extension
Before After
Processing I Processing

SNWB_NBE_INPUT SFXyyyymmddannnn ‘DIF dt

(/bvnw01/drs/trans/nwbC4Din)

SNWB_NBE_INPUT EODCTRLyyyymmddin_ I CTL ‘CTL

(/byvnw01/drs/trans/nwbC4Din)

SNWB_NBE_INPUT ETU_C4DIN_yyyymmdd I .DTF att

(/bvnw01/drs/trans/nwbC4Din)

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 85 of 183
FUJ00090719

FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

9.1.2

9.1.2.1

9.1.2.2

Where yyyymmdd is the Date of creation of the file in Year-Month-Day format and
nn[nn] is the sequence number of the file segment. The details of MAC check and
file delivery to the Host are available in [R5] (not applicable to Electronic Top-
Ups).

At S75, NBE C4/D input files are discontinued.

The processed files (*.dtf and *.CTL) are deleted after a configurable number of
days by DRS File Purge job (DRSX362.sh). Also all files are deleted from this
directory after a further configurable amount of time to sweep up any temporary
files that are created by Maestro.

Debit Card

C2 Output

These files contain [C2] messages in XML format. The Host process DRSC307
creates these files. The Maestro launches the DCS C2 Bulk File Agent to process
the [C2] transaction file.

The file names and storage location areas follows:

Storage Location File Naming Convention I Extension Extension
Before After
Processing _I Processing
$EFT_C2_OUTPUT DCS_C2BULKOUT_yyy_ I .TRN -trn
(/bynw0 1/drs/trans/efic2out) ymmdd_nn

Where yyyymmndd is the Date of creation of the file in Year-Month-Day format and
nn is the sequence number derived from the current PFG cycle number maintained
by Maestro (starts at 01 and increments for each successive run in current business
day). The details PFG cycle number are available in [R5].

The processed files are deleted after a configurable number of days by DRS File
Purge job (DRSX362.sh).
C2 Status Input

These files contain [C2] Status messages in ASCII format. The DCS C2 Bulk File
Agent generates this file once it has processed the [C2] messages file. The Host
process DRSC308 loads this file into DRS database.

The file names and storage location areas follows:

Storage Location File Naming Convention I Extension Extension
Before After
Processing I Processing
$EFT_C2_INPUT DCS_C2STSIN_yyyymm I .STS Sts
(/bvnw01/drs/trans/efic2in) dd mm

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 86 of 183
FUJ00090719
FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

Where yyyymindd is the Date of creation of the file in Year-Month-Day format and
mn is the sequence number is derived from the current PFG cycle number
maintained by Maestro (starts at 01 and increments for each successive run in
current business day). The details PFG cycle number are available in [R5].

The processed files are deleted after a configurable number of days by DRS File
Purge job (DRSX362.sh).
9.1.2.3 C40 (Zero-Value-Confirmations) Input

These files contain Zero Value [C4] messages in XML format, received from the
Bulk File Agent. Maestro delivers these files into a Host directory to be loaded
into DRS database.

The file names and storage location areas follows:

Storage Location File Naming Convention I Extension Extension
Before After
Processing I Processing
SEFT_NBE_INPUT DCS_C40IN_yyyymmdd_ I .DTF dt
(/bvnw01/drs/trans/eftC4Dsin) mn

Where yyyymmdd is the Date of creation of the file in Year-Month-Day format and
mn is the sequence number is derived from the current PFG cycle number
maintained by Maestro (starts at 01 and increments for each successive run in
current business day).

9.1.2.4 S Input

These files contain [S] messages in XML format, received from the Bulk File
Agent. Maestro delivers these files into a Host directory to be loaded into DRS
database.

The file names and storage location areas follows:

Storage Location File Naming Convention I Extension Extension
Before After
Processing I Processing
SEFT_NBE_INPUT DCS_SIN_yyyymmdd_nn I .DTF dt
(/bvnw01/drs/trans/eftC4Dsin)

Where yyyymmdd is the Date of creation of the file in Year-Month-Day format and
nn is the sequence number is derived from the current PFG cycle number
maintained by Maestro (starts at 01 and increments for each successive run in
current business day).

9.1.2.5 C4/D Input

These files contain [C4] and [D] messages in XML format, received from the Bulk
File Agent. The Bulk File Agent generates these files using the EMIS files

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 87 of 183
FUJ00090719
FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

containing [C4/D] messages produced by the Merchant Acquirer (MA). Maestro
delivers these files into a Host directory to be loaded into DRS database.

The file names and storage location areas follows:

Storage Location File Naming Convention I Extension Extension
Before After
Processing I Processing
$EFT_NBE_ INPUT DCS_C4DIN_yyyymmdd_ I .DTF df
(/bvnw01/drs/trans/eftC4Dsin) mn

Where yyyymmdd is the Date of creation of the file in Year-Month-Day format and
mn is the sequence number derived from the current EMIS cycle number (starts at
01 and increments for each successive EMIS pickup run in current business day —
it is anticipated that this will only occur once a day currently).

The processed files are deleted after a configurable number of days by DRS File
Purge job (DRSX362.sh).

9.2 Report Files

9.2.1 Network Banking (Including ETU) and Debit Card

9.2.1.1 MSU Report Files

These files contain NB000 (for Network Banking only), NB101, NB102 and
NB103 Reconciliation Reports for MSU (Management Support Unit). The files
are produced daily (with the exception of NB103 which is weekly), one for each
routing gateway and currency type. Electronic Top-Ups are reported through the
Network Banking reports as a unique routing gateway. Also, a Unix link of these
files is created in the TIP and/or Audit directories, where necessary.

Maestro copies these report files from the Host to the MIS Workstation. Audit
Server copies the report files by running its own script. In the future there will be a
staging server that the files will be copied to, then the MSU Workstation can then
access these files via this staging server.

The old report files (*. TXT) are deleted after a configurable number of days by
DRS File Purge job (DRSX362.sh).

The file names and storage location are as follows:

Directory Name File Name Extension Extension
Before After
Processing I Processing
SNWB_MSU_OUTPUT & <Application><Date><Rout I [CK “TXT
$EFT_MSU_OUTPUT cee sotnporenpectwnncn
(/bvnw0l/drs/trans/drsmsu) I Sys FoR Seueses

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 88 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

As mentioned above, the report files for both Network Banking and Debit Card
are created in the same physical directory.

The naming convention for the report files is as follows:
<Application><Date><RoutingGateway><ReportNum><Section><TxnGroup><
Currency>.<EXT>

<Application> ‘NBS’ is used for Network Banking (including Electronic
Top-Ups) reports and ‘DCP’ for Debit Card reports in
NBI01, NB102 and NB103 reports. ‘DRS’ is used for
NB000 report.

<Date> Report Run Date in format “YYYYMMDD’.

<RoutingGateway> Routing Gateway Id. Add leading zeros to fit in the format
nnnnnnnnnn for NB101, NB102 and NB103. NBOOO uses

“NIL_RETURN’.

<ReportNo.> “NB000’ , ‘NB101’, ‘NB102’ or ‘NB103’.

<Section> Report Section. NB102 uses ‘01’ to ‘12’. NBO00, NB101
and NB103 use ‘00’.

<TxnGroup> Transaction Group. NB103 use ‘WDR’ (Withdrawals) or
‘DEP’ (Deposits). NB000, NB101 and NB102 use ‘N_A’.

<Currency> Currency. NB101, NB102 and NB103 use a value passed

from the database, usually ‘GBP’ or ‘EUR’. The currency is
substituted by ‘N_A’ if not found for the report. NB00O
uses ‘N_A’.

<EXT> Initially set to LCK, once the file generation process is
complete it is set to TXT.

E.g., NBS200207300000000010NB10100N_AGBP.TXT
DCP200201291111111111NB10100N_AEUR.TXT

9.2.1.2 TIP Report and Acknowledgement Files

The directories $NWB_TIP_OUTPUT (for Network Banking) and
$EFT_TIP_OUTPUT (for Debit Card) contain the report files that are required by
POL (Post Office Limited) TIP.

All the report files are initially created in $NWB_MSU_OUTPUT and
$EFT_MSU_OUTPUT. Then, Unix links are created in the directory
$NWB_TIP_OUTPUT and $EFT_TIP_OUTPUT for the report files that are
required by POL TIP.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 89 of 183
FUJ00090719

FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

The FTMS transfers these report files to TIP Gateway. For each file successfully
transferred to TIP, FTMS_ creates an acknowledgement file in
$SNWB_TIP_OUTPUT directory. The acknowledge files (ACK) are loaded into
DRS database by DRSC367 (Load FTMS acknowledgement file) and then
renamed to lower case ‘.ack’.

The old report (*. TXT.OK) and acknowledgement (*.ack) files are deleted after a
configurable number of days by DRS File Purge process (DRSX362.sh).

The file names and storage location for Network Banking are as follows:

9.3

9.3.1

(/bvnw01/drs/trans/nwbtip)

ingGateway><ReportNum><s
ect ion><TxnGroup><Curren
cy>

Directory Name File Name Extension Extension
Before After
Processing Processing

$NWB_TIP_OUTPUT <Application><Date><Rout I TXT “ok

Oy idce zi ingGateway><ReportNum><S
(/ovnw0l/drs/trans/nwbtip) ection><TxnGroup><Curren
cy>
SNWB_TIP_OUTPUT <Application><Date><Rout I TXT.ACK I .TXT.ack

Similarly, the file names and storage location for Debit

Card are as follows:

(/bvnw0 1/drs/trans/efitip)

ingGateway><ReportNum><s
ect ion><TxnGroup><Curren
cy>

Directory Name File Name Extension Extension
Before After
Processing _I Processing
SEFT TIP OUTPUT <Application><Date><Rout I TXT “ok
oT . ingGateway><ReportNum><S
(/bvnw01/drs/trans/efitip) ection><TxnGroup><Curren
cy>
SEFT_TIP_OUTPUT <Application><Date><Rout I TXT_ACK I .TXT.ack

The details of report file naming convention are available in the section MSU

Report Files.

Oracle Export Files for Audit, Archive and Support

Oracle export files are created for audit, archive and support requirements.

Network Banking and Debit Card

9.3.1.1 Oracle Export Files for Support

These files are created using Oracle “exp” utility. The export dump files contain
data from DRS tables as detailed in Appendix F — DRS Archiving Table Mapping
Once the dump files are successfully created, the files are compressed using Unix
utility ‘compress’ to reduce the disk space usage.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 90 of 183
FUJ00090719
FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

The file names and storage location for Network Banking and Debit Card are as

follows:
Directory Name File Name Extension Extension
Before After
Compression _I Compression
SNWB_SUPPORT_OUTPUT I DRS<ApplicationAlias>< I .dmp -dmp.Z
& SEFT_SUPPORT_OUTPUT I ArchiveGroupAlias><Ru
(/bvnw01/drs/trans/drssupport) I nDate>
Where,
ApplicationAlias Stored in DRS_ARCHIVED_TABLES table,
NWB for Network Banking Application and
EFT for Debit Card.
ArchiveGroupAlias Stored in DRS_ARCHIVED_TABLES table,
e.g., OPR (for Operational tables)
RunDate Current DRS Processing date in the format
“YYYYMMDD’.
For example, the name of Oracle dump file for DRS_RX_NWB_MAIN_ STORE
table will be DRSNWBDMS20020523.dmp.Z and

DRS_RX_EFT_MAIN_STORE table will be DRSEFTDMS20020523.dmp.Z.

An export parameter containing the parameters required by the Oracle export
utility and a log file containing any errors encountered during the export are also
created as per the following details:

Directory Name File Name Extension Extension
Before After
Compression I Compression

$NWB_SUPPORT_OUTPUT DRS<ApplicationAlias>< I .par N/A

& SEFT_SUPPORT_OUTPUT I ArchiveGroupAlias>
(/byvnw0 1/drs/trans/drssupport)

SNWB_EXPORT_LOG & DRS<ApplicationAlias>< I log N/A
$EFT_EXPORT_LOG ArchiveGroupAlias><Ru
(/bvnw01/drs/trans/drsexplog) I nDate>
Where,
ApplicationAlias Stored in DRS_ARCHIVED_TABLES table,
NWB for Network Banking Application and
EFT for Debit Card.
ArchiveGroupAlias Stored in DRS_ARCHIVED_TABLES table,

e.g., OPR (for Operational tables).
RunDate Current DRS Processing date in the format ‘YYYYMMDD’.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 91 of 183
FUJ00090719
FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

For example, the name of Oracle export parameters and logs files for
DRS_RX_NWB_MAIN_STORE table will be DRSNWBDMS.par and
DRSNWBDMS20020523.log respectively. Similarly, the name of Oracle export
parameters and logs files for DRS_RX_EFT_MAIN STORE table will be
DRSEFTDMS. par and DRSEFTDMS20020523 log respectively.

Old files (DRSNWB*.log and DRSEFT*.log) are deleted after a configurable
number of days by DRS File Purge job (DRSX362.sh). The *.par files do not need
housekeeping as the same file is overwritten each day.

9.3.1.2. Oracle Export Files for Archive

The Oracle export dump files are initially created in the directory
/bvnw01/drs/trans/drssupport (pointed to by $NWB_SUPPORT_OUTPUT and
$EFT_SUPPORT_OUTPUT). After the files have been created and compressed
successfully a Unix link is created in the directory /bvnw01/drs/trans/drsarchive
(pointed to by S$NWB_ARCHIVE_OUTPUT and S$EFT_ARCHIVE_OUTPUT)
for the files required for archive purpose as detailed in Appendix F — DRS
Archiving Table Mapping.

The file names and storage location for export dump files are as follows:

Directory Name File Name Extension Extension
Before After
Compression I Compression

SNWB_ARCHIVE OUTPUT I DRS<ApplicationAlias>< I N/A -dmp.Z

& SEFT_ARCHIVE_OUTPUT ArchiveGroupAlias><Ru
(/bvnw01/drs/trans/drsarchive) I nDate>

Where,
ApplicationAlias Stored in DRS_ARCHIVED_TABLES table,
NWB for Network Banking Application and
EFT for Debit Card.
ArchiveGroupAlias Stored in DRS_ARCHIVED_TABLES table,
e.g., OPR (for Operational tables)
RunDate Current DRS Processing date in the format
“YYYYMMDD’.
For example, the name of Oracle dump file for DRS_RX_NWB_MAIN_STORE
table will be DRSNWBDMS20020523.dmp.Z and for

DRS_RX_EFT_MAIN_STORE table will be DRSEFTDMS20020523.dmp.Z

Old files (DRSNWB*.dmp.Z and DRSEFT*.dmp.Z) are deleted after a
configurable number of days by DRS File Purge job (DRSX362.sh).

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 92 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

9.1.1.3 Oracle Export Files for Audit

The Oracle export dump files are initially created in the directory
/ovnw01/drs/trans/drssupport (pointed to by S$NWB_SUPPORT_OUTPUT and
$EFT_SUPPORT_OUTPUT).. After the files have been created and compressed
successfully a Unix link is created in the directory bvnw01/drs/trans/drsaudit (point
to by $NWB_AUDIT OUTPUT and $EFT_AUDIT_OUTPUT) for the files
required for audit purpose as detailed in Appendix F —- DRS Archiving Table

Mapping.
The file names and storage location for export dump files are as follows:
Directory Name File Name Extension Extension
Before After
Compression I Compression
SNWB_AUDIT_OUTPUT DRS<ApplicationAlias>< I N/A -dmp.Z
& $EFT_AUDIT_OUTPUT ArchiveGroupAlias><Ru
(/bvnw01/drs/trans/drsaudit) nDate>
Where,
ApplicationAlias Stored in DRS_ARCHIVED_TABLES table,
NWB for Network Banking Application and
EFT for Debit Card.
ArchiveGroupAlias Stored in DRS_ARCHIVED_TABLES table,
e.g., OPR (for Operational tables)
RunDate Current DRS Processing date in the format
“YYYYMMDD’.
For example, the name of Oracle dump file for DRS_RX_NWB_MAIN STORE
table will be DRSNWBDMS20020523.dmp.Z and for

DRS_RX_EFT_MAIN_STORE table will be DRSEFTDMS20020523.dmp.Z

Old files (DRSNWB*.dmp.Z and DRSEFT*.dmp.Z) are deleted after a
configurable number of days by DRS File Purge job (DRSX362.sh).

10 Support Usage of Archive/Support Export Files

DRS Archive/Support files for Network Banking and Debit Card are created in the
form of compressed Oracle Export database dumps. For details on the naming
conventions, file locations and the file contents, refer to the sections 9.3 and
Appendix F — DRS Archiving Table Mapping.

The compressed Oracle export file formats have been chosen to facilitate transport
of these files to multiple environments and ease of loading. Additionally, as the
data will be sufficiently compacted, the disk usage and transfer time will less. Note
that these files are not meant for restoring the state of tables in Live. The Live
Backup and Restores are discussed in Section 11.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 93 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

The Archive/Support files can be loaded by Support on a separate DRS Support
environment. This would typically be a machine running the same Host operating
system and version of Oracle as Live. The support rig must have all Host work
packages that have been applied to Live. Also, the size of the DRS database must
match that of Live for all tablespaces with the exception of the Main Store
partition tablespaces.

The following steps should be followed to use the Archive/Support files on the
Support rig:

© Copy the compressed Archive/Support file/s to the “/loadarea” directory on the
Support rig.

¢ Uncompress the file/s

e Delete all existing records from the target table/s in order to ensure no Primary
Key violations occur and that there is sufficient space in the target tablespace

e Ifimporting the Main Store table (DRS_RX_NWB_MAIN_ STORE), drop the
table and use import to create the table with the required partition name

¢ Use the Oracle 8.1.7 Import Utility “imp” to load the contents of the file into
target tables. In addition to the mandatory parameters like USERID and FILE,
it is recommended that the following parameters are used to minimise chances

of failure:
BUFFER = 44000000
IGNORE = Y
COMMIT = Y

FROMUSER = OPS$DRS

TOUSER = OPS$DRS.

FILE = <Name of the database dump file>
TABLES = <List of tables being imported>

11 Backup and Recovery

11.1 Backup

The DRS backups use the EMC Timefinder product, which allows the EMC array
to maintain a 3" mirror of defined disk volumes contained within the disk array.
This 3" mirror (known as a BCV) can be split from the parent volumes at any
time. Timefinder also allows the BCV’s to be resynchronised with the parent
disks, only copying the tracks that have changed since the BCV was last
connected, therefore minimising the time taken to resynchronise.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 94 of 183
FUJ00090719
FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

The backup strategy follows the traditional database backup scheme of a cold
backup supported by redo logs tracking the changes made since the cold backup.
The time taken for the cold backup will be limited to the time taken to close down
and restart the Oracle database instance.

The backup schedule is defined by IPDU and ISD but is expected to be along the
following lines:

1. Following the completion of the Network Banking and Debit Card end of day
schedules, resynchronise the BCVs with the parent volumes.

2. Once resynchronised and all other database jobs have completed, shutdown the
DRS Oracle instance.

Split the BCVs from the parent volumes.

Start the Oracle database instance.

wk we

Start backing up the data on the BCV’s to tape.

The BCVs will remain split until the completion of next processing day’s batch
overnight jobs (the Maestro day runs from 8 am in the morning) thus ensuring
improved recovery from backup, if it proves necessary.

The Middleware scripts that control the splitting and resynchronisation of BCV
volumes have been provided by ISD and their integration with the Maestro
schedule has been done by Maestro development.

11.2 Recovery

11.2.1 Process Failure

In case of failure, the DRS processes rollback changes made to the database
wherever possible before exiting and/or make use of the Process Control to save
the last successful restart point.

Dependencies have been defined in the schedule, which disallows Maestro from
running processes that are dependent on the failed process this ensuring data
integrity. The failed process is then re-run by the Maestro scheduler after a
predefined time gap (with manual intervention). In case of multiple restart points in
a process, program logic is used to start from the latest restart point.

11.2.2 System Failure

If the operating system crashes or there is an Oracle Instance failure during the
DRS processing day, it is possible to restart DRS from the point of failure. This is
because the DRS database will be run in ‘Archive-Log’ mode.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 95 of 183
FUJ00090719
FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

Once the system (Sequent — Dynix / Oracle) is re-started, standard Oracle recovery
process would apply all committed transactions which have not been saved earlier,
to the database through the use of redo-log buffers and rollback segments in a
process called “roll forward and back”. For more information refer to the Oracle
Administrators Guide for version 8.1.7.

The Maestro scheduler records the process name that was being executed when
the crash occurred. As in the case of Process Failure, the schedule will need to be
manually restarted from the process that has failed.

11.2.3 Media Failure

In case of a media or disk failure, Oracle may not be able to save / read data from
the disk. This could happen due to a number of causes but as the DRS database is
running in ‘Archive-log’ mode, it is possible to restart from a point in time prior to
the failure in the DRS processing day. This can be achieved by restoring the
previous consistent database backup from the BCV (refer to Section 11.1) and
using the archived and online redo-log files to recover to a point of time just prior
to the media failure.

Successful database recovery from a media failure should be followed by schedule
re-start from the point of failure for the Network Banking/Debit Card and other
connected systems.

It is not envisaged that a part of the schedule would need to be rerun as the restore
using online and archived redo-logs is expected to recover the database to its state
prior to the failure and the incomplete DRS processes could be restarted. However
if there is a need for schedule rerun, refer to Section 14.

12 External System Failures/Restarts

This section lists the external systems that interface with DRS and discusses the
most common failure scenarios and how DRS can recover from them. For an
exhaustive description of Failure Scenarios and Recovery, please refer to [R2].

12.1 C12 Confirmation Agent Failure

If one or more instances of the NBS confirmation agent fail, the DRS C12 Parse
and Load Process (DRSC301) waits for the [C12] XML records to arrive, i.e., the
process loops and polls the input table at regular intervals.

Although, the Horizon NBS [C12] confirmation agent stores checkpoints at
regular intervals in the DRS database and in the Messagestore, there is a possibility
of harvesting duplicate C12 records on agent restart. The DRS C12 Parse and
Load Process (DRSC301) filters any duplicate C12 records as long as they are
received on the same processing day. If the agent instances are not restarted until

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 96 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

12.2

12.2.1

12.2.2

12.3

the next DRS processing day, any re-harvested records are not detected by the
C12. Parse and Load Process (DRSC301) due to _ transient
DRS_RX_{NWBIIEFT}_C12 tables but are detected by the Main Store Match and
Merge Process (DRSC310).

TPS Host/Agent Failure

DRS obtains the [C112] Confirmation Messages, Outlet Last Polled Statuses and
the TIP Cash Account Delivery Statuses from TPS Host. There are two possible
failure scenarios with TPS as described below.

C112 Confirmation Agent Failure

A failure on the part of the C112 TMS Agent to load Network Banking/Debit
Card [C112] transactions into TPS-Host results in the TPS schedule being held up.
This in turn would result in the DRS schedule being held up because of the DRS
Maestro dependency on completion of TPS Reports (schedule named
M_DB_SRV#TPSCAREP).

DRS waits until the C112 TMS Agents have successfully harvested the Network
Banking/Debit Card [C112] transactions into TPS-Host.

TPS Host failure

TPS and DRS share the same the machine. To prevent the resource contention, the
TPS TIP jobs which have to meet an SLA are run before the DRS jobs.

If a TPS Host failure occurs before the start of the DRS schedule, DRS waits for
the TPS issue to be resolved. The DRS Start of Batch Overnight (DRSC353) job
is dependent on TPS Cash Account Reports (schedule M_DB_SRV#TPSCAREP).

There is a Maestro dependency from DRS to TPS schedule as well. TPS
Housekeeping (TPSC209) job can not run until the Network Banking and Debit
Card transactions have been copied to DRS. Refer to [R6] for more details.

If a database error occurs while the DRS C112 Transactions Copy (DRSC303) or
the Last Polled Outlet/CA Receipts Copy (DRSC366) processes are running, DRS
waits until the issue is resolved. The DRS Copy Processes are rerun after the
database problem has been resolved.

RDDS Host Database Failure

If a RDDS Host database failure occurs before the execution of the RDDS-to-
DRS copy process (DRSC364), a Maestro dependency makes DRS wait for
RDDS to be backed up again before allowing the DRSC364 process to run.

If a RDDS Host database failure occurs during the execution of the RDDS-to-
DRS copy process (DRSC364), the process is likely to fail and log one/more

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 97 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

Operational Exceptions to record the error details. Once RDDS database is back
up again, the process can be rerun.

12.4 TES Host Database Failure

A TES Host database failure would result in the C4/D transactions not arriving.
One or more of the TES owned TES_AL_REC_RUN/TES_CAPO_REC_RUN/
TES_LINK_REC_RUN schedules would not complete due to DRSC371 failing
which will result in all the DRS batch overnight schedules being held up.

Once the failure is resolved and the preceding TES processes have completed, the
DRS batch overnight jobs will start execution.

Because of the dependencies within the DRS schedule, there would be a
corresponding delay in the completion of TPS-Host batch overnight.

12.5 FTMS Report-file Transfer Failure

FTMS transfers the Network Banking and Debit Card reconciliation reports to TIP-
remote server and their transfer acknowledgement files back to DRS.

If a failure occurs in transferring these files to the TIP-remote server due to the
failure of FTM transfer mechanism or the Network, DRS-Host would not receive
acknowledgements for the files that could not be transferred. This would be
reflected in the value of I TIP_RECEIPT_DATE in table
DRS_REP FILE REGISTER.

All report files created for transfer to TIP are retained for 5 working days
(configurable) as listed in Appendix G — DRS File Housekeeping Parameters. As
long as the failure is resolved and the report files are transferred with that period,
there would be no loss of data.

12.6 Maestro File Transfer Failure

Maestro scripts transfer the MSU Reports to MSU using NFS mounted host
directory (/ovnw01/drs/trans/drsmsu) on the SSC Server. Another set of scripts
transfer the DRS Support and Archive files to the SSC Archive Server again via
NFS mounted Host directories  (/bvnw01/drs/trans/drssupport and
/bvnw01/drs/trans/drsarchive).

Failure in transferring files to the MSU/SSC Archive may result in some/all of the
files not being transferred. This should not be an issue for Host processing and
would not result in loss of data as long as the file transfer mechanism is able to
successfully transfer the files before the files are deleted by DRS file housekeeping
process.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 98 of 183
FUJ00090719
FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

The files would remain on the DRS-Host for MSU to request for manual transfer
in case of automatic transfer failures. Similarly the Support/Archive files can also
be requested for a manual transfer from the DRS-Host.

From 2.2 and [R4], space for 5 peak working days at phase-2 volumes has been
requested for the DRS Support and MSU-Report directories.

12.7 Audit Server File Transfer Failure

DRS creates Unix hard links for reconciliation reports and a compressed export of
the oldest Main Store partition in the DRS-Audit (/bvnw01/drs/trans/drsaudit)
directory.

Failure in transferring files to the Audit Server may result in some/all of the files
not being transferred to the Audit Server. This should not be an issue for Host
processing and would not result in loss of data as long as the file transfer
mechanism is able to successfully transfer the files before the space allocated to the
audit directory is exhausted or before the files are deleted by Audit file
housekeeping. From 2.2 and [R4], space for 5 peak working days at phase-2
volumes has been requested for the Audit directory.

13. Tuning
13.1 Oracle Tuning

The following table indicates the tuning that has been done to the initTPS.ora
parameter file:

Parameter Value Reason
DB_FILE_MULTIBLOCK_RE I 16 Set to IMb, so that table scans are done as
AD_COUNT close as possible to one extent against the

partitioned main store table and that full
table scans are efficient

DB_FILES 600 Maximum number of database files that can
be opened for this database.

OPEN_CURSORS. 400 Maximum number of open cursors a session
can have at a time.

DML_LOCKS 2048 Maximum number of DML locks — one for
cach table modified in a transaction.

DB_BLOCK_BUFFERS 12800 Attempt to fetch large number of main store

(100MB) transaction records into memory in order to
improve performance

LOG_BUFFERS 163840 Size of the Redo Log Buffers

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 99 of 183
Fujitsu Services

DRS Host Support Guide Ref:

NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
(16MB)
SORT_AREA_SIZE 67108864 I Allows the batch processes to sort large
(64MB) volumes of transactions in memory

PARALLEL_MAX_ SERVERS I 80 Maximum number of Parallel Query
Servers that can be opened. Set to a high
value to allow the various multiple instance
processes to execute parallel queries

PARALLEL_MIN_SERVERS I 10 Minimum number of Parallel Query Servers
that are always open. Value has been set
such that Oracle does not need to open any
parallel query servers while the single
instance processes (¢.g. reports) are running

PROCESSES 100 Maximum number of operating system user
processes that can simultaneously connect
to Oracle.

TRANSACTIONS 64 Maximum number of — Concurrent
Transactions.

DISTRIBUTED_TRANSACTI I 30 Maximum number of — Concurrent

ONS Distributed Transactions.

13.2 Schedule tuning

There are two ways to tune the schedule performance:

13.2.1 Schedule parallelism

FUJ00090719
FUJ00090719

Several parallel streams will run the load, parse and main store update jobs within
the DRS schedule (e.g. if eight streams are run, each stream will process on eighth
of the total number of partitions). The processes have been scheduled such that
write to the same set of tables are not run at the same time.

The parallelism needs to be tuned on a regular basis to take into account the
changing volumes and spread of data so that each activity can make maximum use
of the computer configuration.

Resource pools

Maestro has a facility to limit the number of jobs running that requires a particular
resource, such as a tape drive. These resource pools are user defined, and can be
used to minimise contention.

DRS does not currently use Maestro resource pools as the number of jobs running
at any given time is not considered high enough.

© 2005 Fujitsu Services

COMMERCIAL_IN_CONFIDENCE Page: 100 of 183
FUJ00090719
FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

13.3 Main store partition tuning

The DRS Main Store tables for Network Banking and Debit Card have been
partitioned on Receipt Date and sub-partitioned on ‘hash’ of Horizon-Transaction-
Id. Each partition (along with its sub-partitions) has its own tablespace, which is
spread across physical disks. This has been done to improve query efficiency and is
particularly beneficial for use in parallel queries.

13.4 SQL hint tuning

The Oracle Database Server supports a number of ‘hints’ to its optimiser which
informs the RDBMS at run time of access paths that have been found (through
performance testing) to be the most efficient path to use.

Bearing in mind that DRS is a new product and that the transaction spread may
change over time, the SQL hints used have been stored in a table named
DRS_SQL_HINTS. Host processes that expect to find SQL hints access this table
to fetch and use the SQL hint. This has been implemented to provide for ease of
change.

For processes that access large tables, the hint “Parallel” can be/is used for SQL
operations doing fetches and performing sorts. This makes use of the multiple
processors present on Host, multiple parallel query servers possible due to the
virtual memory available on the host and the striping of the tablespaces’ data files
across disks.

14 Re-run

DRS has been designed to automatically recover from a data centre failure. All
programs will restart at the point of failure regardless of whether the Maestro
schedule was recovered.

Since DRS maintains data for 91 days and the non-transient tables are updated on
receipt of each transaction part, it is not advisable to rerun part of the schedule
that has been successfully processed.

© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 101 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
15 Appendix A — Network Banking Maestro Schedule
DRS Maestro scheduling requirements for Network Banking and Common Jobs
Schedule Name I Schedule Schedule Job Name Job Input No. of I Unix Description Rerun
Y=Common I Frequene Dependencies Dependency I Parameter I Instance I _ user
y s es
DRS_NWB_SOD I Daily DRS_NWB_BATCH_ IDRSC350N IDRS350LK __ I Application 1 drsnwb I This is the start of the Day process and
COMPLETE.FLAG Type increments the system date
SDRS_PROC/DRSC350 NWB
DRS_ETU_C4L I Daily DRS_NWB_SOD DRSC305T Application 1 drsnwb I Loads the ETU data into input tables.
D DRS_ETU_BATCH_ Type
COMPLETE.FLAG Filename SDRS_PROC/DRSC305 NWB
<FILENAME>
DRSC306T IDRSC305N _ I Application 1 drsnwb I End Load of C4/S/D
DRSC30ST I Type
SDRS_PROC/DRSC306 NWB
DRS_NWB_AN IDaily DRS_NWB_SOD DRSC368N Application 1 drs I Uses the Oracle ‘Analyze’ function on
ALYZE 1 Type object groups for database performance
Object
roup list SDRS_PROC/DRSC368 NWB MST MSI
DRS_RDDS_EX IDaily DRS_NWB_SOD DRSC364C ‘Application 1 drs [DRS extract from RDDS, RoutingIContinue on
TRACT DRS_EFT_SOD Type Gateways, Accounting weeks error
Common = Y tddslock SDRS_PROC/DRSC364 NWB No page.
DRS_NWB_RU IDaily DRS_NWB_SOD DRS_NWB 1 drsnwb I Allows C12 agents to call to populate
N_AGT _C12_RUN database.
AGENT
Daily DRS_NWB IDRS_NWB_ 1 drsnwb IInforms the Schedule that the C12
_C12_AGT IC12_RUN_A agents can populate database
RUNNING I GENT

© 2005 Fujitsu Services COMMERCIAL _IN_CONFIDENCE Page: 102 of 183
Fujitsu Services

DRS Host Support Guide

COMMERCIAL_IN_CONFIDENCE

Ref:

Ver:

NB/MAN/003

sion: 5.0

Date: 13/04/2005

FUJ00090719

FUJ00090719

DRS_NWB _C12 I Daily DRS_NWB_RUN_AG I DRSX357 1 drsnwb I Batch Partition Management Process
PARS T
DRSX357_ Sleeps for 60 seconds and then confirms}One auto
MON_NOP DRSX357 has completed successfully. [rerun upon
AGE failure after
waiting 300
seconds.
Will page
on — second
failure.
DRSC30IN IDRSX357_M I Application 8 I drsnwbl [Enable DRS C12 processing into DailyIOne auto
_l ON_NOPAG I Type tables. The process triggers again if the}rerun _ for
E Instance previous instance of DRSC301 fails. the same
Number instance on
Total No ofI failure.
Instances. Subsequent
SDRS_PROC/DRSC301 NWB x 8 failures on
Where x is the instance number betweenIthe same
108s instance
will require
manual
intervention
DRSC301N I DRSX357_M drsnwb2
2 ON_NOPAG
E
DRSC301N I DRSX357_M drsnwb3
3 ON_NOPAG
E
DRSC301N I DRSX357_M drsnwb4
4 ON_NOPAG
E
DRSC301N I DRSX357_M drsnwbS
5 ON_NOPAG
E

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 103 of 183
Fujitsu Services

DRS Host Support Guide

COMMERCIAL_IN_CONFIDENCE

Ref: NB/MAN/003

Version: 5.0

Date: 13/04/2005

FUJ00090719

FUJ00090719

DRSC301N I DRSX357_M drsnwb6
6 ON_NOPAG
E
DRSC301N I DRSX357_M drsnwb7
7 ON_NOPAG
E
DRSC301N I DRSX357_M drsnwb8
8 ON_NOPAG
E
DRSC312N Application 1 drsnwb ISummarises C12 monitor table records} One auto re-
Type and if threshold exceeded writes an}run.
entrance to application log. Subsequent
failures
require
SDRS_PROC/DRSC312 NWB manual
intervention
DRS_NWB_MS_IDaily DRS_NWB_SOD DRSC310D I Every half an} Run Type 8 drsnwbl IEnable Main Store to process oldIMonitor to
DAY Nl hour during} Application transactions alert if still
the day until} Type running at
17:01 Hrs Instance 17:45.
Number
Total No of
Instances SDRS_PROC/DRSC310 DAY NWB x 8
Where x is the instance number between
lto8
DRSC310D drsnwb2
N2
DRSC310D drsnwb3
N3
DRSC310D. drsnwb4
N4
DRSC310D drsnwb5
NS
DRSC310D. drsnwb6
N6

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 104 of 183
Fujitsu Services

DRS Host Support Guide

Ref: NB/MAN/003

Version: 5.0

FUJ00090719

FUJ00090719

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
DRSC310D. drsnwb7
NZ
DRSC310D. drsnwb8
N8
DRS_NWB_SOB I Daily DRS_NWB_ANALYZI DRSC353N Application 1 drs I The Start of Overnight Batch indicates
20:00 E Type Completion of TPS TIP and APS client
TPSCAREP Host processing
DRS_NWB_MS_DAY
SDRS_PROC/DRSC353 NWB
TES_AL_REC_RI Daily See NB/HLD/019 DRSC371N I TESC340. Application 1 drsnwb I Copies the C4/D messages from TES to
UN 20:30 D371LOCK I Type DRS
SDRS_PROC/DRSC371 NWB
TES_CAPO RE IDaily See NB/HLD/019 DRSC371N I TESC340 Application 1 drsnwb I Copies the C4/D messages from TES to
C_RUN 20:30 D371LOCK I Type DRS
SDRS_PROC/DRSC371 NWB
TES_LINK_REC I Daily See NB/HLD/019 DRSC371N I TESC340 Application 1 drsnwb I Copies the C4/D messages from TES to
_RUN 20:30 D371LOCK I Type DRS
SDRS_PROC/DRSC371 NWB
DRS_NWB_C4_ [Daily DRS_ETU_C4LD.DR IDRSC302N Application 8 I drsnwbl [After successful execution of at least/One auto
PARSE SC306T dl Type one file loading this job triggers to parse}rerun for
D371LOCK Instance data. The process triggers for failed}the same
Number parse data once. instance on
Total No ofI failure.
Instances Subsequent
SDRS_PROC/DRSC302 NWB x 8 failures on
Where x is the instance number betweenIthe same
1108 instance
will require
manual
intervention
DRSC302N drsnwb2
2

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 105 of 183
Fujitsu Services

DRS Host Support Guide

COMMERCIAL_IN_CONFIDENCE

Ref: NB/MAN/003

Version: 5.0

Date: 13/04/2005

FUJ00090719
FUJ00090719

DRSC302N drsnwb3
3
DRSC302N drsnwb4
4
DRSC302N drsnwbS
5
DRSC302N drsnwb6
6
DRSC302N drsnwb7
7
DRSC302N drsnwb8
8
DRS_NWB_TPS I Daily DRS_NWB_SOB DRSC303N Application 8 drsnwb1 I DRS bulk copy of C112 from TPS
_COPY _l Type
Instance
Number
Total No ofI
Instances
SDRS_PROC/DRSC303 NWB x 8
Where x is the instance number between
lto8
DRSC303N drsnwb2
2
DRSC303N drsnwb3
3
DRSC303N drsnwb4
4
DRSC303N drsnwb5
5
DRSC303N drsnwb6
6
DRSC303N drsnwb7
7

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 106 of 183
FUJ00090719
FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
DRSC303N drsnwb8
8
DRSC303N IDRSC303N_ I Application 1 drsnwbl I DRS bulk copy of C112 from TPS ofI
9 1 Type 65" partition
Instance
Number
Total No ofI
Instances SDRS_PROC/DRSC303 NWB 65 1
DRS_NWB_MS_I Daily DRS_NWB_C4 PAR IDRSC310N Run Type 8 drsnwbl I DRS Main store Data processing, merge
NIGHT SE, NI Application parts and set state.
Type
DRS_NWB_TPS_CO Instance
PY Number
Total No ofI
TES_AL_REC_RUN Instances SDRS_PROC/DRSC310 NIGHT NWB x
TES_CAPO_REC_RU 8
N Where x is the instance number between
TES_LINK_FILEMO 1008
N_MARKER
DRSC310N drsnwb2
N2
DRSC310N drsnwb3
N3
DRSC310N drsnwb4
N4
DRSC310N drsnwbS
NS
DRSC310N drsnwb6
N6
DRSC310N drsnwb7
NZ
DRSC310N drsnwb8
N8

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 107 of 183
Fujitsu Services

DRS Host Support Guide

COMMERCIAL_IN_CONFIDENCE

Ref: NB/MAN/003

Version: 5.0

Date: 13/04/2005

FUJ00090719

FUJ00090719

DRS_NWB _MS_IDaily DRS_NWB_MS_NIG IDRSC311N Application 1 drsnwb IDRS Main exception storage from daily
EXCPTN HT Type to main
SDRS_PROC/DRSC311 NWB
DRS_TPS_ Daily DRS_RDDS_EXTRA IDRSC366C Application 1 drsnwb I DRS extract from TPS TIP CA Receipts
EXTRCT_D CT Type and Outlets Last Polled.
DRS_NWB_MS_EXC
Common = Y PTN The dependency on
DRS_EFT_MS_EXCP DRS_RDDS_EXTRACT is present to
TN make sure this schedule is not left with
TPSREP.TPSC234 no follow on schedule.
SDRS_PROC/DRSC366 NWB
DRS_NWB REP I Daily DRS_NWB_MS_EXC IDRSC322N Application 1 drsnwb IDRS data extract Main Store to Result
_101 PTN Type tables for NB101 report
DRS_TPS_
EXTRCT_D SDRS_PROC/DRSC322 NWB
DRSC324N IDRSC322N _ I Application 1 drsnwb I DRS file generation for NB101 report
Type
SDRS_PROC/DRSC324 NWB
DRS_NWB_REP I Daily DRS_NWB_MS_EXC I DRSC320N Application 1 drsnwb IDRS data extract Main Store to Result
_102 PTN Type tables for NB102 report
DRS_TPS_
EXTRCT_D SDRS_PROC/DRSC320 NWB
DRSC323N IDRSC320N _ I Application 1 drsnwb IDRS data extract Main Store to State
_l Type Totals tables for NB102 report section 1
Report
Section SDRS_PROC/DRSC323 NWB 1
Number
DRSC323N IDRSC323N_ I Application 1 drsnwb {DRS data extract Main Store to State
_6 1 Type Totals tables for NB102 report section 6
Report

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 108 of 183
Fujitsu Services

DRS Host Support Guide

Ref: NB/MAN/003

Version: 5.0

FUJ00090719

FUJ00090719

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
Section
Number
DRSC323N I DRSC323N_ I Application 1 drsnwb IDRS data extract Main Store to State
7 6 Type Totals tables for NB102 report section 7
Report
Section SDRS_PROC/DRSC323 NWB 7
Number
DRSC323N IDRSC323N_ I Application 1 drsnwb IDRS data extract Main Store to State
2 7 Type Totals tables for NB102 report section
Report 12
Section
Number SDRS_PROC/DRSC323 NWB 12
DRSC323N IDRSC323N_ I Application 8 drsnwbl IDRS data extract Main Store to State
2 12 Type Totals tables for NB102 report sections
Report 2,3, 4, 5, 8,9, 10, and 11.
Section
Number SDRS_PROC/DRSC323 NWB x
Where the value of x is 2, 3, 4, 5, 8, 9,
NWB 2 10,11
DRSC323N IDRSC323N_ I NWB 3 drsnwb2
3 12
DRSC323N IDRSC323N_ INWB 4 drsnwb3
4 12
DRSC323N IDRSC323N_ INWB 5 drsnwb4
5 12
DRSC323N IDRSC323N_ INWB 8 drsnwbS
8 12
DRSC323N IDRSC323N_ INWB 9 drsnwb6
9 12
DRSC323N IDRSC323N_ INWB 10 drsnwb7
10 12
DRSC323N IDRSC323N_ INWB 11 drsnwb8
ul 12

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 109 of 183
Fujitsu Services

DRS Host Support Guide

Ref: NB/MAN/003

Version: 5.0

FUJ00090719

FUJ00090719

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
DRSC325N IDRSC323N_ I Application 1 drsnwb I DRS file generation for NB102 report
2, Type SDRS_PROC/DRSC325 NWB
DRSC323N_
3,
DRSC323N_
4,
DRSC323N_
5,
DRSC323N_
8,
DRSC323N_
9,
DRSC323N_
10,
DRSC323N_
u
DRS_NWB_REP DRS_NWB_REP_101 IDRSC328C Application 1 drsnwb I DRS Summary report
000 DRS_NWB_REP_102 Type
DRS_EFT_REP_101 SDRS_PROC/DRSC328 NWB
Common = Y DRS_EFT_REP_102
DRS_ADMIN __ [Daily DRS_NWB_REP_000 IDRSX365C Application 1 drs I DRS Database Statistics
Type
Common = Y SDRS_SH/DRSX365.sh NWB
DRS_NWB_AD IDaily DRS_ADMIN DRSC361N ‘Application 1 drs IDRS Archiving and Auditing
MIN Type
SDRS_PROC/DRSC361 NWB
DRSC368N IDRSC361N _ I Application 1 drs I Uses the Oracle ‘Analyze’ function on
3 Type object groups for database performance
Object
group list SDRS_PROC/DRSC368 NWB MST MST
EXC STT STI

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 110 of 183
Fujitsu Services

DRS Host Support Guide

COMMERCIAL_IN_CONFIDENCE

Ref: NB/MAN/003
Version: 5.0
Date: 13/04/2005

FUJ00090719
FUJ00090719

DRSX362N IDRSC361N _ I Application 1 drs DRS file purging — housekeeping
Type
SDRS_SH/DRSX362.sh NWB
DRS_NWB_PAU I Daily DRS_NWB_RUN_AG IDRS_NWB 1 drsnwb I Inform C12 Agents about DRSEOD
S_AGT 23:30 T _C12_ PAU
SE_AGT
Daily DRS_NWB IDRS_NWB_ 1 drsnwb I Wait for C12 Agents to Complete
_C12_PAU IC12_PAUSE
SED. AGT
DRS_NWB_TRN I Daily DRSC367N Application 1 drsnwb I File Control FTMS ACK reader
_ACK DRS_NWB_ADMIN Type
SDRS_PROC/DRSC367 NWB
TESC391 _IDRSC367N I Source App 1 tesrep I Create DRS Report
TES_REPOR STES_PROC/TESC391 DRS
TS.TESC390.
DRS_NWB_EO IDaily DRS_NWB_TRN_AC IDRSC35IN ‘Application T drsnwb [End of Batch Process
D K Type End of Day Process
DRS_NWB_PAUS_A
GT SDRS_PROC/DRSC351 NWB
DRSX358N I DRSC351N 1 drsnwb IFlags Batch Partition Management
DRSC301N_ (DRSX357) to exit
1
DRSC301N_ SDRS_PROC/DRSX358
2
DRSC301N_
3
DRSC301N_
4
DRSC301N_
5
DRSC301N_
6
DRSC301N_
7

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 111 of 183
FUJ00090719
FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
DRSC301N_
8
DRS_COLD_BU DRS_NWB_EOD DRS_BCV_ Cold Backup
ESTABLIS
DRS_NWB_C12 PARIH
Ss
Common = Y DRS_EFT_EOD
DRS_EFT_C12_PAR
Ss
DRS_DB_S [DRS_BCV_E Cold Backup
TOP STABLISH
DRS_BCV_IDRS_DB_ST Cold Backup
SPLIT OP
DRS_DB_S [DRS_BCV_S Cold Backup
TART PLIT
DRS_BCV_IDRS_BCV_S Cold Backup
BACKUP IPLIT
DRS_COMPLET DRS_COLD_BU.DB_ IDRS_NWB Creates Flag files
E START _BATCH_C
OMPLETE
Common = Y DRS_EFT_
BATCH_C
OMPLETE.
FLAG
ASSUMPTIONS

1. All the DRS users point to the same HOME directory “/home/drs”

2. Valid Values of the Parameters will be
e Run Type : DAY/NIGHT

© Application Type : NWB

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 112 of 183
FUJ00090719
FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

e Instance Number : The sequence number of the instance which is one of the numbers from 1 — Max Number of Instances

Total Instances: Total Number of Instances that are run for a Job

© 2005 Fujitsu Services COMMERCIAL _IN_CONFIDENCE Page: 113 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
16 Appendix B — Debit Card Maestro Schedule
Schedule Name I Schedule Schedule Job Name Input No. of I Unix Description Rerun
Frequenc Dependencies Dependenc I Parameter I Instance user
y y s es
DRS_EFT_SOD [Daily DRS_EFT_BATCH_CIDRSC350E _IDRS350LK I Application 1 drseft_ This is the start of the Day process and
OMPLETE.FLAG Type increments the system date
SDRS_PROC/DRSC350 EFT.
DRS_EFT_ANA I Daily DRS_EFT_SOD DRSC368E_1 Application 1 drs Uses the Oracle ‘Analyze’ function on
LYZE Type object groups for database performance
Object
group list SDRS_PROC/DRSC368 EFT MST MSI
DRS_EFT_RUN I Daily DRS_EFT_SOD DRS_EFT_C 1 drseft I Allows C12 agents to call to populate
_AGT 12_RUN_AG database.
ENT
Daily DRS_EFT_C IDRS_EFT_ 1 drseft_ IInforms the Schedule that the C12
12_AGT_RU IC12_RUN_ agents can populate database
NNING AGENT
DRS_EFT_C12_ IDaily DRS_EFT_RUN_AG IDRSC301E_1 ‘Application 8 drseftl_ [Enable DRS C12 processing into Daily[One auto
PARS T Type tables. The process triggers again if the} rerun for
Instance previous instance of DRSC301 fails. the — same
Number instance on
Total No ofI failure.
Instances Subsequent
SDRS_PROC/DRSC301 EFT x 8 failures on
Where x is the instance number betweenIthe same
1108 instance
will require
manual
intervention
DRSC301E_2 drseft2
DRSC301E_3 drseft3

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 114 of 183
Fujitsu Services

DRS Host Support Guide

COMMERCIAL_IN_CONFIDENCE

Ref: NB/MAN/003

Version: 5.0

Date: 13/04/2005

FUJ00090719

FUJ00090719

DRSC301E_4 drsefi4
DRSC301E_5 drseftS
DRSC301E_6 drseft6
DRSC301E_7 drseft7
DRSC301E_8 drseft8
DRSC312E Application 1 drseft_ ISummarises C12 monitor table records] One auto re:
Type and if threshold exceeded writes an}run.
entrance to application log. Subsequent
failures
require
SDRS_PROC/DRSC312 EFT manual
intervention
DRS_EFT MS_ IDaily DRS_EFT SOD DRSC310DE IEvery halfIRun Type 8 drseftl_ [Enable Main Store to process oldIMonitor to
DAY il an hour I Application transactions alert if still
during the} Type running at
day until I Instance 17:45.
17:01 Hrs — I Number
Total No of
Instances SDRS_PROC/DRSC310 DAY EFT x 8
Where x is the instance number between
ltos
DRSC310DE drsefi2
2
DRSC310DE drseft3
3
DRSC310DE drseft4
4
DRSC310DE drsefiS
5
DRSC310DE drsefié
6
DRSC310DE drseft7
7

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 115 of 183
Fujitsu Services

DRS Host Support Guide

Ref:

NB/MAN/003

Version: 5.0

FUJ00090719

FUJ00090719

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
DRSC310DE drsefi8
8
DRS_EFT_C2_P IMon-Sat IDRS_EFT_SOD DRSC307E Application 1 drseft_ I Extracts contents of C2 Out table into
1D 15:00 Type an XML file.
DRSC308E _IDCSM_S_BI Application 1 drseft_IParses C2 status file and updates C2
ULK_PI1D.IType Out table. (Requires C2 status file from
DCSM_S B DCS C2 Agent)
ULK Pl
DRS_EFT_PAU I Daily DRS_EFT_C Application 1 drseft I Signal EFT C12 agent to stop
S_AGT 20:30 12_PAUSE_ Type
AGT
DRS_EFT_C IDRS_EFT_ 1 Wait for C12 Agents to Complete
12_PAUSED IC12_PAUS
E_AGT
FIFTEEN_MI}DRS_EFT_ 1 Allow C12 Parse instances to complete
N_WAIT C12_PAUS output table population by waiting for
ED 15 minutes. This will allow the parser
instances to process up to approximately.
45000 transactions if present in the
input table prior to the C2 Bulk file
being produced. This should minimise
reconcilliation report exceptions in
scenarios where the network has been
down for a period of time and the data
centre systems then have to ‘catch up’.
DRS_EFT_C2 P IMon-Sat_IDRS_EFT_SOD DRSC307E ‘Application 1 drseft_ [Extracts contents of C2 Out table into
2D 20:30 DRS_EFT_PAUS_AG Type an XML file.
T
DRS_EFT C2 Pl D
DRSC308E IDCSM_S_BI Application 1 drseft IParses C2 status file and updates C2
ULK_P2D. I Type Out table. (Requires C2 status file from
DCSM_S_B DCS C2 Agent)
ULK_P2

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 116 of 183
Fujitsu Services

DRS Host Support Guide

COMMERCIAL_IN_CONFIDENCE

Ref: NB/MAN/003

Version: 5.0

Date: 13/04/2005

FUJ00090719

FUJ00090719

DRS_EFT_C2_P I Sunday DRS_EFT_SOD DRSC307E Application 1 drseft I Extracts contents of C2 Out table into
1_8U 20:30 DRS_EFT_PAUS_AG Type an XML file.
T
DRSC308E IDCSM_S_BI Application 1 drseft IParses C2 status file and updates C2
ULK_P1S.D] Type Out table. (Requires C2 status file from
CSM_S BU DCS C2 Agent)
LK Pl
DRS_EFT_SOB I Daily DRS_EFT_ANALYZ IDRSC353E Application 1 drs I The Start of Overnight Batch indicates
20:30 E Type Completion of TPS TIP and APS client
TPSCAREP Host processing
DRS_EFT_MS_DAY
SDRS_PROC/DRSC353 EFT
DRS_EFT_C4LDIMon-Sat_ [TPSCAREP DRSC305E_ Application 1 drseft_ [Load C40 file for PFG cycle 1 into input
I DRS_EFT_C2_P2_D IC40_P1 Type tables
DCSM_S_BULK_P2D &
File Name SDRS_PROC/DRSC305 EFT)
<FILENAME>
DRSC30S5E_S}DRSC305E I Application 1 drseft_ I Load S file for PFG cycle 1
_Pl _C40_PL Type
DRSC30S5E__IDRSC305E I Application 1 drseft_ I Load C40 file for PFG cycle 2
C40_P2 “SPI Type
DRSC305E_S]DRSC305E I Application 1 drseft_ [Load S file for PFG cycle 2
_P2 -C40_P2— I Type
DCSM_EMIS I DRSC30SE I Application 1 drseft_ I Load C4D file.
-DRSC30SE_ I_S_P2 Type This job is actually a part of
C4D & DCSM_EMIS schedule which runs this
DCSM_EM job only on working days, i.e., Monday
IS.DCSM_ to Friday except bank holidays. But the
C4D_BULK job dependencies shown here have been
implemented in the same way.
DRSC306E DRSC305E I Application 1 drseft I End Load of C4/S/D
_S PI Type

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 117 of 183
Fujitsu Services

DRS Host Support Guide

COMMERCIAL_IN_CONFIDENCE

Ref: NB/MAN/003
Version: 5.0
Date: 13/04/2005

FUJ00090719

FUJ00090719

SDRS_PROC/DRSC306 EFT.
DRS_EFT_C4LD I} Sun TPSCAREP DRSC305E_ Application 1 drseft I Load C40 file for PFG cycle I into input
2 DRS_EFT_C2 P1_SUIC40_P1 Type tables
DCSM_S BULK PIS
SDRS_PROC/DRSC305 EFT)
<FILENAME>
DRSC30SE_S]DRSC305E I Application 1 drseft_ [Load S file for PFG cycle 1
Pl _C40_P1 I Type
DRSC306E I DRSC305E I Application 1 drseft I End Load of C4/S/D
_C4D Type
SDRS_PROC/DRSC306 EFT
DRS_EFT_C4 P IDaily DRS_EFT_C4LD_1.D IDRSC302E_1 ‘Application 8 drseftl [After successful execution of at least}One auto
ARSE RSC305E_C40_P1, Type one file loading this job triggers to parse} rerun for
Instance data. The process triggers for failed}the same
DRS_EFT_C4LD_2.D Number parse data once. instance on
RSC30SE_C40_P1 Total No of failure.
Instances Subsequent
SDRS_PROC/DRSC302 EFT x 8 failures on
Where x is the instance number betweenIthe same
1008s instance
will require
manual
intervention,
DRSC302E_2 drseft2
DRSC302E_3 drseft3
DRSC302E_4 drsefi4
DRSC302E_5 drsefiS
DRSC302E_6 drsefi6
DRSC302E_7 drseft7
DRSC302E_8 drseft8

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 118 of 183
Fujitsu Services

DRS Host Support Guide

Ref: NB/MAN/003

Version: 5.0

FUJ00090719

FUJ00090719

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
DRS_EFT_C4 R DRS_EFT_MS_DAY, I DRSC370E_1 8 drsefil I Update of seconds component of Receipt}One — auto
CPTD DRS_EFT_C4_PARS Date in C4/D Daily and Exception} rerun for
E tables with values from C2 Output} the same
Table. instance on
SDRS_PROC/DRSC370 EFT x 8 EXCP I failure.
Where x is the instance number between I Subsequent
1 to 8 and EXCP is used on one}failures on
instance to handle exception tables the same
instance
will require
manual
intervention
DRSC370E_2 drsefi2
DRSC370E_3 drseft3
DRSC370E_4 drsefi4
DRSC370E_5 drsefts
DRSC370E_6 drsefié
DRSC370E_7 drseft7
DRSC370E_8 drseft8
DRS_EFT_TPS_ [Daily DRS_EFT_SOB DRSC303E_1 Application 8 drseft!_ [DRS bulk copy of C112 from TPS
COPY Type
Instance
Number SDRS_PROC/DRSC303 EFT x 8
Total No ofI Where x is the instance number between
Instances 108
DRSC303E_2 drseft2
DRSC303E_3 drseft3
DRSC303E_4 drsefi4
DRSC303E_5 drsefiS
DRSC303E_6 drseft6
DRSC303E_7 drseft7

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 119 of 183
FUJ00090719
FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
DRSC303E_8 drsefi8
DRSC303E_9 I DRSC303E I Application 1 drseft!_ [DRS bulk copy of Cl12 from TPS of
il Type 65" partition
Instance
Number
Total No ofI
Instances SDRS_PROC/DRSC303 EFT 65 1
DRS_EFT_MS__IDaily DRS_EFT_C4_RCPT IDRSC310NE Run Type 8 drseftl_I DRS Main store Data processing, merge
NIGHT D, _l Application parts and set state.
DRS_EFT_TPS_COP Type
Y Instance
Number
Total No ofI
Instances SDRS_PROC/DRSC310 NIGHT EFT x
8
Where x is the instance number between
1t08
DRSC310NE drseft2
2
DRSC310NE drsefi3
3
DRSC310NE drseft4
4
DRSC310NE drsefiS
5
DRSC310NE drseft6
6
DRSC310NE drseft7
7
DRSC310NE drseft8
8
DRS_EFT_MS_ IDaily DRS_EFT_MS_NIGH IDRSC311E Application 1 drseft_ [DRS Main exception storage from daily
EXPTN T Type to main

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 120 of 183
Fujitsu Services

DRS Host Support Guide

COMMERCIAL_IN_CONFIDENCE

Ref: NB/MAN/003

Version: 5.0

Date: 13/04/2005

FUJ00090719

FUJ00090719

SDRS_PROC/DRSC311 EFT.

DRS_EFT_REP_ I Daily DRS_EFT_MS_EXCP I DRSC322E Application 1 drseft IDRS data extract Main Store to Result
101 T™N Type tables for NB101 report
DRS_TPS_EXTRCT_
D SDRS_PROC/DRSC322 EFT.
DRSC324E DRSC322E I Application 1 drseft I DRS file generation for NB101 report
Type
SDRS_PROC/DRSC324 EFT
DRS_EFT_REP_IDaily DRS_EFT_MS_EXCP IDRSC320E Application 1 drseft. [DRS data extract Main Store to Result
102 TN Type tables for NB102 report
DRS_TPS_EXTRCT_
D SDRS_PROC/DRSC320 EFT.
DRSC323E_1} DRSC320E I Application 1 drseft_ IDRS data extract Main Store to State
Type Totals tables for NB102 report section 1
Report
Section SDRS_PROC/DRSC323 EFT 1
Number
EFT 1
DRSC323E_6}IDRSC323E I Application 1 drseft_ IDRS data extract Main Store to State
I Type Totals tables for NB102 report section 6
Report
Section SDRS_PROC/DRSC323 EFT 6
Number
EFT 6
DRSC323E_7 I DRSC323E I Application 1 drseft_ IDRS data extract Main Store to State
6 Type Totals tables for NB102 report section 7
Report
Section SDRS_PROC/DRSC323 EFT 7
Number
EFT7
DRSC323E_1 I DRSC323E I Application 1 drseft IDRS data extract Main Store to State
2 7 Type Totals tables for NB102 report section
Report 12
Section

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 121 of 183
Fujitsu Services

DRS Host Support Guide

Ref:

NB/MAN/003

Version: 5.0

FUJ00090719
FUJ00090719

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
Number
EFT 12
DRSC323E_2 I DRSC323E I Application 8 drseftl IDRS data extract Main Store to State
12 Type Totals tables for NB102 report sections
Report 2,3, 4, 5, 8,9, 10, and 11.
Section
Number SDRS_PROC/DRSC323 EFT x
Where the value of x is 2, 3, 4, 5, 8, 9,
EFT 2 10,11
DRSC323E_3}DRSC323E I EFT 3 drsefi2
2
DRSC323E_4]DRSC323E IEFT 4 drseft3
2
DRSC323E_5} DRSC323E IEFT 5 drseft4
2
DRSC323E_8 I DRSC323E IEFT 8 drsefiS
“2
DRSC323E_9 I DRSC323E I EFT 9 drsefi6
2
DRSC323E_1 I DRSC323E IEFT 10 drseft7
0 _12
DRSC323E_1 } DRSC323_ IEFT 11 drseft8
1 12
DRSC325E IDRSC323E I Application 1 drseft_ I DRS file generation for NB102 report
_2, Type SDRS_PROC/DRSC325 EFT
DRSC323E
3,
DRSC323E
4,
DRSC323E
5,

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 122 of 183
FUJ00090719

FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
DRSC323E
_8,
DRSC323E
9,
DRSC323E
_10,
DRSC323E
int
DRS_EFT_ADM IDaily DRS_ADMIN DRSC361E Application 1 drs _IDRS Archiving and Auditing
IN DRS_NWB_ADMIN Type
SDRS_PROC/DRSC361 EFT.
DRSC368E_3 I DRSC361E I Application 1 drs I Uses the Oracle ‘Analyze’ function on
Type object groups for database performance
Object
group list SDRS_PROC/DRSC368 EFT MST MST
EXC STT STI
DRSX362E IDRSC361E I Application 1 drs I DRS file purging — housekeeping
Type
SDRS_SH/DRSX362.sh EFT
DRS_EFT_A IDRSX362E 1 DRS DCP File Auditing
UDIT
DRS_EFT_TRN_I Daily DRS_EFT_ADMIN — IDRSC367E Application 1 drseft_ I File Control FTMS ACK reader
ACK Type
SDRS_PROC/DRSC367 EFT.
DRS_EFT_EOD I Daily DRS_EFT_TRN_ACK I DRSC351E Application 1 drseft I End of Batch Process
Type End of Day Process
SDRS_PROC/DRSC351 EFT.
ASSUMPTIONS

1. All the DRS users point to the same HOME directory “/home/drs”

2. Valid Values of the Parameters will be

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 123 of 183
FUJ00090719
FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

e Run Type : DAY/NIGHT
¢ Application Type : EFT
e Instance Number : The sequence number of the instance which is one of the numbers from 1 —- Max Number of Instances

Total Instances: Total Number of Instances that are run for a Job

© 2005 Fujitsu Services COMMERCIAL _IN_CONFIDENCE Page: 124 of 183
FUJ00090719
FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

17. Appendix C — Tablespaces and Raw Volumes
Refer to [R14] for full details.

© 2005 Fujitsu Services COMMERCIAL _IN_CONFIDENCE Page: 125 of 183
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

18 Appendix D— DRS Tables

This section provides a list of tables used by DRS along with their purpose and partition key details.

18.1 Common Table

These tables are common between the Network Banking and Debit Card.

FUJ00090719
FUJ00090719

© 2005 Fujitsu Services COMMERCIAL _IN_CONFIDENCE Page: 126 of 183
Fujitsu Services

COMMERCIAL_IN_CONFIDENCE

DRS Host Support Guide

Ref: NB/MAN/003

Version: 5.0

Date: 13/04/2005

FUJ00090719
FUJ00090719

Table Name

Partition Key

Brief Description

DRS_ARCHIVED_TABLES

Holds the parameters that define rules for archiving each table.

DRS_C4SD_FILE_REGISTE
R

Records loading and processing of NBE files received into DRS.

DRS_EXCEPTION_CODES

Contains all the possible exceptions the DRS system may encounter. If an
exception is raised and does not appear in this table then it is known an
unknown error.

DRS_FILES_TO_HOUSEKE
EP

Holds parameters that define rules for housekeeping [purging] the DRS-Host
owned data directories \ files.

DRS_OPERATIONAL_ EXC
EPTIONS

Stores details of errors that the system has encountered during processing (or
during the time the system is operating). Errors are inserted into this table
from individual modules.

DRS_ORACLE_ERROR_CO
DES

Stores all Oracle Error Codes that correspond to a data exception.

DRS_PROCESSES

List of all processes with descriptions used by the DRS System.

DRS_PROCESS_AUDIT

Table maintains process audit information for all DRS Host processes. An
entry is made in it at the beginning and end of each Host process.

DRS_PROCESS_CONTROL

Table is used to allow process re-startability. An entry is made for new
execution of a DRS process instance.

In case such an entry exists for an instance for the processing day, a re-start
condition is assumed. A valid Process end date indicates process completion.
Some processes require multiple runs for the processing day and this is
handled by incrementing the run number for run of the process.

DRS_REPORTS

Holds static data of all Reports defined for each application and destination.

DRS_REP_FILE_REGISTER

Details of each report produced are logged into this table. Also any links
created are flagged for each report.

DRS_REP_LINES

Hold SQL queries called by various report programs and used to derive the
results for various Report sections.

DRS_SQL_HINTS

Stores the SQL hints that may be used by DRS host/workstation processes to
optimise the query performance. Storing the SQL Hint outside the code gives
the facility of changing the hint without having to redeliver code.

DRS_STATE_VALIDATION

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 127 of 183
Fujitsu Services

COMMERCIAL_IN_CONFIDENCE

DRS Host Support Guide

Ref: NB/MAN/003

Version: 5.0

Date: 13/04/2005

FUJ00090719
FUJ00090719

RULES

Table to store DRS state validation rule ids and rule definitions.

DRS_SYSTEM_PARAMETE
RS

Stores all DRS System Parameters for each Application-Type.

DRS_TRANSACTION_STA
TES

Lookup table that stores the states a transaction can be set to.

DRS_TRANSACTION_TYP
E_GROUPS

Lookup table that stores the Transaction-Type numbers contained within a
transaction group.

RDDS_ACCOUNTING_WEE
KS

DRS local copy of RDDS Accounting Weeks used for NB103 reporting.

RDDS_ROUTING_GATEW
AYS

DRS local copy of RDDS Routing Gateways.

TMS_ACT_DRS - Agent Checkpoint table. This table is populated by the Horizon NBS
Confirmation C12 Agent with a pointer to the last record from the
Messagestore that has been successfully loaded into DRS.

TMS_ART_DRS. - Table stores the run state of the Horizon NBS Confirmation C12 Agent. The

status is used to communicate the run state of the Agent to other Agent
instances.

TPS_OUTLETS_LAST_POL
LED

Contains date of Last End of Day message received by TPS from each outlet by
Group-Id. Copied daily from TPS after the TPS batch run

TPS_TIP_CA_RECEIPTS

Contains dates of when the last 13 Cash Account files have been receipted by
TIP for each Outlet

Copied daily from TPS afier the TPS batch run.

DRS_ANALYZED_OBJECT
S

To store the details of DRS database objects need to be ANALYZED to gather
the statistics. The statistics is used by Oracle optimiser to improve the query
performance.

DRS_MSU_TEMP_RESULT

To store the temporary results of the query executed by the DRS Workstation.

18.2 Network Banking Tables

The following tables are specific to the Network Banking.

[ Table Name

[ Partition Key

l Brief Description

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 128 of 183
FUJ00090719
FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
DRS_C12_NWB_INP_EXCE I - Stores unparsable / corrupt / invalid NBE [C12] XML messages.
PTIONS
DRS_C4SD_NWB_INP_EXC I - Stores unparsable / corrupt / invalid NBE [C4/S/D] XML messages.
EPTIONS
DRS_REP_NWB_CAP_TOT I - This table holds selective data from
ALS DRS_RX_NWB_MAIN STORE,

DRS_RX_NWB MAIN STORE_UPDATES,
DRS_RX_NWB_C112_EXCP_MAIN and
DRS_RX_NWB_C4_EXCP_MAIN. This set of data is then used to populate
DRS_REP_NWB_RESULTS_NB103.

DRS_REP_NWB_RESULTS_ This table holds data from a combination of DRS_RX_NWB_ MAIN STORE
NBIOL and DRS_RX_NWB_C4_EXCP_MAIN used to populate report line details for
the NB101 Settlement Statement.

This table holds selective data from DRS_REP_NWB_STATE_TOTALS

DRS_REP_NWB_RESULTS_

NB102_1 required to populate report line details for the NB102 Section 1 output file.
DRS_REP_NWB_RESULTS_ I - This table holds selective data from a combination of
NB102_10 DRS_RX_NWB_MAIN STORE, DRS_RX_NWB C112_EXCP_MAIN,

DRS_RX_NWB_C12_EXCP_MAIN, I DRS_RX_NWB_C4_EXCP_MAIN,
DRS_RX_NWB_D_EXCP_MAIN and DRS_RX_NWB_S_EXCP_MAIN used
to populate report line details for the NB102 Section 10 output file.

DRS_REP_NWB_RESULTS_ This table holds selective data from a combination of
NBI02_11 DRS_RX_NWB_MAIN_STORE, DRS_RX_NWB_C112_EXCP_MAIN,
DRS_RX_NWB_C12_EXCP_MAIN, I DRS_RX_NWB_C4_EXCP_MAIN,
DRS_RX_NWB_D_EXCP_MAIN and DRS_RX NWB_S EXCP_MAIN
required to populate report line details for the NB102 Section 11 output file.
DRS_REP_NWB_RESULTS_ This table holds selective data from DRS_REP_NWB_STATE_TOTALS
NB102_12 required to populate report line details for the NB102 Section 12 output file.
DRS_REP_NWB_RESULTS_ This table holds selective data from a combination of
NB102_2 DRS_RX_NWB_MAIN_ STORE, DRS_RX_NWB_C112_EXCP MAIN,
DRS_RX NWB C12 EXCP MAIN, DRS _RX_NWB C4 EXCP_MAIN,
DRS_RX NWB_D EXCP MAIN and DRS _RX NWB_S EXCP MAIN
required to populate report line details for the NB102 Section 2 output file.

This table holds selective data from a combination of

DRS_REP_NWB_RESULTS_

© 2005 Fujitsu Services COMMERCIAL _IN_CONFIDENCE Page: 129 of 183
Fujitsu Services DRS Host Support Guide

COMMERCIAL_IN_CONFIDENCE

Ref: NB/MAN/003

Version: 5.0

Date: 13/04/2005

FUJ00090719
FUJ00090719

NBI02_3

DRS_RX_NWB_MAIN STORE, DRS_RX_NWB_C112_EXCP_MAIN,
DRS_RX_NWB_C12 EXCP_ MAIN, I DRS_RX_NWB C4 EXCP_MAIN,
DRS_RX_NWB_D EXCP MAIN and DRS_RX NWB_S EXCP_MAIN
required to populate report line details for the NB102 Section 3 output file.

DRS_REP_NWB_RESULTS_
NB102_4

This table holds selective data from a combination of
DRS_RX_NWB_MAIN STORE, DRS_RX_NWB_C112_EXCP_MAIN,
DRS_RX_NWB_C12 EXCP_ MAIN, I DRS_RX_NWB C4 EXCP_MAIN,
DRS_RX_NWB_D EXCP MAIN and DRS RX NWB_S EXCP MAIN
required to populate report line details for the NB102 Section 4 output file.

DRS_REP_NWB_RESULTS_
NB102_5

This table holds selective data from a combination of
DRS_RX NWB_MAIN STORE, DRS_RX_NWB C112 EXCP_MAIN,
DRS_RX_NWB_C12_EXCP_MAIN, I DRS_RX_NWB_C4_EXCP_MAIN,
DRS_RX_NWB_D_EXCP_MAIN and DRS_RX_NWB_S EXCP_MAIN
required to populate report line details for the NB102 Section 5 output file.

DRS_REP_NWB_RESULTS_

This table holds selective data from DRS_REP_NWB_STATE_TOTALS

NBI02_6 required to populate report line details for the NB102 Section 6 output file.
DRS_REP_NWB_RESULTS_I - This table holds selective data from DRS REP _NWB_STATE_TOTALS
NB102_7 required to populate report line details for the NB102 Section 7 output file.
DRS_REP_NWB_RESULTS_ I - This table holds selective data from a combination of
NB102_8 DRS_RX_NWB_MAIN_ STORE, DRS_RX_NWB_C112_EXCP MAIN,

DRS_RX_NWB_CI2_EXCP_MAIN, I DRS_RX_NWB_C4_EXCP_MAIN,
DRS_RX_NWB_D_EXCP_MAIN and DRS_RX_NWB_S EXCP_MAIN
required to populate report line details for the NB102 Section 8 output file

DRS_REP_NWB_RESULTS_
NB102_9

This table holds selective data from a combination of
DRS_RX_NWB_MAIN_STORE, DRS_RX_NWB_C112_EXCP_MAIN,
DRS_RX_NWB_C12_EXCP_MAIN, I DRS_RX_NWB_C4 EXCP_MAIN,
DRS_RX_NWB_D_EXCP_MAIN and DRS _RX_NWB_S EXCP_MAIN to
populate report line details for the NB102 Section 9 output file.

DRS_REP_NWB_RESULTS_
NB103

This table holds selective data from DRS_REP_NWB_CAP_TOTALS required
to populate report line details for the NB103 Settled Transaction / Cash
Account Reconciliation Statement output file.

DRS_REP_NWB_STATE_T I -
OTALS

This table holds selective data from
DRS_RX_NWB_MAIN_STORE,

© 2005 Fujitsu Services COMMERCIAL _IN_CONFIDENCE

Page: 130 of 183
Fujitsu Services

DRS Host Support Guide

COMMERCIAL_IN_CONFIDENCE

Ref: NB/MAN/003
Version: 5.0
Date: 13/04/2005

FUJ00090719
FUJ00090719

DRS_RX_NWB_MAIN STORE_UPDATES,
DRS_RX_NWB_C112_EXCP_MAIN, DRS_RX_NWB _C12_EXCP_MAIN,
DRS_RX_NWB_C4 EXCP_MAIN, DRS RX_NWB_D_EXCP_MAIN and
DRS_RX_NWB_S_EXCP_MAIN. This set of data is then used to populate
NB102 results tables for sections 1, 6, 7 and 12.

DRS_RX_NWB C112

HASH
(HORIZON_TRANSACTION
_ID), 64 partitions

Table contains the parsed and domain-validated [C112] records for a DRS
processing Day. For duplicate and corrupt records, the non-key column values
are I blank and a corresponding record is created in the table
DRS_RX_NWB_C112_EXCP.

DRS_RX_NWB_C112_EXCP

C112 Daily exceptions table populated by the DRS C112 load processes.

DRS_RX_NWB_C112_EXCP
_MAIN

This table stores C112 exception data for up to 90 days. The table will be
partitioned on the same partition key as the Main Store table, i.e., on the
Receipt Date of the transaction.

Data older than 90 days will be archived and then deleted from the table.

DRS_RX_NWB_C12

HASH
(HORIZON_TRANSACTION
_ID), 64 partitions

Table contains the parsed and domain-validated [C12] records for a DRS
processing Day. For duplicate and corrupt records, the non-key column values
are I blank and a corresponding record is created in the table
DRS_RX_NWB C12_EXCP.

DRS_RX_NWB_C12_EXCP

C12 Daily Exceptions table populated by the DRS C12 Parse processes.

DRS_RX_NWB_C12_EXCP_
MAIN

This table stores C12 exceptions data for up to 90 days. The table will be
partitioned on the same partition key as the Main Store table, i.e., on the
Receipt Date of the transaction.

Data older than 90 days will be archived and then deleted from the table.

DRS_RX_NWB_C4

Table contains the parsed and domain-validated [C4] records for a DRS
processing Day. For duplicate and corrupt records, the non-key column values
are 1 blank and a corresponding record is created in the table
DRS_RX_NWB C4 EXCP.

DRS_RX_NWB_C4_EXCP.

C4 Daily Exceptions table populated by the DRS C4 Parse processes.

DRS_RX_NWB_C4_EXCP_
MAIN

This table stores C4 exception data for up to 90 days. The table will be
partitioned on the same partition key as the Main Store table, i.e., on the
Receipt Date of the transaction.

Data older than 90 days will be archived and then deleted from the table.

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 131 of 183
Fujitsu Services

DRS Host Support Guide

COMMERCIAL_IN_CONFIDENCE

Ref: NB/MAN/003
Version: 5.0
Date: 13/04/2005

FUJ00090719
FUJ00090719

DRS_RX_NWB_D

HASH
(HORIZON_TRANSACTION
_ID), 64 partitions

Table contains the parsed and domain-validated [D] records for a DRS
processing Day. For duplicate and corrupt records, the non-key column values
are I blank and a corresponding record is created in the table
DRS_RX_NWB_D _EXCP.

DRS_RX_NWB_D_EXCP

D Daily Exceptions table populated by the DRS D Parse processes.

DRS_RX_NWB_D_EXCP_M
AIN

This table stores [D] exception data for up to 90 days. The table will be
partitioned on the same partition key as the Main Store table, i.e., on the
Receipt Date of the transaction.

Data older than 90 days will be archived and then deleted from the table.

DRS_RX_NWB_MAIN_STO
RE

RANGE (RECEIPT_DATE)
(upto 91 partitions)
Sub-partitioned on HASH
(HORIZON_TRANSACTION
_ID), 64 sub-partitions

Main DRS table that store all the transaction parts received along with the
transaction status

DRS_RX_NWB_MAIN_STO
RE_UPDATES

Table stores a copy of all the changes done to the Main Store partitions other
than the current day's partition.

DRS_RX_NWB_S

HASH
(HORIZON_TRANSACTION
_ID), 64 partitions

Table contains the parsed and domain-validated [S] records for a DRS
processing Day. For duplicate and corrupt records, the non-key column values
are 1 blank and a corresponding record is created in the table
DRS_RX_NWB S$ _EXCP.

DRS_RX_NWB_S _EXCP

$ Daily Exceptions table populated by the DRS S Parse processes

DRS_RX_NWB_S_EXCP_M
AIN

This table stores [S] exception data for up to 90 days. The table will be
partitioned on the same partition key as the Main Store table, i.e., on the
Receipt Date of the transaction.

Data older than 90 days will be archived and then deleted from the table.

FTMS_RX_NWB_C4SD

HASH
(DRS_INSERT_SEQUENCE
_NUMBER), 8 partitions

C4/S/D Input Store populated by the DRS File load process using transactions
from the C4/S/D data file from the NBS Switch for Network Banking and
Solve-PFG/MA for Debit Card.

TMS_RX_NWB_C12

HASH
(DRS_INSERT_SEQUENCE
_NUMBER), 8 partitions

C12 Input Store populated by the Agent instances via database object calls

DRS_TX_NWB_C2_AL_A

RANGE

NBX C2 table that stores all the C2 transaction for the financial institution
AL A

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 132 of 183
Fujitsu Services

DRS Host Support Guide

COMMERCIAL_IN_CONFIDENCE

Ref:

Version:

NB/MAN/003
5.0

Date: 13/04/2005

FUJ00090719
FUJ00090719

(PARTITION_LOGICAL_DA
TE) (Upto 5 Partitions) Sub-
partitioned on
HASH(SUBPARTITION_ID),
100 sub-partitions.

DRS_TX_NWB_C2_AL_B

RANGE
(PARTITION_LOGICAL_DA
TE) (Upto 5 Partitions) Sub-
partitioned on
HASH(SUBPARTITION_ID),
100 sub-partitions.

NBX C2 table that stores all the C2 transaction
AL_B

for the financial

institution

A

DRS_TX_NWB_C2_CAPO_

RANGE
(PARTITION_LOGICAL_DA
TE) (Upto 5 Partitions) Sub-
partitioned on
HASH(SUBPARTITION_ID),
100 sub-partitions.

NBX C2 table that stores all the C2 transaction
CAPO_A

for the financial

institution

B

DRS_TX_NWB_C2_CAPO_

RANGE
(PARTITION_LOGICAL_DA
TE) (Upto 5 Partitions) Sub-
partitioned on
HASH(SUBPARTITION_ID),
100 sub-partitions.

NBX C2 table that stores all the C2
CAPO B

transaction

for the financial

institution

DRS_TX_NWB_C2_LINK_A

RANGE
(PARTITION_LOGICAL_DA
TE) (Upto 5 Partitions) Sub-
partitioned on
HASH(SUBPARTITION_ID),
100 sub-partitions.

NBX C2 table that stores all the C2
LINK_A

transaction

for the financial

institution

DRS_TX_NWB_C2_LINK_B

RANGE

(PARTITION_LOGICAL_DA
TE) (Upto 5 Partitions) Sub-
partitioned on
HASH(SUBPARTITION_ID),

NBX C2 table that stores all the C2
LINK_B

transaction

for the financial

institution

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 133 of 183
Fujitsu Services

DRS Host Support Guide

Ref: NB/MAN/003

Version: 5.0

FUJ00090719
FUJ00090719

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
[ I 100 sub-partitions.
18.3 Debit Card Tables
The following tables are specific to the Debit Card.
Table Name Partition Key Brief Description

DRS_CI2_EFT_INP_EXCEP
TIONS

Stores unparsable / corrupt / invalid NBE [C12] XML messages.

DRS_C4SD_EFT_INP_EXCE
PTIONS

Stores unparsable / corrupt / invalid NBE [C4/S/D] XML messages.

DRS_REP_EFT_CAP_TOTA
LS

This table holds selective data from

DRS_RX_EFT_MAIN STORE, DRS_RX_EFT_MAIN_STORE_UPDATES,
DRS_RX_EFT_C112_EXCP_MAIN and DRS _RX_EFT_C4 EXCP_MAIN.
This set of data is then used to populate DRS_REP_EFT_RESULTS_NB103.

DRS_REP_EFT_RESULTS_
NBI1OI

This table holds data from a combination of DRS_RX_EFT MAIN STORE
and DRS_RX_EFT_C4_EXCP_MAIN used to populate report line details for
the NB101 Settlement Statement.

DRS_REP_EFT_RESULTS_
NB102_1

This table holds selective data from DRS_REP_EFT_STATE_TOTALS
required to populate report line details for the NB102 Section 1 output file.

DRS_REP_EFT_RESULTS_
NB102_10

This table holds selective data from a
DRS_RX_EFT_MAIN_STORE, DRS_RX_EFT_C112_EXCP_MAIN,
DRS_RX_EFT_C12_EXCP_MAIN, DRS_RX_EFT_C4_EXCP_MAIN,
DRS_RX_EFT_D_EXCP_MAIN and DRS_RX_EFT_S_EXCP_MAIN used to
populate report line details for the NB102 Section 10 output file.

combination of

DRS_REP_EFT_RESULTS_
NB102_11

This table holds selective data from a
DRS_RX_EFT_MAIN_STORE, DRS_RX_EFT_C112_EXCP_MAIN,
DRS_RX_EFT_C12_EXCP_MAIN, DRS_RX_EFT_C4 EXCP_MAIN,
DRS_RX_EFT_D_EXCP_MAIN and DRS I RX_EFT_S S) EXCP_ MAIN
required to populate report line details for the NB102 Section 11 output ‘file.

combination of

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 134 of 183
Fujitsu Services

DRS Host Support Guide

COMMERCIAL_IN_CONFIDENCE

Ref: NB/MAN/003

Version: 5.0

Date: 13/04/2005

FUJ00090719
FUJ00090719

NB102_12

DRS_REP_EFT_RESULTS_ I -

This table holds selective data from DRS_REP_EFT_STATE_TOTALS
required to populate report line details for the NB102 Section 12 output file.

NB102_2

DRS_REP_EFT_RESULTS_ I -

This table holds selective data from a combination of
DRS_RX_EFT_MAIN STORE, DRS_RX_EFT_C112_EXCP_MAIN,
DRS_RX_EFT_C12_EXCP_MAIN, DRS_RX_EFT_C4 EXCP MAIN,
DRS_RX_EFT_D_EXCP MAIN and DRS _RX_EFT_S EXCP_MAIN
required to populate report line details for the NB102 Section 2 output file.

NB102_3

DRS_REP_EFT_RESULTS_ I -

This table holds selective data from a combination of
DRS_RX_EFT_MAIN_ STORE, DRS_RX_EFT_C112_EXCP_MAIN,
DRS_RX_EFT_C12_EXCP_MAIN, DRS_RX_EFT_C4_EXCP_MAIN,
DRS_RX_EFT_D_EXCP_MAIN and DRS_RX_EFT_S EXCP_MAIN
required to populate report line details for the NB102 Section 3 output file.

NB102_4

DRS_REP_EFT_RESULTS_ I -

This table holds selective data from a combination of
DRS_RX_EFT_MAIN_STORE, DRS_RX_EFT_C112_EXCP_MAIN,
DRS_RX_EFT_C12_EXCP_MAIN, DRS_RX_EFT_C4_EXCP_MAIN,
DRS_RX_EFT_D_EXCP MAIN and DRS_RX_EFT_S EXCP_MAIN
required to populate report line details for the NB102 Section 4 output file.

NB102_5

DRS_REP_EFT_RESULTS_ I -

This table holds selective data from a combination of
DRS_RX_EFT MAIN STORE, DRS_RX_EFT_C112_EXCP_MAIN,
DRS_RX_EFT_C12_EXCP_MAIN, DRS_RX_EFT_C4_EXCP_MAIN,
DRS_RX_EFT_D_EXCP_MAIN and DRS_RX_EFT_S_EXCP_MAIN
required to populate report line details for the NB102 Section 5 output file

NB102_6

DRS_REP_EFT_RESULTS_ I -

This table holds selective data from DRS_REP_EFT_STATE_TOTALS
required to populate report line details for the NB102 Section 6 output file.

NB102_7

DRS_REP_EFT_RESULTS_ I -

This table holds selective data from DRS_REP_EFT_STATE_TOTALS
required to populate report line details for the NB102 Section 7 output file.

NB102_8

DRS_REP_EFT_RESULTS_ I -

This table holds selective data from a combination of
DRS_RX_EFT_MAIN_STORE, DRS_RX_EFT_C112_EXCP_MAIN,
DRS_RX_EFT_C12_EXCP_MAIN, DRS_RX_EFT_C4_EXCP_MAIN,
DRS_RX_EFT_D_EXCP_MAIN and DRS_RX_EFT_S EXCP_MAIN
required to populate report line details for the NB102 Section 8 output file

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 135 of 183
Fujitsu Services

FUJ00090719

FUJ00090719
DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
DRS_REP_EFT_RESULTS_ I - This table holds selective data from a combination of

NB102_9

DRS_RX_EFT_MAIN STORE, DRS_RX_EFT_C112_EXCP_MAIN,
DRS_RX_EFT_C12_EXCP_MAIN, DRS_RX_EFT_C4 EXCP_MAIN,
DRS_RX_EFT_D EXCP_MAIN and DRS_RX_EFT_S EXCP_MAIN to
populate report line details for the NB102 Section 9 output file.

DRS_REP_EFT_RESULTS_
NB103

This table holds selective data from DRS_REP_EFT_CAP_TOTALS required
to populate report line details for the NB103 Settled Transaction / Cash
Account Reconciliation Statement output file.

DRS_REP_EFT_STATE_TO
TALS

This table holds selective data from

DRS_RX_EFT_MAIN_STORE, DRS_RX_EFT_MAIN_STORE_UPDATES,
DRS_RX_EFT_C112_EXCP_MAIN, I DRS_RX_EFT_C12_EXCP_MAIN,
DRS_RX_EFT_C4_EXCP_MAIN, DRS_RX_EFT_D_EXCP_MAIN and
DRS_RX_EFT_S_EXCP_MAIN. This set of data is then used to populate
NB102 results tables for sections 1, 6, 7 and 12.

DRS_RX_EFT_C112

HASH
(HORIZON_TRANSACTION
_ID), 64 partitions

Table contains the parsed and domain-validated [C112] records for a DRS
processing Day. For duplicate and corrupt records, the non-key column values
are 1 blank and a corresponding record is created in the table
DRS_RX_EFT_C112_EXCP.

DRS_RX_EFT_Cl12_EXCP

C112 Daily exceptions table populated by the DRS C112 load processes.

DRS_RX_EFT_CI12_EXCP_
MAIN

This table stores C112 exception data for up to 90 days. The table will be
partitioned on the same partition key as the Main Store table, ie., on the
Receipt Date of the transaction.

Data older than 90 days will be archived and then deleted from the table.

DRS_RX_EFT_C12

HASH
(HORIZON_TRANSACTION
_ID), 64 partitions

Table contains the parsed and domain-validated [C12] records for a DRS
processing Day. For duplicate and corrupt records, the non-key column values
are I blank and a corresponding record is created in the table
DRS_RX_EFT_C12_EXCP.

DRS_RX_EFT_C12_EXCP

C12 Daily Exceptions table populated by the DRS C12 Parse processes.

DRS_RX_EFT_C12_EXCP_
MAIN

This table stores C12 exceptions data for up to 90 days. The table will be
partitioned on the same partition key as the Main Store table, i.e., on the

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 136 of 183
Fujitsu Services

DRS Host Support Guide

COMMERCIAL_IN_CONFIDENCE

Ref: NB/MAN/003
Version: 5.0
Date: 13/04/2005

FUJ00090719
FUJ00090719

Receipt Date of the transaction.

Data older than 90 days will be archived and then deleted from the table.

DRS_RX_EFT_C4

Table contains the parsed and domain-validated [C4] records for a DRS
processing Day. For duplicate and corrupt records, the non-key column values
are 1 blank and a corresponding record is created in the table
DRS_RX_EFT_C4_EXCP.

DRS_RX_EFT_C4_EXCP

C4 Daily Exceptions table populated by the DRS C4 Parse processes.

DRS_RX_EFT_C4_EXCP_M
AIN

This table stores C4 exception data for up to 90 days. The table will be
partitioned on the same partition key as the Main Store table, i.e., on the
Receipt Date of the transaction.

Data older than 90 days will be archived and then deleted from the table.

DRS_RX_EFT_D

HASH
(HORIZON_TRANSACTION
_ID), 64 partitions

Table contains the parsed and domain-validated [D] records for a DRS
processing Day. For duplicate and corrupt records, the non-key column values
are I blank and a corresponding record is created in the table
DRS_RX_EFT_D_EXCP.

DRS_RX_EFT_D_EXCP

D Daily Exceptions table populated by the DRS D Parse processes.

DRS_RX_EFT_D_EXCP_M
AIN

This table stores [D] exception data for up to 90 days. The table will be
partitioned on the same partition key as the Main Store table, i.e., on the
Receipt Date of the transaction.

Data older than 90 days will be archived and then deleted from the table.

DRS_RX_EFT_MAIN_STOR
E

RANGE (RECEIPT_DATE)
(upto 91 partitions)

Sub-partitioned on HASH
(HORIZON_TRANSACTION
_ID), 64 sub-partitions

Main DRS table that store all the transaction parts received along with the
transaction status

DRS_RX_EFT_MAIN_STOR
E_UPDATES

Table stores a copy of all the changes done to the Main Store partitions other
than the current day's partition.

DRS_RX_EFT_S

HASH

Table contains the parsed and domain-validated [SI] records for a DRS

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 137 of 183
Fujitsu Services

DRS Host Support Guide

COMMERCIAL_IN_CONFIDENCE

Ref: NB/MAN/003
Version: 5.0
Date: 13/04/2005

FUJ00090719
FUJ00090719

(HORIZON_TRANSACTION
_ID), 64 partitions

processing Day. For duplicate and corrupt records, the non-key column values
are I blank and a corresponding record is created in the table
DRS_RX_EFT_S EXCP.

DRS_RX_EFT_S EXCP

S Daily Exceptions table populated by the DRS S Parse processes

DRS_RX_EFT_S EXCP_MA
IN

This table stores [S] exception data for up to 90 days. The table will be
partitioned on the same partition key as the Main Store table, i.e., on the
Receipt Date of the transaction.

Data older than 90 days will be archived and then deleted from the table.

FTMS_RX_EFT_C4SD

HASH
(DRS_INSERT_SEQUENCE
_NUMBER), 8 partitions

C4/S/D Input Store populated by the DRS File load process using transactions
from the C4/S/D data file from the NBS Switch for Network Banking and
Solve-PFG/MA for Debit Card.

TMS_RX_EFT_Cl2

HASH
(DRS_INSERT_SEQUENCE
_NUMBER), 8 partitions

C12 Input Store populated by the Agent instances via database object calls

DRS_TX_EFT_C2

C2 Output tables to store the C2 XML and status of transmission information.

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 138 of 183
Fujitsu Services

DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

19 Appendix E — DRS Exceptions

Priority listed against the exceptions in the following table stands for:

FUJ00090719

FUJ00090719

A - Business critical error. If ignored, would violate SLA with Post Office. The error should be fixed immediately / workaround
be implemented to avoid violating the SLA deadline.

B - Error condition but of medium priority. May/will cause the DRS schedule to be held up and should be resolved at the
earliest on the same/in the next business day after resolving exceptions of Priority A.
C - Low priority error conditions / warnings / information only messages. These should be looked onto after resolving all
exceptions of A and B priorities.

X - Ignore. Exception is no longer in use or exception is not being generated.

Exception [Short Description IFull Description Action Program Prio

Code Name rity

DRS00000 ILog no exception For application use only. No error logged for this}Ignore exception xX
exception

DRS00001 [Application ExceptionIException with no application error code B
defined. Refer to exception details

DRS00002 Oracle Exception Oracle exception for which there is no business B
reason to occur

DRS10101 Invalid input System IThe Input System parameter was not found in {Refer to exception details for parameter name —_Idrscommon.pcIB

Parameter table DRS_SYSTEM_PARAMETERS or has and check contents of

NULL value DRS_SYSTEM_PARAMETERS table

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE Page:

139 of 183
Fujitsu Services

DRS Host Support Guide Ref:
Version:
COMMERCIAL_IN_CONFIDENCE Date:

NB/MAN/003
5.0

13/04/2005

FUJ00090719
FUJ00090719

IDRS10102 {Process entry is No entry for the current process name found in {Refer to exception details for parameter name —_Idrscommon.pcIB
missing/invalid table DRS_PROCESSES when executing and check contents of
function StartControl () DRS_SYSTEM_PARAMETERS table
DRS10103  IProcess entry is No entry for the current process name found in {Refer to exception details for parameter name —_Idrscommon.pcIB
missing/invalid table DRS_PROCESSES when executing and check contents of
function StopControl () DRS_SYSTEM_PARAMETERS table
DRS10104 IInvalid input System IThe System parameter named "DRS SYSTEM _ IRefer to exception details for parameter name —_Idrscommon.pcIB
Parameter DATE" was not found in table land check contents of
DRS_SYSTEM_PARAMETERS, DRS_SYSTEM_PARAMETERS table
IDRS10105 IMissing Data-Centr- IEnvironment variable DATA_CENTRE_CHAR ICheck the .vars file in the home directory of the Idrscommon.pceIB
(Char is not set UNIX user used to execute the process
IDRS10106 [Invalid Env Variable IEnvironment variable TZ (Time Zone) is not set ICheck/rectify the contents of environment drscommon.peIB
TZ in the required format variable TZ
IDRS10107 Invalid Application  IInvalid value of Application Type input Check that the command-line parameters being Idrscommon.pcIB
Type parameter parameter in function call with the given passed to the calling module are being correctly
Parameter Name, Instance Number and Partition }processed and that the first one is being assigned
to the Application Type global

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 140 of 183
Fujitsu Services

DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

FUJ00090719

FUJ00090719

IDRS10108 {Invalid Application [Invalid value of Application Type input Check that the command-line parameters being Idrscommon.pcIB
Type parameter parameter in function call with the given passed to the calling module are being correctly
Parameter Name, Instance Number and Partition }processed and that the first one is being assigned
to the Application Type global
DRS10109 {Invalid Application — IInvalid value of Application Type input (Check that the command-line parameters being Idrscommon.pcIB
Type parameter parameter in function call with the given passed to the calling module are being correctly
Parameter Name, Instance Number and Partition Iprocessed and that the first one is being assigned
ito the Application Type global
IDRS10110 {Invalid Application IApplication Type global variable has invalid (Check that the command-line parameters being Idrscommon.pcIB
Type parameter value passed to the calling module are being correctly
processed and that the first one is being assigned
to the Application Type global
IDRS10201 IInvalid Application — IInvalid value of Application Type input Check if the application module is passing jpkg_drs_com IB
Type parameter parameter received in function call with given _Icorrect parameters to the function Imon_body.sql
values of Parameter Name and Instance Number
DRS10202 IInvalid input System IThe Input System parameter was not found in {Refer to exception details for parameter name —‘Ipkg_drs_com IB
Parameter table DRS_SYSTEM_PARAMETERS or has and check contents of mon_body.sql
INULL value DRS_SYSTEM_PARAMETERS table
IDRS10203 Invalid Application [Invalid value of Application Type input Check if the application module is passing jpkg_drs_com IB
Type parameter parameter received in function call with given — Icorrect parameters to the function mon_body.sql
values of Process Name and Input Partition

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page:

141 of 183
Fujitsu Services

DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

FUJ00090719

FUJ00090719

IDRS10204 [Process entry is INo entry for the current process name found in {Refer to exception details for Process Name and Ipkg_drs_com IB
missing/invalid table DRS_PROCESSES for given value of check contents of mon_body.sql
Process Name DRS_SYSTEM_PARAMETERS table
IDRS10205 IInvalid Application — IInvalid value of Application Type input Check if the application module is passing jpkg_drs_com IB
Type parameter parameter received in function call with given —_Icorrect parameters to the function mon_body.sql
values of Process Name and Input Partition
DRS10206 Process entry is INo entry for the current process name found in {Refer to exception details for Process Name and Ipkg_drs_com IB
missing/invalid table DRS_PROCESSES for given value of check contents of mon_body.sql
Process Name DRS_SYSTEM_PARAMETERS table
DRS10207 Invalid input System IThe System parameter named "DRS SYSTEM _ IRefer to exception details for parameter name —Ipkg_drs_com IB
Parameter DATE" was not found in table land check contents of mon_body.sql
DRS_SYSTEM_PARAMETERS DRS_SYSTEM_PARAMETERS table
DRS30101 IIncorrect CommandyIncorrect number of command-line input]/Check the Maestro scripts to see if the call beingJDRSC301.pe IB
line parameters parameters have been supplied to the module]/made to the module is of the form: DRSC301
DRSC301 <Application Type> <Instance Number> <Total
Instances>
DRS30102 IMissing/Invalid Missing/Incorrect command-line inputICheck the Maestro scripts to see if the call being]DRSC301.pe IB
(Command-line parameters have been supplied to the module/made to the module is of the form: DRSC301
[parameters DRSC301 <Application Type> <Instance Number> <Total]
Instances>

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page:

142 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
'DRS30103 {Missing SystemINo entry for parameter 'HORIZON C12 INPUTICheck the contents of table/DRSC301.pe IB
parameter ALERT = TIMEOUT' found in table/DRS_SYSTEM_PARAMETERS to see if aj
DRS_SYSTEM_PARAMETERS, record corresponding to the given parameter isI
present
DRS30104 Invalid Alert occurred}IUnknown Alert with the given name hasICheck if the database trigger on  table/DRSC301.pc IB
occurred while waiting for alerts with namesIDRS_RX_C12 is raising correct alerts. Also}
Process-Alert-1..8 and End-of-day-Alert to occur Icheck if the DRS End-of-Day processing isI
raising correct alerts
IDRS30105  IUnparsable The given number of exceptions related to inputI/Check the contents of the C12 input exceptionsIDRSC301.pe IC
Exceptions occurred {XML data which is unparsable has occurred table to manually decipher/reconcile data
DRS30106 IXML Parser Error XML Parser initialisation has failed with given/Check if sufficient amount of memory is}IDRSC301.pe IB
error available for the process. Also check if the
Oracle XML parser for C has been correctly
installed
IDRS30107 IC12 Daily _table/The count of number of occurences of HorizonyCheck for the reason of the duplicates in the]DRSC301.pe IB
Sequence Error Txn-Id and Receipt-Date (3rd part of the}table. Possible causes are that the [C12] input
primary key) has exceeded acceptable limit interface is not working correctly or program)
errors with DRSC301 and/or the confirmation
lagent processes
DRS30108 {Unknown ErrorIA non-data related Oracle error has occurredICheck oracle error message for furtherIDRSC301.pe IB
during inserts during inserts into table DRS_RX_C12 information
DRS30109 IUnknown ErrorIA non-data related Oracle error has occurred}Check oracle error message for  furtherIDRSC301.pe IB
during inserts during inserts into tables DRS_RX_C12 orIinformation
DRS_RX_C12_EXCP
© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 143 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
IDRS30110 {Unknown ErrorIA non-data related Oracle error has occurred}Check oracle error message for  further/DRSC301.pe IB
during inserts during inserts into table DRS_RX_C12_EXCP information
DRS30111 IMissing SystemINo entry for parameter 'DRS PROCESSINGICheck the contents of table/DRSC301.pe IB
parameter DAY COMPLETE’ found in table[DRS_SYSTEM_PARAMETERS to see if a
DRS_SYSTEM_PARAMETERS record corresponding to the given parameter isI
present
DRS30112 [Missing DRS System[No entry for parameter ‘C12 RAISEICheck the contents of table[DRSC301.pe [B
Parameter REPEATED KEY EXCEPTION’ found in table[DRS_SYSTEM_PARAMETERS to see if al
DRS_SYSTEM_PARAMETERS for given valueIrecord corresponding to the given parameter isI
of Application Type present
DRS30113  IProgram Error [No record matching the given Input SequenceIContact support with error details. DRSC301.pe IB
[Number was found in the input buffer
DRS30114 IDuplicate [C12]IDetected one or more [C12] messages asIIndicates possible Confirmation Agent restartIDRSC301.pe IC
records found duplicate based on their Horizon-Transaction-Idjafier failure. Contact support with error details
and Receipt-Date/Time
DRS30115 [Incorrect C2 XML tag]The XML tag indicating the beginning of theIVerify the integrity of the [C2] XML record. If aIDRSC301.pe IB
given [C2] XML was not found in the [C12]}tag is corrupt, check if the confirmation Agent isI
record corresponding to the current Input}functioning correctly
Sequence Number
DRS30116 IIncorrect C2 XML tag]The XML tag indicating the end of the given] Verify the integrity of the [C2] XML record. If a}DRSC301.pe IB
[C2] XML was not found in the [C12] record]tag is corrupt, check if the confirmation Agent is
corresponding to the current Input SequenceIfunctioning correctly
Number

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page:

144 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
IDRS30117 {Incorrect C2 MessageIThe value of XML tag that identifies the}Verify the integrity of the [C2] XML record. If a]DRSC301.pe IB
Type Message Type does not match the given expected}tag is corrupt, check if the confirmation Agent isI
value for record with current Input SequenceIfunctioning correctly
Number
DRS30118  IInvalid System}No entry for parameter "INVALID PKICheck the contents of table/DRSC301.pe IB
Parameter OPERATIONAL EXCEPTION LIMIT' found inJDRS_SYSTEM_PARAMETERS to see if al
table DRS_SYSTEM_PARAMETERS record corresponding to the given parameter is
present
IDRS30119 IUndefined Key ValueIUnable to determine the cause of Key ValueIContact support with error details. DRSC301.pe IB
Error error. Probable cause is a bug in DRSC301
DRS30120 INo matching recordINo record matching the given Input SequenceIProbable cause is a bug in DRSC301. ContactIDRSC301.pe IC
found in Input Number found in the input buffer Support with more details.
DRS30130 INull/Corrupt HorizonIThe [C12] transaction part corresponding to theICheck the XML message attached to theIDRSC301.pe IC
Transaction Id given Insert. Sequence Number _has/Operational Exception and contact MSU for
INULL/Corrupt value of Horizon Transaction Id_ further action
DRS30131 INull/Corrupt Receipt}The [C12] transaction part corresponding to theICheck the XML message attached to the/DRSC301.pe IC
Date given Insert Sequence Number — has/Operational Exception and contact MSU _ for]
NULL/Corrupt value of Receipt Date/Time further action
DRS30132 IReceipt Date out of]The [C12] transaction part corresponding to theICheck the XML message attached to the}/DRSC301.pe IC
bounds given Insert Sequence Number has Receipt}Operational Exception and contact MSU forI
Date/Time outside the allowed date range values }further action.

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page:

145 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
DRS30133 {Exception Threshold/The Exception threshold <INVALID PK/An unnaturally high number of records with]DRSC301.pe JA
Exceeded OPERATIONAL EXCEPTION LIMIT>  forIcorrupt Primary Key values indicate that systemI
reporting on corrupt key transactions asjas a whole is not functioning normally. CheckI
exceptions has exceeded various system hardware/software componentsI
for failure and contact support
DRS30134 IUnable to PREPAREIUnable to Prepare Insert statement for table [%s]ICheck oracle error message for further]/DRSC301.pe IB
Insert SQL information
DRS30135_ IDatabase functionIDatabase function FN_START_NEW_BATCHICheck the Operational exception table for [%s] IDRSC301.pe IB
unsuccessful call returned [%d], Check exceptions for [%s]
DRS30136 IDatabase functionIDatabase function FN_START_NEW_BATCHICheck oracle error message for further/DRSC301.pe IB
lunsuccessful returned SQL code [%d] information
© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 146 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
iDRS30137 IDatabase functionIDatabase function FN_START_NEW_BATCHICheck the Operational exception table for all/DRSC301.pe IB
unsuccessful returned invalid Partition Keys  [PartitionIDRSC301 Services.
Logical date=>%sI[Subpartition
id=>%d][Logical Subpartition id=>%d]
DRS30138 IDatabase functionIDatabase functionICheck the Operational exception table for [%s] IDRSC301.pe IB
unsuccessful FN_CONFIRM_PRIOR_TO_BATCH call
returned [%d], Check exceptions for [%s]
DRS30139 IDatabase functionIDatabase functionICheck oracle error message for furtherIDRSC301.pe IB
unsuccessful FN_CONFIRM_PRIOR_TO_BATCH _ returned}information
SQL code [%d]
DRS30140 IUnable to insert/Error occurred —_ whilst Inserting into/Check oracle error message for furtherIDRSC301.pe IB
record DRS_TX_NWB_C2_EXCP table information
© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 147 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
DRS30141 INo routing gatewaysINo routing gateways found in table}Check the static data scripts been loaded/DRSC301.pe ID
to monitor. DRS_TMON_ROUTING_GATEWAYS tolcorrectly.
monitor
DRS30142 Invalid SystemIInvalid value [%d] found in]Check the System parameter specified in [%s]]DRSC301.pe IB
Parameter value DRS_SYSTEM_PARAMETERS for parameter}has a valid value set.
[%s]
DRS30143 INULL ~~ value — inJNULL value found in]Check the System parameter specified in [%s]]IDRSC301.pe IB
System Parameter DRS_SYSTEM_PARAMETERS for parameterIhas a Non-NULL value set.
(%s]
IDRS30144 IUnable to access table IError occurred whilst accessing —_tableICheck oracle error message for further/DRSC301.pe IB
DRS_TMON_ROUTING_GATEWAYS table _ Iinformation

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page:

148 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
IDRS30145 {Unable to (Re)openIError occurred whilst (Reopening cursorICheck oracle error message for  further/DRSC301.pe IB
cursor dirg_cur information
DRS30146 IUnable to fetch from}Error whilst fetching fromICheck oracle error message for furtherIDRSC301.pe IB
table DRS_TMON_ROUTING_GATEWAYS table _ Iinformation
DRS30147 INumber of routingI/More than [%d] routing gateways have beenIThis message is intended as an informationalIDRSC301.pe ID
gateways exceeded. {found in]message only. No need to take any preventive
DRS_TMON_ROUTING_ GATEWAYS _ table,Iactions. If the limit needs increasing the module}
only [%d] will be monitored, rest will be}have to be changed.
ignored.
DRS30148 ISystem parameter not}No record found in tableICheck the System parameter specified in [%s]]DRSC301.pe IB
found DRS_SYSTEM_PARAMETERS for theJexists in the table.
parameter [%s]

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page:

149 of 183
Fujitsu Services

DRS Host Support Guide Ref:

NB/MAN/003

Version: 5.0

FUJ00090719
FUJ00090719

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

IDRS30149 {Unable to — accessIError whilst accessing tableICheck oracle error message for furtherIDRSC301.pe IB
System. parameters] DRS_SYSTEM_PARAMETERS information
table

DRS30150 IUnable to PREPARE/Error whilst Preparing Dynamic SQL [%s] Check the SQL specified in [%s] for any Syntax]DRSC301.pe IB
Dynamic SQL errors, if not, check the oracle error message forI

further information.

IDRS30151 IError deriving timeIError whilst deriving Time period intervals Check oracle error message for furtherIDRSC301.pe IB
period intervals information

IDRS30152 IError fetching timeIError whilst fetching the time period intervals ICheck oracle error message for further/DRSC301.pe IB
period intervals information

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 150 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
IDRS30153 {Error deriving Int. no./Error whilst deriving the Interval number for}This message is intended as an informational] DRSC301.pe ID
for Receipt time Receipt time [%s], record ignored for monitoring}message only. This is due to an invalid Receipt]
time. No need to take any action, this transactionI
will be captured by C12 exception.
DRS30154 IUnable to PREPAREIError whilst preparing UPDATE Dynamic SQLICheck the SQL specified in [%s] for any Syntax}DRSC301.pe IB
[UPDATE — Dynamic}[%s] errors, if not, check the oracle error message forI
SQL further information.
IDRS30155 IUnable to PREPARE/Error whilst preparing INSERT Dynamic SQLICheck the SQL specified in [%s] for any Syntax]DRSC301.pe IB
INSERT Dynamic}[%s] errors, if not, check the oracle error message forI
SQL further information.
DRS30156 IError inserting intoIError whilst Insering into DRS_C12_MONITORICheck oracle error message for further/DRSC301.pe IB
DRS_C12_MONITO Itable. information
IR
© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 151 of 183
Fujitsu Services

DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

FUJ00090719
FUJ00090719

IDRS30157

Error updating
IDRS_C12_MONITO
IR

Error whilst updating DRS_C12_MONITOR
table.

Check — oracle
information

error

message

for

further

DRSC301.pe IB

DRS30158

Error fetching}
START NEW
BATCH RETRIES

Error whilst fetching START NEW BATCH
RETRIES from drs_system_parameters.

Check oracle
information

error

message

for

further]

DRSC301.pe IB

DRS30159

Error fetching}
START NEW
BATCH SLEEP

Error whilst fetching START NEW BATCH
SLEEP from drs_system_parameters.

Check _ oracle
information

error

message

for

further]

DRSC301.pe IB

DRS30160

Error releasing old
partitions

Error whilst releasing old __ partitions}
ipkg_drs_batch_mgt.fn_release_all_mine

Check — oracle
information

error

message

for

further]

DRSC301.pe IB

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE Page:

152 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
IDRS30161 {Error releasing oldjError whilst releasing old partitions}Check oracle error message for  further/DRSC301.pe IB
partitions lpkg_drs_batch_megt.fn_release_all_mine information
DRS30201 IIncorrect Command-_IIncorrect number of command-line input Check the Maestro scripts to see if the call being IJDRSC302.pe_ IB
line parameters parameters have been supplied to the module made to the module is of the form: DRSC302
DRSC302 <Application Type> <Instance Number> <Total
Instances>
DRS30202 IMissing/Invalid Missing/Incorrect command-line input ICheck the Maestro scripts to see if the call being IDRSC302.pe IB
(Command-line parameters have been supplied to the module made to the module is of the form: DRSC302
parameters DRSC302 <Application Type> <Instance Number> <Total
Instances>
IDRS30203 IMissing System No entry for parameter 'C4SD PAUSE WAIT __ICheck the contents of table DRSC302.pe IB
parameter LIMIT" found in table DRS_SYSTEM_PARAMETERS to see ifa
DRS_SYSTEM_PARAMETERS record corresponding to the given parameter is
present
IDRS30204 IMissing System [No entry for parameter 'C4SD FILE LOAD Check the contents of table DRSC302.pe_ IB
parameter COMPLETE ' found in table DRS_SYSTEM_PARAMETERS to see if a
DRS_SYSTEM_PARAMETERS, record corresponding to the given parameter is
present
DRS30205 IUnparsable The given number of exceptions related to input ICheck the contents of the C4SD input exceptionsIDRSC302.pe IC
Exceptions occurred §IXML data which is unparsable has occurred table to manually decipher/reconcile data

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page:

153 of 183
Fujitsu Services

DRS Host Support Guide Ref:
Version:
COMMERCIAL_IN_CONFIDENCE Date:

NB/MAN/003
5.0

13/04/2005

FUJ00090719
FUJ00090719

IDRS30206 {XML Parser Error XML Parser initialisation has failed with given ICheck if sufficient amount of memory is DRSC302.pe IB
error available for the process. Also check if the
(Oracle XML parser for C has been correctly
installed
IDRS30207 {Unknown Error A non-data related Oracle error has occurred Check oracle error message for further DRSC302.pe IB
during inserts during bulk inserts into table DRS_RX_C4 information
DRS30208 IUnknown Error A non-data related Oracle error has occurred Check oracle error message for further DRSC302.pe IB
during inserts during bulk inserts into table DRS_RX_D information
DRS30209 IUnknown Error A non-data related Oracle error has occurred Check oracle error message for further DRSC302.pe_ IB
during inserts during bulk inserts into table DRS_RX_S information
DRS30210 {Invalid Input Message IInvalid value of Message Type passed to the (Check contents of the FTMS_RX_C4SD input IDRSC302.pe IB
Type function that handles Data related exceptions _Itable to see if one or more XML messages are of
invalid message type
DRS30211 ISequence reached The Horizon Transaction Id - Receipt Date Confirm correct execution of the C4SD Loader IDRSC302.pe IB
Max Value ‘Sequence has reached its maximum allowed process. Check for valid data in the
value FTMS_RX_C4SD table
DRS30212 IUnknown Error A non-data related Oracle error has occurred Check oracle error message for further DRSC302.pe_ IB
during inserts during inserts into tables DRS_RX_C4 or information
DRS_RX_C4_EXCP
DRS30213 ISequence reached The Horizon Transaction Id - Receipt Date Confirm correct execution of the C4SD Loader IDRSC302.pe IB
Max Value ‘Sequence has reached its maximum allowed process. Check for valid data in the
value FTMS_RX_C4SD table

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 154 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
IDRS30214 {Unknown Error A non-data related Oracle error has occurred Check oracle error message for further DRSC302.pe IB
during inserts during inserts into tables DRS_RX_D or information
DRS_RX_D_EXCP
IDRS30215 ISequence reached The Horizon Transaction Id - Receipt Date Confirm correct execution of the C4SD Loader IDRSC302.pe IB
Max Value Sequence has reached its maximum allowed process. Check for valid data in the
value FTMS_RX_C4SD table
DRS30216 IUnknown Error A non-data related Oracle error has occurred Check oracle error message for further DRSC302.pe IB
during inserts during inserts into tables DRS_RX_C4 or information
DRS_RX_C4_EXCP
DRS30217 IUnknown Error A non-data related Oracle error has occurred Check oracle error message for further DRSC302.pe IB
during inserts during inserts into table DRS_RX_C4_EXCP __ Iinformation
DRS30218 IUnknown Error A non-data related Oracle error has occurred Check oracle error message for further DRSC302.pe_ IB
during inserts during inserts into table DRS_RX_D_EXCP. information
DRS30219 IUnknown Error A non-data related Oracle error has occurred Check oracle error message for further DRSC302.pe_ IB
during inserts during inserts into table DRS_RX_S_EXCP information
DRS30220 Invalid Input MessageIInvalid value of Message Type returned by the —ICheck contents of the FTMS_RX_C4SD input IDRSC302.pe IB
Type function that parses the C4SD XML input table to see if one or more XML messages are of
invalid message type
IDRS30401 IInvalid input The input Application Type parameter value is ICheck if the C12 Confirmation Agent is passing Ipkg_cl2_agenIB
Application Type invalid correct value of input Application Type t_data_body.s
ql
DRS30402_ IInvalid input The input Application Type parameter value is ICheck if the C12 Confirmation Agent is passing Ipkg_c12_agenIB
Application Type __Iinvalid correct value of input Application Type t_data_body.s
al

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 155 of 183
Fujitsu Services

DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

FUJ00090719

FUJ00090719

IDRS30403 {Severe Oracle Error ISevere Oracle Error detected in One or more errors have occurred in earlier calls Ipkg_c12_agenIB
detected PKG_C12_AGENT_DATA. Initialisation has to the interface or during initialisation which t_data_body.s
failed with one/more errors prevent the processing from proceeding ql
successfully
DRS30501  IIncorrect Command-_ IIncorrect number of command-line input Check the Maestro scripts to see if the call being IJDRSC305.pe IB
line parameters parameters have been supplied to the module made to the module is of the form: DRSC305
DRSC305 <Application Type> <Input C4SD Filename incl
Path>
IDRS30502 _ IMissing/Invalid Missing/Incorrect command-line input Check the Maestro scripts to see if the call being IDRSC305.pe IB
(Command-line [parameters have been supplied to the module made to the module is of the form: DRSC305
parameters DRSC305 <Application Type> <Input C4SD Filename incl
Path>
DRS30503 {Environment VariableIThe environment variable Check whether the Rig has the correct DRS DRSC305.pe IB
is invalid <ApplicationType>_NBE_INPUT which points Ibuild. Also check the .vars file for correct value
to the location of the C4/S/D input files is not setIof environment variable
or has invalid value <ApplicationType>_NBE_INPUT and confirm iff
the .vars file is being executed for the Unix user
DRS30504 Error during File- Error occurred while opening the input file Check for the existence of the file with correct IDRSC305.pc IB
lopen segment with given name (incl Path) filename and path. Also check for correct read
privileges on the file
DRS30505_ IError during File Error occurred while closing the currently open ICheck if the file has been modified while it was IDRSC305.pe IB
close file segment being read from by DRSC305. Also check if the
privileges on the file have been altered in any
way

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page:

156 of 183
Fujitsu Services

DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

FUJ00090719
FUJ00090719

IDRS30506 {Incorrect File Header IA header record, which wasn't the first record of ICheck if the input File contents are valid DRSC305.pe ID
Record the file, was detected in the Input C4/S/D file
DRS30507 IIncorrect File Trailer IFile trailer record, which wasn't the last record —ICheck if the input File contents are valid DRSC305.pe ID
Record of the file, was detected in the input C4/S/D file
DRS30508 Trailer Record count IThe record count in the C4/S/D File Segment —_ICheck if the input File contents are valid DRSC305.pe_ }C
mismatch Trailer does not match with the count of records
processed
DRS30509 Invalid File Segment IInvalid value of File Segment Header Record- {Check if the input File contents are valid DRSC305.pe ID
Header type found in the input File Segment
DRS30510 Invalid File Segment IThe File Segment Header Record does not have ICheck if the input File contents are valid DRSC305.pe ID
[Header the expected number of elements
DRS30511 IInvalid File Segment IInvalid value of File Segment Trailer Record- —_ICheck if the input File contents are valid DRSC305.pe ID
Trailer type found in the input File Segment
DRS30512 {Invalid File Segment IThe File Segment Trailer Record does not have ICheck if the input File contents are valid DRSC305.pe ID
Trailer the expected number of elements
DRS30513 Input File Segment —_ IThe Input File Segment is being reprocessed Check if the Maestro scripts are re-processing IDRSC305.pe IC
being reprocessed the file or if the Control and/or Data Files are
being re-transmitted by NBE
DRS30514 IProgram/Rig Error Function StartControl () returned a value of 0 Contact technical support for more information IDRSC305.pc IB
when a file entry could be made in the C4SD.
File Register

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page:

157 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
'DRS30515_ IProram/Rig Error INo record found in the C4SD File Register for _IMost likely cause is that the entry for DRSC305 IDRSC305.pe IB
given input File Segment and Application Type Iin DRS_PROCESSES does not have the
Multiple-Runs-in-single-day flag set. Contact
technical support for more information
DRS30516 Input File Segment IThe Input File Segment is being reprocessed Check if the Maestro scripts are re-processing IDRSC305.pe IC
being reprocessed the file or if the Control and/or Data Files are
being re-transmitted by NBE
DRS30517 IProram/Rig Error Function StartControl () returned a value of 0 Most likely cause is that the entry for DRSC305 IDRSC305.pe IB
when a file entry could be made in the C4SD. in DRS_PROCESSES does not have the
File Register Multiple-Runs-in-single-day flag set. Contact
technical support for more information
DRS30518 IUnable to rename File ICannot file a'.' separator in the input File Refer to the error message for more details DRSC305.pe IC
Segment Segment Name hence cannot rename the file to Ibefore deciding on action
change its extension
IDRS30519 {Unable to rename File IThe File rename operation to change theFile Refer to the error message for more details DRSC305.pe_ JC
Segment Segment extension has failed with error before deciding on action. Probable causes would
be user privileges on the File or special
characters in the File name
DRS30520 {Invalid File Record IThe first record of the C4/S/D File Segment is _ ICheck if the input File contents are valid DRSC305.pe ID
not a header record
DRS30521_ INo File Trailer [No File Segment Trailer record found as the last ICheck if the input File contents are valid DRSC305.pe ID
Record record of the input C4/S/D file

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page:

158 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
'DRS30601 {Incorrect Command- IIncorrect number of command-line input ICheck the Maestro scripts to see if the call being IJDRSC306.pe IB
line parameters parameters have been supplied to the module made to the module is of the form: DRSC306
DRSC306 <Application Type>
DRS30602_ IInvalid/Null Invalid/Null value fetched for system parameter ICheck contents of table DRSC306.pe_ IB
Parameter Value 'C4SD FILE LOAD COMPLETE' DRS_SYSTEM_PARAMETERS for a valid
character value for 'C4SD FILE LOAD.
COMPLETE'
DRS30701 IIncorrect no ofIIncorrect number of command-line parameters ICheck the Maestro scripts to see if the call being] DRSC307.pe IB
(Command-line made to the module is of the form: DRSC307I
[parameters <Application Type>I
<MaestroSequenceNumber>
DRS30702 Invalid CommandIInvalid command-line parameter Check the Maestro scripts to see if the call being]DRSC307.pc IB
line parameter made to the module is of the form: DRSC307I
<Application Type>I
<MaestroSequenceNumber>
IDRS30703 IEnvironment variableIEnvironment variable is not set Set the Environment variable with correct value. IDRSC307.pe IB
is not set
IDRS30704 IFailed to accessIFailed to access directory set byIChange the access permissions for the directory IDRSC307.pe IB
directory EFT_C2_OUTPUT
IDRS30705 IDRS SYSTEM DATE/IDRS SYSTEM DATE _ not — set —_ inICheck table DRS_SYSTEM_PARAMETERS forIDRSC307.pe IB
not set DRS_SYSTEM_PARAMETERS table DRS SYSTEM DATE
DRS30706_ IFile already exists Output File .TRN already exists DRSC307.pe
DRS30707 [Failed to open File _ [Failed to open .LCK File Refer to the Exception Error message for furtherIDRSC307.pe
details
© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 159 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
'DRS30708 {Failed to write Header IFailed to write Header record to .LCK File Refer to the Exception Error message for further]IDRSC307.pe IB
details
IDRS30709 IUpdate of C2 XML/IUpdate of Host Array for C2 XML records failed ICheck oracle error message for further/DRSC307.pe IB
records failed information
DRS30710 IFailed to write BodyIFailed to write Body record to .LCK File Refer to the Exception Error message for furtherIDRSC307.pe IB
record details
DRS30711  IFailed to write Trailer IFailed to write Trailer record to .LCK File Refer to the Exception Error message for furtherIDRSC307.pe IB
details
DRS30712 IFailed to close File — IFailed to close .LCK File Refer to the Exception Error message for further]IDRSC307.pe IB
details
DRS30713 IFailed to rename file IFailed to rename .LCK file to .TRN file Refer to the Exception Error message for furtherIDRSC307.pe IB
details
DRS30801  IIncorrect no ofIIncorrect number of command-line parameters _ICheck the Maestro scripts to see if the call being] DRSC308.pe IB
(Command-line made to the module is of the form: DRSC307I
[parameters <Application Type>I
<MaestroSequenceNumber>
IDRS30802 {Invalid Command Invalid command-line parameter Check the Maestro scripts to see if the call being]DRSC308.pe IB
line parameter made to the module is of the form: DRSC307
<Application Type>I
<MaestroSequenceNumber>
DRS30803 Environment variableIEnvironment variable is not set Set the Environment variable with correct value. IDRSC308.pe IB
is not set
DRS30804 IFailed to — accessIFailed to access directory set by EFT_C2_INPUTIChange the access permissions for the directory IDRSC308.pc IB
directory
IDRS30805 IDRS SYSTEM DATEIDRS SYSTEM DATE _ not _— set —_ inICheck table DRS_SYSTEM_PARAMETERS forIDRSC308.pe IB
not set DRS_SYSTEM_PARAMETERS table DRS SYSTEM DATE
© 2005 Fujitsu Services COMMERCIAL_IN_CONFIDENCE Page: 160 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
DRS30806_ {Invalid File Name Invalid File Name <InputFileName> DRSC308.pe
IDRS30807 IFailed to open File — IFailed to open <InputFileName> File Refer to the Exception Error message for furtherI DRSC308.pc

details

DRS30808 File already processed IFile <InputFileName> already processed Refer to the Exception Error message for furtherIDRSC308.pe IB
details

DRS30809 [Invalid Header RecordIInvalid Header Record in Input File Refer to the Exception Error message for further[DRSC308.pc IB
details

DRS30810 IHeader record missingIHeader record missing in Input File Refer to the Exception Error message for further]IDRSC308.pe IB
details

DRS30811 IInvalid Body Record IInvalid Body Record in Input File Refer to the Exception Error message for furtherI/DRSC308.pe IB
details

DRS30812 IError Threshold]Number of Invalid Body Record Count has}Refer to the Exception Error message for furtherIDRSC308.pe IB
Reached increased the error threshold details

DRS30813 [Invalid Body Record IInvalid Body Record in Input File for Insert]Refer to the Exception Error message for furtherIDRSC308.pe IB
Sequence Number <InsSeqNo> details

DRS30814 IBody Record missing IBody Record Missing in Input file Refer to the Exception Error message for further]IDRSC308.pe IB
details

DRS30815 IFailed to — updateIFailed to update C2 XML records Refer to the Exception Error message for furtherIDRSC308.pe IB
records details

DRS30816 ITrailer record missing}Invalid Trailer Record in Input File / TrailerIRefer to the Exception Error message for further/DRSC308.pe IB
Record missing in Input File details

IDRS30817 IInvalid Trailer RecordIInvalid Trailer Record in Input File / Trailer]Refer to the Exception Error message for further/DRSC308.pe IB
Record missing in Input File details

DRS30818 IFailed to rename file IFailed to rename .LCK file to .TRN file Refer to the Exception Error message for furtherIDRSC308.pe IB
details

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page:

161 of 183
Fujitsu Services

DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

FUJ00090719
FUJ00090719

'DRS31001 {Incorrect Command-  IIncorrect number of command-line input Usage: DRSC310 <Run Type> <Application DRSC310.pe_ IB
line parameters parameters have been supplied to the module 'Type> <Instance Number> <Total Instances>
DRSC310
DRS31002 IIncorrect Command- IIncorrect value/number of the RunType Invalid Run Type passed on the command-line. IDRSC310.pe IB
line parameters Icommand-line parameter has been supplied to IOnly 'DAY' or 'NIGHT' is allowed.
the module DRSC310
DRS31003 [Incorrect Command- [Missing or invalid command-line parameters [Usage: DRSC310 <Run Type> <Application  [DRSC310.pe IB
line parameters have been supplied to the module DRSC310 'Type> <Instance Number> <Total Instances>
DRS31005_ IState lookup buffer Fatal Error. More than 256 elements required in IIncrease the state lookup buffer size in the DRSC310.pe_ IB
overflow State Lookup Buffer. The buffer could not be —_Iprogram. Contact 4th line support.
populated successfully.
DRS31006 {Match not found in —INo match found in State Lookup Buffer for the ICheck the contents of DRS Transaction States {DRSC310.pe IB
DRS States table Current State and Transaction Part Arrived. table. Contact support with error details.
IDRS31007 INo room to store the IAll state columns for the transaction have been ICheck the contents of the transaction present in IDRSC310.pe IB
next trans state occupied. Could not store the next state of the —_Ithe Main Store table. Contact support with error
transaction into Main Store table. details.
DRS31008 State rules lookup Fatal Error. More than 128 elements required in IIncrease the state rules lookup buffer size in the IDRSC310.pe IB
buffer overflow State Rules Lookup Buffer. The buffer could not Iprogram. Contact support with error details.
be populated successfully.
DRS31009 IMissing state Rule Id was not found in Check the contents of DRSC310.pe IB
validation rule id DRS_STATE_VALIDATION_RULES table DRS_STATE_VALIDATION_RULES table.
(Contact support with error details.

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page:

162 of 183
Fujitsu Services

DRS Host Support Guide Ref:
Version:
COMMERCIAL_IN_CONFIDENCE Date:

NB/MAN/003
5.0

13/04/2005

FUJ00090719
FUJ00090719

'DRS31010 {Main Store buffer Can not initialise a new transaction record in IContact support with error details. DRSC310.pe IB
overflow Main Store Buffer. Maximum count has been
reached.
DRS31011 IDuplicate C12 Duplicate flag has been found set by the daily ICheck the contents of the DRS Main Store and IDRSC310.pe IB
transaction part not — {input processing where there is no existing C12 Daily Input tables. Contact support with
found transaction part for the matching Primary Key _ Ierror details.
present in the Main Store table.
IDRS31012 IDuplicate C4 Duplicate flag has been found set by the daily Check the contents of the DRS Main Store and IDRSC310.pe IB
transaction part not _ Iinput processing where there is no existing C4 Daily Input tables. Contact support with
found transaction part for the matching Primary Key error details.
present in the Main Store table.
DRS31013 [Duplicate C112 trans [Duplicate flag has been found set by the daily ICheck the contents of the DRS Main Store and [DRSC310.pe IB
part not found input processing where there is no existing C112 Daily Input tables. Contact support with
transaction part for the matching Primary Key _ Ierror details.
present in the Main Store table.
DRS31014 [Duplicate D trans part [Duplicate flag has been found set by the daily _ [Check the contents of the DRS Main Store and [DRSC310.pe IB
not found input processing where there is no existing "D" Daily Input tables. Contact support with
transaction part for the matching Primary Key _ error details.
present in the Main Store table.
DRS31015 [Duplicate S trans part [Duplicate flag has been found set by the daily _ [Check the contents of the DRS Main Store and [DRSC310.pe IB
not found input processing where there is no existing "S" Daily Input tables. Contact support with
transaction part for the matching Primary Key _ Ierror details.
present in the Main Store table.

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 163 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
IDRS31016 {Insert into Main Store ICould not insert a record into DRS Main Store ICheck the contents of DRS Main Store Updates IDRSC310.pe IB
Update failed Updates table. table. Contact support with error details.
IDRS31017 {Missing DRS System INo record found in table Check the contents of the table DRSC310.pe IB
Parameter DRS_SYSTEM_PARAMETERS for the DRS_SYSTEM_PARAMETERS. Contact
parameter named 'PARTITION RECEIPT support with error details.
DATE’
DRS31018 {State validation rules IFatal Error. One or more validation rules have —ICheck the definition of state validation rules in IDRSC310.pe IB
has changed changed in the database and the program and update
DRS_STATE_VALIDATION_RULES table. program accordingly. Contact support with error
details.
IDRS31019 ILoss of State in Main State information has been lost when updating {Check the DRS_Operational_Exceptions table _ IDrs B
Store table. state to F99 via the DRS Workstation. for lost information. Contact support with error IWorkstation
details.
DRS31101 [Incorrect number of {Incorrect number of command-line input Check the Maestro scripts to see if the call being IDRSC311.pe IB
parameters [parameters have been supplied to the module made to the module is of the form: DRSC311
<Application Type>
IDRS31102 ISingle insert failed — ISingle Insert into DRS_RX_C12_EXCP_MAIN ICheck ORACLE error message for further DRSC311.pe IB
has failed information
DRS31103 IException unknown IThe exception to be copied is of unknown type {Check ORACLE error message for further DRSC311.pe IB
information
DRS31104 IRead current state has IUnable to process the current state of the ICheck ORACLE error message for further DRSC311.pe IB
failed transaction information
DRS31105 IToo many elements in }too many elements in the state lookup buffer so ICheck total state records in DRSC311.pe IB
state lookup buffer the buffer could not be populated successfully DRS_TRANSACTION_STATES

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page:

164 of 183
Fujitsu Services

DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

FUJ00090719
FUJ00090719

IDRS31106 Ino match in lookup — {Unable to find matching primary keys in the Check data in DRS_RX_MAIN_STORE DRSC311.pe IB
buffer main store for the duplicate exception in the
daily table.
DRS31107 ISingle insert failed —ISingle Insert into DRS_RX_C4_EXCP_MAIN_ ICheck ORACLE error message for further DRSC311.pe IB
has failed information
DRS31108 ISingle insert failed Single Insert into DRS_RX_D_EXCP_MAIN Check ORACLE error message for further DRSC311.pe IB
has failed information
DRS31109 ISingle insert failed — ISingle Insert into DRS_RX_S_EXCP_MAIN Check ORACLE error message for further DRSC311.pe IB
has failed information
DRS31110 Single insert failed —_ISingle Insert into Check ORACLE error message for further DRSC311.pe IB
DRS_RX_C112_EXCP_MAIN has failed information
DRS31111 {Data Error Unable to copy a transaction due to a data error. ITransaction may not exist in main store. Check IDRSC311.pe IB
log to see what field failed.
IDRS32001 Incorrect Command- Incorrect number of command-line input Check the Maestro scripts to see if the call being DRSC320.pe IB
line parameters parameters have been supplied to the module made to the module is of the form: DRSC320
DRSC320 <Application Type>
DRS32002_ IMissing/Invalid Missing/Incorrect command-line input Check the Maestro scripts to see if the call being IJDRSC320.pe IB
(Command-line parameters have been supplied to the module made to the module is of the form: DRSC320
parameters DRSC320 <Application Type>
IDRS32201 {Incorrect Command- IMissing/Incorrect command line input ICheck the Maestro scripts to see if the call being JDRSC322.pe IB
line parameters parameters have been supplied to the module made to the module is of the form DRSC322
DRSC322 <Application Type>
IDRS32202  IMissing/Invalid The input parameter <Application Type> value ICheck the Maestro scripts to see if the call being IDRSC322.pe IB
(Command-line is NULL, specify a valid value. made has a valid Application Type.
parameters

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page:

165 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

'DRS32203 {No report line query INo report line query found for report NB101, Check table DRS_REP_LINES for appropriate IDRSC322.pe IB
found check DRS_REP_LINES table query

DRS32204 IFailed to open cursor IFailed to open cursor C1, check ORACLE error ICheck ORACLE error message for further DRSC322.pe IB
Cl code information

IDRS32205 Insert into NBIO1 Could not insert a record into DRS NB101 Check oracle error message for further DRSC322.pce IB
Results table failed — {Results table. information

DRS32206 IPARTITION No record found in Check table DRS_SYSTEM_PARAMETERS for]DRSC322.pe IB
RECEIPT DATE' Not IDRS_SYSTEM_PARAMETERS table for the appropriate parameter
found. "PARTITION RECEIPT DATE’.

IDRS32207 IPARTITION System Parameter 'PARTITION RECEIPT Check table DRS_SYSTEM_PARAMETERS for/DRSC322.pe IB
RECEIPT DATE! is IDATE' is NULL the appropriate parameter
INULL

DRS32301 IIncorrect Command- IIncorrect number of command-line input Check the Maestro scripts to see if the call being IDRSC323.pe IB
line parameters parameters have been supplied to the module _Imade to the module is of the form: DRSC323

DRSC323 <Application Type>

IDRS32302 IMissing/Invalid Missing/Incorrect command-line input Check the Maestro scripts to see if the call being IDRSC323.pe IB
(Command-line [parameters have been supplied to the module made to the module is of the form: DRSC323
parameters DRSC323 <Application Type>

DRS32303 INo report line query INo report line query found for report, check Check table DRS_REP_LINES for appropriate IDRSC323.pe IB
found for report DRS_REP_LINES table query

IDRS32304 IFailed to open cursor IFailed to open cursor CUR_DRS_REP_LINES, ICheck ORACLE error message for further DRSC323.pe IB
ICUR_DRS_REP_LIN Icheck ORACLE error code information
ES

IDRS32401 IIncorrect Command- IIncorrect number of command-line parameters _ICheck the Maestro scripts to see if the call being IDRSC324.pe IB
line parameters made to the module is of the form: DRSC324

[ApplicationType]

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 166 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
DRS32402_ IMissing/Invalid Missing/Invalid command-line parameters Check the Maestro scripts to see if the call being IJDRSC324.pe IB
command-line made to the module is of the form: DRSC324
parameters [ApplicationType]
DRS32403  IEnvironment variable IEnvironment variable is not set (Check the environment variable DRSC324.pe IB
is not set SNWB_MSU_OUTPUT or $_ NWB_OUTPUT
jor S$NWB_AUDIT_OUTPUT or
SNWB_TIP_OUTPUT
DRS32404 IOpening file failed Opening report file failed with error Check if file already exists with restricted DRSC324.pe IB
with error permissions or if direcctory has restricted
permissions
DRS32405_ IClosing file failed Closing report file failed with error Check if file exists in $NWB_MSU_OUTPUT orIDRSC324.pe_ IB
with error $_MSU_OUTPUT
DRS32406 Writing Header error IHeader being printed is too big Increase header size if necessary DRSC324.pe IB
DRS32407 IError Printing Ist Error in printing first column headings row Check column heading data DRSC324.pe IB
column headings
DRS32408 Error Printing 2nd —_IError in printing second column headings row ICheck column heading data DRSC324.pe IB
column headings
DRS32409 Error Printing Ist Error in printing last TOTAL row Check column heading data DRSC324.pe_ IB
column headings
DRS32410_ IError formatting Error printing data from drs_rep_file register to ICheck data in drs_rep_results_nb101 DRSC324.pe IB
record outputs the output file
IDRS32411 Error renaming .LCK IError renaming .LCK file to .TXT file in Check permissions on .LCK files in DRSC324.pe IB
file to .TXT file SNWB_MSU_OUTPUT SNWB_MSU_OUTPUT
DRS32412  IError whilst removing IError whilst removing file Check <ErrorMsg> for further details DRSC324.pe IC
file <TxtFile>:<ErrorMsg>

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page:

167 of 183
Fujitsu Services

DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

FUJ00090719
FUJ00090719

/DRS32413 IUnable to link file Unable to link file from $NWB_MSU_OUTPUT IDelete file from $NWB_TIP_OUTPUT and/or IDRSC324.pe IB
TIP/AUDIT directory Ito $NWB_TIP_OUTPUT or $NWB_AUDIT_OUTPUT. Check permissions
SNWB_AUDIT_OUTPUT directory lon directory
IDRS32501 IIncorrect Command- _ IMissing/Incorrect command-line input Check the Maestro scripts to see if the call being IJDRSC325.pc IB
line parameters [parameters have been supplied to the module made to the module is of the form: DRSC325
DRSC325 <Application Type>
DRS32502_ IMissing/Invalid Incorrect number of command-line input Check the Maestro scripts to see if the call being IJDRSC325.pe IB
(Command-line parameters have been supplied to the module —_Imade to the module is of the form: DRSC325
parameters DRSC325 <Application Type>
DRS32503 IEnvironment variable IEnvironment variable is not set Check the environment variable DRSC325.pe_ IB
is not set SNWB_MSU_OUTPUT or $_NWB_OUTPUT
jor S$NWB_AUDIT_OUTPUT or
$SNWB_TIP_OUTPUT
IDRS32504 {Writing Header error IHeader being printed is too big Increase header size if necessary DRSC325.pe IB
IDRS32505 {Opening file failed Opening report file failed with error Check if file already exists with restricted DRSC325.pe IB
with error permissions or if direcctory has restricted
permissions
DRS32506 {Closing file failed Closing report file failed with error Check if file exists in $NWB_MSU_OUTPUT orIDRSC325.pe IB
with error $_MSU_OUTPUT
DRS32507 Error Printing Ist Error in printing first column headings row Check column heading data DRSC325.pe IC
column headings
IDRS32508 Error Printing 2nd _IError in printing second column headings row ICheck column heading data DRSC325.pe IC
column headings

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page:

168 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
'DRS32509 {Error formatting Error printing data from drs_rep_file register to ICheck data in drs_rep_results_nb102_x DRSC325.pe JC
record outputs the output file
DRS32510 IError renaming .LCK IError renaming .LCK file to .TXT file in Check permissions on .LCK files in DRSC325.pe IB
file to .TXT file SNWB_MSU_OUTPUT SNWB_MSU_OUTPUT
DRS32511 IError whilst removingIError whilst removing file Check <ErrorMsg> for further details DRSC325.pe IC
file <TxtFile>:<ErrorMsg>
DRS32512 IUnable to link file Unable to link file from $NWB_MSU_OUTPUT JDelete file from $NWB_TIP_OUTPUT and/or IDRSC325.pc IB
TIP/AUDIT directory Ito SNWB_TIP_OUTPUT or SNWB_AUDIT_OUTPUT. Check permissions
SNWB_AUDIT_OUTPUT directory lon directory
DRS32801 Incorrect Command- IIncorrect number of command-line parameters _ICheck the Maestro scripts to see if the call being IDRSC328.pe IB
line parameters made to the module is of the form: DRSC328
[ApplicationType]
IDRS32802_ IMissing/Invalid Missing/Invalid command-line parameters Check the Maestro scripts to see if the call being IDRSC328.pe IB
command-line made to the module is of the form: DRSC328
parameters. [ApplicationType]
IDRS32803 {Environment variable IEnvironment variable is not set Check the environment variable DRSC328.pe IB
is not set $NWB_MSU_OUTPUT or $_NWB_OUTPUT
jor S$NWB_AUDIT_OUTPUT or
SNWB_TIP_OUTPUT
IDRS32804 IOpening file failed — {Opening report file failed with error Check if file already exists with restricted DRSC328.pc IB
with error permissions or if direcctory has restricted
permissions
DRS32805 {Closing file failed Closing report file failed with error Check if file exists in $NWB_MSU_OUTPUT orIDRSC328.pe IB
with error $_MSU_OUTPUT

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page:

169 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

DRS32806 {Writing Header error IHeader size being printed is too big Increase header size if necessary DRSC328.pe IC

DRS32807 Error Printing Ist Error in printing first column headings row (Check column heading data DRSC328.pe IC
column headings

DRS32808 [Error Printing 2nd __IError in printing second column headings row _ [Check column heading data DRSC328.pe IC
column headings

DRS32809 Error formatting Error printing data from drs_rep_file register to ICheck data in drs_rep_file_register DRSC328.pe IB
record outputs the output file

DRS32810_ IInvalid/No row Invalid/Null SQL found in DRS_REP_LINES — {Check entry in drs_rep_lines for report_number IDRSC328.pe IB
selected in for report = NB000 and (Application-Type = x I= 'NBO000'
drs_rep_lines Or Application-Type = NULL)

DRS32811 IError renaming .LCK IError renaming .LCK file to .TXT file in Check permissions on .LCK files in DRSC328.pe IB
file to .TXT file SNWB_MSU_OUTPUT $NWB_MSU_OUTPUT

DRS32812  IError whilst removing IError whilst removing file Check <ErrorMsg> for further details DRSC328.pe JC
file <TxtFile>:<ErrorMsg>

IDRS32813 IUnable to link file (Unable to link file from $NWB_MSU_OUTPUT IDelete file from $NWB_TIP_OUTPUT and/or IDRSC328.pe IB
TIP/AUDIT directory Ito $NWB_TIP_OUTPUT or $NWB_AUDIT_OUTPUT. Check permissions

SNWB_AUDIT_OUTPUT directory jon directory

DRS35001 [Incorrect no of Incorrect number of command-line input Check the Maestro scripts to see if the call being [DRSC350.pe IB
(Command-line parameters have been supplied to the module _Imade to the module is of the form: DRSC350
parameters DRSC350 <Application Type>

IDRS35002_ IInvalid Command. Invalid command-line input parameters have Check the Maestro scripts to see if the call being IDRSC350.pe_ IB
line parameter been supplied to the module DRSC350 made to the module is of the form: DRSC350

<Application Type>

DRS35003_ IFailed to retrieve Could not retrieve tablespace Name for Check ORACLE error message for further DRSC350.pe IB

Tablespace Name <TableName> information

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page

+ 170 of 183
Fujitsu Services

DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

FUJ00090719
FUJ00090719

'DRS35004 {Parameter not set Parameter MAXIMUM NUMBER OF Check ORACLE error message for further DRSC350.pe IB
PARTITIONS not set for <ApplicationType> information
DRS35005_ IParameter not set Parameter PARTITION RECEIPT DATE not set}Check ORACLE error message for further DRSC350.pe IB
for <ApplicationType> information
IDRS35006 IFailed to drop Failed to drop Partition <PartitionNAme> for — ICheck ORACLE error message for further DRSC350.pe_ IB
Partition <TableName> information
IDRS35007 Failed to create Failed to create Partition <PartitionNAme> for ICheck ORACLE error message for further DRSC350.pe_ IB
Partition <TableName> information
DRS35008  IFailed to update Failed to update DRS SYSTEM DATE and Check ORACLE error message for further DRSC350.pe IB
DRS_SYSTEM_PAR IPARTITION RECEIPT DATE for information
IAMETERS <ApplicationType>
DRS35009 IFailed to update Failed to update C4SD FILE LOAD Check ORACLE error message for further DRSC350.pe IB
DRS_SYSTEM_PAR ICOMPLETE, DRS PROCESSING DAY information
IAMETERS COMPLETE and BATCH JOB STARTED for
<ApplicationType>
DRS35101 [Incorrect Command- IIncorrect number of command-line input Check the Maestro scripts to see if the call being JDRSC351.pe IB
line parameters parameters have been supplied to the module —_Imade to the module is of the form: DRSC351
DRSC351 <Application Type>
DRS35102 IMissing System No entry for parameter 'DRS PROCESSING Check the contents of table DRSC351.pe IB
parameter DAY COMPLETE ' found in table DRS_SYSTEM_PARAMETERS to see if'a
DRS_SYSTEM_PARAMETERS, record corresponding to the given parameter is
present
DRS35301 IIncorrect Command- IIncorrect number of command-line input ICheck the Maestro scripts to see if the call being JDRSC353.pe IB
line parameters parameters have been supplied to the module made to the module is of the form: DRSC350
DRSC353 <Application Type>

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page:

171 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
DRS35302 {Invalid Command. Invalid command-line input parameters have ICheck the Maestro scripts to see if the call being IJDRSC353.pe IB
line parameter been supplied to the module DRSC353 made to the module is of the form: DRSC350
<Application Type>
DRS35303  IUpdate of Batch Table DRS_SYSTEM_PARAMETERS could Check ORACLE error message for further DRSC353.pe IB
Parameter failed not be updated information
IDRS36101 [Incorrect Command- Incorrect number of command-line input Check the Maestro scripts to see if the call being IDRSC361.pe IB
line parameters parameters have been supplied to the module made to the module is of the form: DRSC361
DRSC361 [ApplicationType]
DRS36102 IMissing/Invalid Missing/Invalid command-line parameters have ICheck the Maestro scripts to see if the call being IDRSC361.pe IB
(Command-line been supplied to the module DRSC361. made to the module is of the form: DRSC361
parameters [ApplicationType]
DRS36103 {System parameter not PARTITION RECEIPT DATE or MAXIMUM _ ICheck table DRS_SYSTEM_PARAMETERS forIDRSC361.pe IB
found INUMBER OF PARTITIONS not found. the appropriate parameters
DRS36104 IUnable to access table IUnable to access Check Oracle table DRSC361.pe IB
DRS_SYSTEM_PARAMETERS table DRS_SYSTEM_PARAMETERS exists and has
necessary permissions
DRS36105 Invalid System PARTITION RECEIPT DATE system parameterICheck table DRS_SYSTEM_PARAMETERS forIDRSC361.pe IB
parameter is NULL the appropriate parameter
IDRS36106 {Invalid System MAXIMUM NUMBER OF PARTITIONS Check table DRS_SYSTEM_PARAMETERS for/DRSC361.pe IB
parameter System parameter is NULL. the appropriate parameter

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page:

172 of 183
Fujitsu Services

DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

FUJ00090719
FUJ00090719

IDRS36107 {Unable to access table IUnable to access DRS_ARCHIVED_TABLES _ ICheck Oracle table DRS_ARCHIVED_TABLESIDRSC361.pe IB
table exists and has necessary permissions.

IDRS36108 IUnable to fetch from IUnable to fetch from Check Oracle table DRS_ARCHIVED_TABLESIDRSC361.pe IB
table DRS_ARCHIVED_TABLES table for the appropriate message

DRS36109 IEnvironment variable IEnvironment variable <EnvVar> is not set. Set the Environment variable with correct value. IDRSC361.pe IB
is not set

DRS36110 {Error creating Error creating parameter file Check <ErrorMsg> for further details DRSC361.pe IB
parameter file <Parfile>:<ErrorMsg>

DRS36111 IUnable to create a Unable to create a link to the file <Source>-> —ICheck <ErrorMsg> for further details DRSC361.pe IB
link to a file <Target>:<ErrorMsg>

IDRS36112 IUnable to execute [Unable to execute dynamic SQL statement <SQLICheck ORACLE error message for further DRSC361.pe IB
Dynamic SQL stmt — IStmt> information

DRS36113 IUnable to access table IUnable to access USER_TAB_PARTITIONS Check Oracle table USER_TAB_PARTITIONS IDRSC361.pe IB

table exists and has necessary permissions.

DRS36114 IUnable to fetch from IUnable to fetch from Check Oracle table USER_TAB_PARTITIONS IDRSC361.pe IB
table 'USER_TAB_PARTITIONS table for appropriate message

DRS36115 IError executing unix IError executing command Check <ErrorMsg> for further details DRSC361.pe IB
command <CommandStr>:<ErrorMsg>

DRS36116 [Error opening export [Error opening export Log file Check <ErrorMsg> for further details DRSC361.pe IB
Log file <Logfile>:<ErrorMsg>

DRS36117 IError whilst exportingIError whilst exporting data, check log file Check export log file <Logfile> for the actual IDRSC361.pe IB
data <LogFile> error message.

DRS36118 IUnable to read export IUnable to read export log file Check <ErrorMsg> for further details DRSC361.pe IB
log file <Logfile>:<ErrorMsg>

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page:

173 of 183
Fujitsu Services

DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

FUJ00090719
FUJ00090719

IDRS36119 {Static data missing IDRS_ARCHIVED_TABLES static data missing,}Check Oracle table DRSC361.pe IB
no tables archived/purged DRS_ARCHIVED_TABLES, if entries missing,
run build script to populate.
DRS36120_ IError whilst renamingIError whilst renaming file from <SrcFile> to Check <ErrorMsg> for further details DRSC361.pe IB
.dmp to .err file <TgtFile>:<ErrorMsg>
DRS36201 IFile Housekeeping job IDRS File Housekeeping job has failed due to an ICheck the Maestro log for more details of the DRSX362.sh IB
has failed application or database error error. Contact EDSC/SSC (3rd Line Support) in
normal working hours.
DRS36401 IIncorrect Command- IMissing/Incorrect command-line input Check the Maestro scripts to see if the call being IDRSC364.pe IB
line parameters parameters have been supplied to the module —_Imade to the module is of the form: DRSC364
DRSC364 <Application Type>
IDRS36402_INo data to be copied _INo data has been found to be copied from RDDS ICheck the data and correct public synonyms DRSC364.pe_ IB
from RDDS table DRS_ROUTING_GATEWAYS icxist.
DRS36403 {No data to be copied _INo data has been found to be copied from RDDS ICheck the data and correct public synonyms DRSC364.pe_ IB
from RDDS table DRS_ACCOUNTING_WEEKS exist.
IDRS36601 IIncorrect Command-_ IMissing/Incorrect command-line input Check the Maestro scripts to see if the call being IJDRSC366.pc IB
line parameters [parameters have been supplied to the module made to the module is of the form: DRSC366
DRSC366 <Application Type>
DRS36602 INo data to be copied INo data has beenn found to be copied from the ICheck the data and correct public synonyms DRSC366.pe_ IB
from TPS TPS tabe TPS_OUTLETS_LAST_POLLED exist.

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page:

174 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
‘DRS36701 {Incorrect Command- IMissing/Incorrect command-line input Check the Maestro scripts to see if the call being JDRSC367.pe IB
line parameters parameters have been supplied to the module made to the module is of the form: DRSC367
DRSC367 <Application Type>
DRS36702_ IMissing/Invalid Incorrect number of command-line input Check the Maestro scripts to see if the call being IDRSC367.pce IB
(Command-line [parameters have been supplied to the module made to the module is of the form: DRSC367
parameters DRSC367 <Application Type>
DRS36703 [Environment variable [Environment variable NWB II _TIP_OUTPUT is ISet environment variable appropriately DRSC367.pe IB
is not set not set
DRS36704 [Error occurred Error occurred opening pipe Refer to the Exception Error message for further [DRSC367.pc_ IB
opening pipe details
DRS36705_ IError occurred closingIError occurred closing pipe Refer to the Exception Error message for further IDRSC367.pe IB
pipe details
IDRS36706 ITIP Receipt File open IError occurred while opening the TIP harvest — ICheck for the existence of TIP harvest receipt IDRSC367.pe IB
failed with error receipt file in Read mode file and refer to the Exception Error message for
further details
DRS36707 ITIP File Delivery IThe file delivery Date/Time of corresponding DRSC367.pe IB
Date/Time not found Itransaction file for the TIP interface was not
found in the TIP Harvest Receipt file
DRS36708 File entry not found inIEntry for the TIP transaction file was not found DRSC367.pe_ IB
File Register in the table tps_file_register
DRS36709 IError while renaming IAn Error occurred while renaming the TIP Check Exception Error message for further DRSC367.pe IB
receipt file Harvest Receipt file to change file extension details
from “.ACK” to “.ack”

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page

+ 175 of 183
FUJ00090719

FUJ00090719
Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
IDRS36801 {Incorrect Command}Incorrect number of input command-line}Check the Maestro scripts to see if the call being]DRSC368.pe IB
line parameters parameters made to the module is of the form: DRSC368)
<Application Type> <Run Group 1>...<RunI
Group N>
DRS36802 Invalid CommandINo input Run Groups have been provided onICheck the Maestro scripts to see if the call being]DRSC368.pc IB
line parameters command line made to the module is of the form: DRSC368}
<Application Type> <Run Group 1>...<RunI
IGroup N>
DRS36803 {Invalid Input RecordINo records found in tableICheck if the Run-Group being passed command;DRSC368.pe_ IB
Group DRS_ANALYZED_OBJECTS for Object Group}line corresponds with data in
with given name DRS_ANALYZED_OBJECTS table
DRS36804 INo record found inINo corresponding record for the  input}Check contents ofIDRSC368.pe IB
DRS Metadata Table/Index with given name found in DRS]DRS_ANALYZED_OBJECTS to ensure that theI
Metadata correct Object Name and Object Type are used
DRS36805_ {Given PartitionIThe given partition number for Table/Index withICheck contents ofIDRSC368.pc IB
[Number not available Igiven Object Name is not available as the object}IDRS_ANALYZED_OBJECTS to ensure that theI
has only set sumber of partitions correct Partition Number is present as parameterI
for the Object Name and Object Type
DRS36806 IGiven PartitionINo corresponding entry for the —input/Check contents ofIDRSC368.pc IB
[Number not available ITable/Index with given name and given partitionIDRS_ANALYZED_ OBJECTS to ensure that the}
position found in DRS Metadata correct Partition Number is present as parameter!
for the Object Name and Object Type
IDRS37101 IIncorrect Command-IIncorrect number of command-line input Check the Maestro scripts to see if the call IDRSC371.pc
line parameters parameters have been supplied to the being made to the module is of the form:
module DRSC371 DRSC371 <Application Type> iB

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page:

176 of 183
Fujitsu Services

FUJ00090719

FUJ00090719
DRS Host Support Guide Ref: NB/MAN/003
Version: 5.0
COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005
DRS37102 IMissing/Invalid Missing/Incorrect command-line input Check the Maestro scripts to see if the call IDRSC371.pc
Command-line parameters have been supplied to the being made to the module is of the form:
parameters module DRSC371 DRSC371 <Application Type> B
IDRS37106 IInvalid C4/D table —_IInvalid C4/D table names entry in Check C4/D entry in tes_partition_creates IDRSC371.pc
names tes_partition_creates table table A
DRS37107 IUnknown Error IA non-data related Oracle error has occurredICheck oracle error message for further DRSC371.pc
during inserts during bulk inserts into table DRS_RX_C4__Iinformation B
IDRS37111 ISequence reached IThe Horizon Transaction Id - Receipt Date IConfirm correct execution of the C4SD DRSC371.pc
Max Value Sequence has reached its maximum allowed}process(TESC340). Check for valid data in
value the TES_TX_C4 table B
DRS37112 IUnknown Error IA non-data related Oracle error has occurredICheck oracle error message for further DRSC371.pc
during inserts during inserts into tables DRS_RX_C4 or information
DRS_RX_C4_EXCP B
DRS37117 IUnknown Error A non-data related Oracle error has occurredICheck oracle error message for further DRSC371.pc
during inserts during inserts into table DRS_RX_C4_EXCP Iinformatio B
DRS37108 IUnknown Error IA non-data related Oracle error has occurredICheck oracle error message for further DRSC371.pc
during inserts during bulk inserts into table DRS_RX_D information B
IDRS37113 ISequence reached IThe Horizon Transaction Id - Receipt Date IConfirm correct execution of the C4/D DRSC371.pce
Max Value Sequence has reached its maximum allowedIprocess(TESC340). Check for valid data in
value ithe TES_TX_D table B
DRS37114 IUnknown Error A non-data related Oracle error has occurredICheck oracle error message for further DRSC371.pc
during inserts during inserts into tables DRS_RX_D or information
DRS_RX_D_EXCP. B
DRS37118 IUnknown Error IA non-data related Oracle error has occurredICheck oracle error message for further DRSC371.pc
during inserts during inserts into table DRS_RX_D_EXCP information B
DRS37110 IInvalid Input Invalid value of Message Type passed to theICheck contents of the TES_TX_C4/D input IDRSC371.pc
Message Type function that handles Data related table to see if one or more messages are of
exceptions invalid message type B
DRS37101 IIncorrect Command-IIncorrect number of command-line input Check the Maestro scripts to see if the call IDRSC371.pc
line parameters parameters have been supplied to the being made to the module is of the form:
module DRSC371 DRSC371 <Application Type> B

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page:

177 of 183
FUJ00090719
FUJ00090719

Fujitsu Services DRS Host Support Guide Ref: NB/MAN/003

Version: 5.0

COMMERCIAL_IN_CONFIDENCE Date: 13/04/2005

20 Appendix F —- DRS Archiving Table Mapping

#)

“DRS Archived Table
for NWB and DCP.xis

© 2005 Fujitsu Services COMMERCIAL _IN_CONFIDENCE Page: 178 of 183
Fujitsu Services

DRS Host Support Guide

COMMERCIAL_IN_CONFIDENCE

Ref: NB/MAN/003

Version: 5.0

Date: 13/04/2005

21

Appendix G — DRS File Housekeeping Parameters

Directory Name File Name Retention Delete Sub- Application
Period directories? Type
/bvnw01/drs/trans/nwbC4Din * dif 5 IN NWB
/bvnw01/drs/trans/nwbC4Din *.CTL 5 IN NWB
/bynw01/drs/trans/drsmsu NBS*.TXT 5 IN NWB
/bynw01/drs/trans/drsmsu DRS*.TXT 5 IN NWB
/ovnw0 1/drs/trans/nwbtip * 5 IN, INWB
/ovnw01/drs/trans/drssupport DRSNWB*.dmp.Z 5 IN NWB
/bvnw0 1/drs/trans/drsarchive DRSNWB*.dmp.Z 5 IN, NWB
/bvnw01/drs/trans/drsexplog DRSNWB*.log 5 IN NWB
/ovnw0 1/drs/trans/nwbC4Din * 7 IN NWB
/bynw01/drs/trans/eftC4DSin * dif 5 IN EFT
/bynw01/drs/trans/eftC4DSin *.CTL 5 IN EFT
/bynw01/drs/trans/drsmsu DCP*.TXT 5 IN EFT
/bvynw0 1/drs/trans/efitip * 5 IN. EFT
/bvnw01/drs/trans/drssupport DRSEFT*.dmp.Z 5 IN EFT
/bvnw0 1/drs/trans/drsarchive DRSEFT*.dmp.Z 5 IN. EFT
/ovnw0 1/drs/trans/drsexplog DRSEFT*.log 5 IN EFT.
/bynw01/drs/trans/eftC4DSin * 7 IN EFT
/bynw0 1/drs/trans/eftC2in * 5 IN EFT
/bynw01/drs/trans/eftC2out * 5 IN EFT

FUJ00090719
FUJ00090719

© 2005 Fujitsu Services

COMMERCIAL _IN_CONFIDENCE

Page: 179 of 183
