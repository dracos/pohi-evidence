FUJ00171932
FUJ00171932

Peak Incident Management System

Call Reference PC0275644 Call Logger Jon Hulme -- Bus_Apps_ Des
Release Targeted At -- HNG-X 69.20 Top Ref HNGA_PACKAGE CBA 6920 D165
Call Type Internal Development Incidents/Defects Priority C -- Progress Restricted
Contact Jon Hulme Call Status Closed -- Build Fix Available to Call Logger
Target Date 09/12/2018 Effort (Man Days) 0
Summary Counter does not detect branch rollover failure
All References Type Value
Jira CBB-3216
Product Baseline HNGA PACKAGE CBA 6920 D165
Impact Statement User : Date
Gimcy johnbasco 04-Feb-2019 14:47:59
Counter does not report branch rollover failure to the clerk and falsely displays successful rollover
message.
Progress Narrative

fDate:04-Dec-2018 12:22:08 User:Jon Hulme

IcALL PCO275644 opened

Details entered are:~

lsummary:Counter does not detect branch rollover failure
call Type:t

call Priority:

target Release:HNG-X 68.20

Routed to:Bus Apps Des ~ Jon Hulme

Date:04-Dec-2018 12:22:08 Uscr:Jon Hulme
{Start of Response]
[whe counter does not detect branch rollover failure.

e.g.
Node 1: Press Trading Statement (for branch rollover from TP 1 to TP 2).

Node 1: At the Print/Preview screen, press Lock.

jode 2: Login as same EUM user (EUM bug causes this to remove the rollover lock, but that is not the point of this PEAK).
Node 2: Proceed to branch rollover TP 1 to TR2 correctly, and get BIS printed for TP1.

lode 2: Logout.

lode 1: Unlock with same EUM user.

lode 1: Proceed to rollover again.

the clerk gets a BYS printed for TP2 (incorrect TP number) and message confirming rollover to TP3 (incorrect).
lctually, this rollover fails with a BAL error, which is not reported to the clerk.

ALB:

LY 116.UIC.JNIG=Almessaue..logger INFO - [] []- Response Received, Status OK, service url= [

IRRELEVANT. [ §923-1-2G-0411-164 ] osr server= [ localhost:7098content siz
><BALProcessingTime>129</BALProcessingTime><Dyno><directi
Ent ry></Dyno><ResponseHeader><Success>false</St

lame='error'><String>ROLL BRANCH NOT_LOCKED</String></directive
jbr></GenericResponseDTo>

Please fix the counter branch rollover code to note when the RolloverBranchService returns an error response, and to report it as
lan error to the clerk. It should probably be a new system error.

[End of Response]

Jkesponse code to call Internal Development Incidents/Defects(I) as Potential Problem Identified (38)

Date: 04-Dec-2018 12:22:21 User
[the Call record has been transferred to the team: xCtr GDC

JDate:04-Dec-2018 13:05:07 Uscr:Ramesh Kalavakolla
the Call record has been assigned to the Team Member: Gimcy johnbasco

jDate:07-gan-2019 09:51:43 User:Gimey johnbasco

[Start of Response]

lanalysis in progress.

[End of Response]

Response code to call type I as Category 40 -- Pending -- Incident Under Investigation

jDate:07-Jan-2019 09:54:04 Uscr:Gimey johnbasco
Reference Added: Jira CBB-3216

FUJ00171932
FUJ00171932

[Date:24-san-2019 0.
[Start of Response]

lable to reproduce the above issue when attempting to rollover a branch, as stated by Jon the below error is a response from BAL but
lis not detected by Counter.

B06 Uscr:Gimey johnbasco

15,466. UTC_ INTC:

é 2...
IRRELEVANT

logger INFO - [] ~ Response Received, Status OK, service url= [
i] request _id= { 13002-3-KF-2409-2 ] osr server- [ localhost:7072content size= [ 283 ]
atySetive" xminsiref="ref"><BALProcessingTime>76</BALProcessingTime><Dyno><di rect ive: Entry

LOCKED</Stxing></directive:Entry></Dyno><Responselleader><Success>false</Success></Responseliead

Name='error'><String>ROLL BRANCH NO!
ler></Gener i cResponseDTO>

new system error should be added to the counter when this error occurs.
[End of Response]
Response code to call type I as Category 41 -- Pending -- Product Error Diagnosed

jbate:24-Jan-2019 14:40:36 Uscr:Gimey johnbasco
\dditional to the above error two other error codes ‘ROLL BRANCH LOCKED' and ‘ROLL BRANCH BAD_TP' is not handled by counter during
pranch rollover (refer: RolloverBranchServiceHandler)

lone system error with different error reason will be raised for the above error cases.

lDate:31-dan-2019 12:16:12 User:Maciej Fron
from: Johnbasco, Gimcy <Gimcy.Johnbasco@if”
Sent: Monday, January 28, 2019 3:27 PM.
Ito: Frontczak, Maciej} <Maciej.Frontczaké..
subject: RE: Peak Incident PCO275644 **for BIF?**

Hi Macied,
Yes, this peak should go through BIF.
I will update the peak with below questions and action on BIF.

ranks,
simcy

lrrom: Frontezak, Maciej
sent: Monday, January 28, 2019 12:37 EM

[for Johnbasco, Gimcy <Gimcy.Johnbasco@i
Subject: Peak Incident PC0275644 **for
Hi Gimey,

should this Peak go to BIF on Wednesday, if so I would need answers to the below questions:

problem Statement ( Underlying cause of problem):
Risk of not fixing:

Benefit of fixing
SM Utilisation Capacity(man days in Dev required to fix):

lDate:04-Feb-2019 14:47:59 User:Gimcy johnbasco
new Business Impact has been added:
counter does not report branch rollover failure to the clerk and falsely displays successful rollover message.

Dat e:04-Feb-2019 15:08:35 Uscr:Gimey johnbasco
DEVELOPMENT IMPACT OF FIX:

SPECIFY THE HNG-X PLATFORMS IMPACTED:
fave you used the "HNG-X Platforms" Product Group available under the PRODUCTS button in PEAK to specify all HNGX platforms
impacted by this fix?

I Yes

lare all the platforms in the same deployment group?
+ yes

[TECHNICAL SUMMARY:
summarise the impact by technical areas affected, i.¢., "this change will affect 3 PL/SQL packages and 1 J2EE web service".
I 1 java file
1 xml file

LIST OF KNOWN DIMENSIONS DESIGN PARTS AFFECTED BY THE CHANGE:
jtist all the known products
I poa-cba

DEPENDENCIES:
re there any other PEAKs or CPs with interdependencies on the proposed fix?
I P2368 EUM Balancing Enhancements

jare there any clone peaks to take the delivery to a different deployment group? If yes is there any order in which they must be
deployed?
LNA

FUJ00171932
FUJ00171932
[ny other dependencies such as infrastructure changes of technical/configuration changes that will not included in the Development

ix?
I NA

DEPLOYMENT DETAIL:
joes the fix include procedures that are known not to be packagable by Integration in an automatically deployable baseline (DPVB)?
I[f so, please comment on the nature and technical complexity of such procedures

oes the fix require a reboot?
L Yes

loves the fix apply to a clustered database? If so must the deployment be done to all at the same time?
- NA

DEV EFFORT IN MANDAYS:
If the Man Days figures will be different to the elapsed duration, please state so here. Also, if there are any constraints on work
beginning, please state here.

I 3 man days for fix and testing.

IMPACT ON USER:
benefit of making the fix.

hat does the user have to do to get this problem?
low does it affect them when it occurs?
iow many branches in the estate are likely to be affected by this issue
bo not state any of the technical solution detail here.

I: The problem can be reproduced as below

jode 1: Press Trading Statement (for branch rollover from TP 1 to TP 2).
Node 1: At the Print/Preview screen, press Lock.
Node 2: Login as same EUM user (EUM bug causes this to remove the rollover lock, but that is not the point of this PEAK).
Node 2: Proceed to branch rollover TP 1 to TP2 correctly, and get BTS printed for TP1.
Node 2: Logout.
Node 1: Unlock with same EUM user.
Node 1: Proceed to rollover again.

The clerk gets a BTS printed for TP2 (incorrect TP number) and message confirming rollover to TP3 (incorrect).

Actually, this rollover fails with a BAL error, which is not reported to the clerk.
this issue is more likely to occur in an EUM enabled branch.

HMPACT ON OPERATIONS:
Will the absense of a fix for this issue impact the ability of the operations team to support the HNGX system?
If s0, please comment on the severity of the impact and specify if any workaround for the issue exists.

senefit of fix that may not visible to end user.

I The clerk/end user will not be aware that the branch rollover failed as counter does not report of this error.

]7AVE RELEVANT KELS BEEN CREATED OR UPDATED?
State Yes, or if not, why not.
+ No.

IIMPACT ON TEST:
at independent test coverage/scenarios does development recommend?
[this will often be about the level of regression testing required.
Juhat CIT test coverage does development recommend?
hat Development test scenarios are needed?
at Development test scenarios manual/automated should be promoted to CIT?
I Follow below steps and check if counter reports about this error correctly.
Node 1: Press Trading Statement (for branch rollover from TP 1 to TP 2).
Node 1: At the Print/Preview screen, press Lock.

Node 2: Login as same EUM user (EUM bug causes this to remove the rollover lock, but that is not the point of this PEAK).
Node 2: Proceed to branch rollover TP 1 to TP2 correctly, and get BTS printed for TP1.

Node 2: Logout.

Node 1: Unlock with same EUM user.

Node 1: Proceed to rollover again.

The clerk gets a BTS printed for TP2 (incorrect TP number) and message confirming rollover to TP3 (incorrect).

Actually, this rollover fails with a BAL error, which is not reported to the clerk.

IRISKS (of releasing and of not releasing proposed fix):
hat live problems will there be if we do not issue this fix?
at are the risks of this fix having unexpected interactions with other areas?
Its this a high-risk area in which changes have caused problems in the past?
should we consider a pilot rollout and of what sort?
I The fix is of medium impact and was identified during EUM enchancements investigation. The system falsely reports a successful
pranch rollover message which will mislead the clerk/end user that the rollover was successul although it was failed from the BAL.

LIST OF LIKELY DELIVERABLES:
I- RolloverBranchBLO. java
I 1 new message fragment

Date:05-Feb-2019 07:47:53 User:Gimcy johnbasco
Problem Statement ( Underlying cause of problem): During a branch rollover, the clerk is not reported of the branch rollover
failure error response from the BAL and counter displays a successful error message.

the following error codes are not detected by counte
JUNLOCK BRANCH LOCKED

FUJ00171932
FUJ00171932

JOCK BRANCH LOCKED
UNLOCK BRANCH NOT LOCKED
ROLL BRANCH NOT LOCKED
ROLL BRANCH LOCKED

OLD BRANCH BAD_TP

lapart from ROLL BRANCH NOT LOCKED and UNLOCK BRANCH LOCKED, other error codes are unlikely to occur but its important to add a
jerror check for all the error codes.

Risk of not fixing: The counter will falsely report a successful rollover message eventhough the branch rollover is failed.
Benefit of fixing: A business error will be displayed to the clerk that the branch rollover is failed.

JASM Utilisation Capacity: 3 man days

lDate:05-Feb-2019 07:48:13 User:Gimey johnbasco
laction placed on Team:BIF

Date:07-Feb-2019 10:55:03 User:Jon Hulme
lanalysis of error codes:

JUNLOCK BRANCH LOCKED
ecurs during unlock branch, when the branch rollover use-casé is exited, if the HUID with the branch lock is not the current HUID.
Should never happen because the current user must have set the branch lock to reach this point.

Lock BRANCH LOCKED
ccurs during lock branch, when the branch rollover use-case is started, if the branch is locked by a different user. This might
happen in real use, and is a legitimate business error.

so occurs during rollover branch, if the branch is locked by a different user. Should never happen because the current user must
have set the branch lock to reach this point.

JUNLOCK BRANCH NOT LOCKED
Occurs during unlock branch, when the branch rollover use-case is exited, if the branch is not locked. Should never happen because
the current user must have set the branch lock to reach this point.

OLL_ BRANCH NOT LOCKED
curs when rolling over the branch, if the branch is not locked. Should never happen because the current user must have set the

Ibranch lock to reach this point.

[fhe counter doesn?t check for this response code, but should.

ROLL BRANCH LOCKED
ecurs when rolling over the branch, if the branch is locked by a different user. Should never happen because the current user must
Ihave set the branch lock to reach this point.

[the counter doesn?t check for this response code, but should,

ROLL BRANCH BAD_TP
ccurs when rolling over the branch, if the counter supplied new TP or TP financial year do not match the values in the database
table. Should never happen because the counter should be in step with the data centre values.

[the counter doesn?t check for this response code, but should.

bate:07-Feb-2019 15:17:01 User:Jubita Gurung
SIF approved as per Customer BIF meeting on 07/02/2018

Joatc:07-Feb-2019 15:17:03 User:Jubita Gurung
ction has been removed from the call

jDate:41-Feb-2019 11:06:40 Uscr:Gimey johnbasco

from: Gelder, Robert

Sent: Monday, February. J,
: Johnbasco, G Hq

Hulme, Jon

$+ Kalavakolla, Ramesh { GRO. $; Frontczak, Maciej

Subject C0275644 ~ Counter does not detect branch rollover failure
forning,

i am unable to find any message of this nature in the BAL Message logs
Regards,

Rob Gelder

leuorrsu

lLovel.
fret

E-mail: Robert.Geldent,
lebsite : http://uk.fujitsu.com

knell, Berkshire, RG12 8SN

Fujitsu is proud to partner with Shelter, the housing and homeless charity
Reshaping ICT, Reshaping Business in partnership with FT.com

FUJ00171932
FUJ00171932

P Please consider the environment do you really need to print this email?

from: Johnbasco, Gimcy
sent: 06 February 2019 12:44
Simpkins, John {

Kalavakolla, Ramesh {_

Frontezak, Macie}

PCOSTS644 = "Counter ASST not detect branch rollover failure

Iii John,
fhe above mentioned peak highlights an existing issue with counter not detecting a branch rollover failure.

le have analyzed this issue further and found that the below error codes during a branch rollover are not reported by counter to
the clerk:

JUNLOCK BRANCH LOCKED

Lock BRANCH LOCKED

UNLOCK BRANCH _NOT_LOCKED

ROLL BRANCH NOT LOCKED

ROLL_BRANCH_LOCKED

JROLL_BRANCH_BAD_TP

fo help us understand more on the impact of this issue in live and to present this peak to POL, could you please check if these
lrrors/exceptions has occurred in BAL.

Please let me know if any further details required.

thanks,
lcimey

jbate:11-Feb-2019 11:08:29 Uscr:Gimey johnbasco

ssc (Rob Gelder) confirmed that there was no oc

rrence of this issue in BAL mes

age logs

Jbate:13-Feb-2019 11:20:37 User:Maciej Frontezak
ction placed on Team:PTF

JDate:14-Feb-2019 10:39:28 User:Jubita Gurung
lAwaiting confirmation on how EUM fix is going to be progressed. To be left on PTF stack.

jbate:21-Feb-2019 10:37:18 User:Jubita Gurung
the call Target Release has been moved to Targeted At -- HNG-X 69.20

Jbate:21-Feb-2019 10:37:30 User:Jubita Gurung
ftargeted to R69.20 as per 21/02/2019 PIF meeting.

jate:21-Feb-2019 10:37:33 User:Jubita Gurung
ction has been removed from the call

JDate:05-Mar-2019 07:19:36 Uscr:Ramesh Kalavakolla
[Start of Response]

[End of Response]
Response code to call type I as Category 76 -- Pending -~ Fix

rgeted awaiting Release

jDato:-Mar-2019 17:29:05 User:Gimey johnbasco
cIT test steps:

[fo test this you may have to use new counter version (cp2368) and old BAL version (68.20).

jode 1: Press Trading Statement (for branch rollover from TP 1 to TP 2).
Node 1: At the Print/Preview screen, press Lock.

lode 2: Login as same EUM user (EUM bug causes this to remove the rollover lock, but that is not the point of this PEAK).
lode 2: Proceed to branch rollover TP 1 to TP2 correctly, and get BTS printed for TP1.

Node 2: Logout.

jode 1: Unlock with same EUM user.

jode 1: Proceed to rollover again.

system error message 'MSG40052' should be displayed indicating that the rollover failed

JDatc:11-Mar-2019 17:29:39 Uscr:Gimey johnbasco
code committed and reviewed via JIRA CBB-3216.

FUJ00171932
FUJ00171932

[Date:Ti-Mar-2019 17:30:04 User:Gimey johnbasco
[Start of Response]

[End of Response]
lzesponse code to call type I as Category 46 -- Pending -~ Product Error Fixed

jDate:11-Mar-2019 17:30:23 Uscr:Gimey johnbasco
[fhe Call record has been transferred to the team: xCtr REL GDC
fhe Call record has been assigned to the Team Member: Pavan Vejendla

bate:26-Mar-2019 13:15:22 Uscr:Praveen Challa
H. User logged in at CTR1 and during office rollover locked the CTR.

2. Same user logged in CTR 2. MSG40049 new message will be prompted at logon and continuing here will kill the session CTRI . 3. If
luser opts continue then branch rollover can be performed successfully.

[these scenarios have been covered during the CP testing.

jbate:26-Mar-2019 15:05:01 User:Dimensions Automated User
Reference Added: Product Baseline HNGA PACKAGE CBA 6920 D165

JDate:26-Mar-2019 15:34:50 User:Praveen Challa
Defect cause updated to 14: Development - Code

Date: 26-Mar-2019 15:35:10 User:Praveen Challa
[the Call record has been transferred to the team: Dev-Int-Rel

bate:27-Max-2019 08:49:36 Uscr:Geoff Inglis
fhe Call record has been assigned to the Team Member: PIT Automated User

bate: 27-Mar-2019 08:51:27 Uscr:Geoff Inglis
routing to SVI test as integration have nothing to process here.
fhe Call record has been transferred to the team: ITU System Validation & Integration
the Call record has been assigned to the Team Member: Unassigned

Date:26-Apr-2019 12:31:15 User:Paul Bott
{Start of Response]

retest and pass

[Bnd of Response]

lkesponse code to call type I as Category 61 ~- Final -- Build Fix Available to Call Logger
kouting to Call Logger following Final Progress update.

joate: 30-Apr-2019 12:58:44 User Hulme
CALL PC0275644 closed: Category 61 Type I

Root Cause Development - Code

Logger Jon Hulme -- Bus Apps Des

Subject Product HNG-X Counter -- Application Service (version unspecified)
Assignee Jon Hulme -- Bus Apps Des

Last Progress 30-Apr-2019 12:58 -- Jon Hulme
