FUJ00059049
FUJ00059049

Warning: This information has been deleted and is val

lueless to the support or understanding of the system

HORIZON KEL JBallantyne5245K

Information
Error committing declarations. Timeout waiting for lock
Summary: Error committing declarations. Timeout waiting for lock
Raised: by John Ballantyne on 02/11/2000
Last updated: by Anne Chambers on 07/07/2005
Release: $20
System product: Counter
Keywords: Error commiting declarations Timeout waiting for I
Status: Authorised
Visibility: Medium
Peak: Pcs6922
Tis: 11015130
Version: 1

Symptoms

The PM is getting error message when trying to re-declare cash. <br>The error message has been reported as being "Error committing
declarations", "Error committing discrepancies", "unable to create stock declaration‚Äù and also "Unexpected error during logon".<br><br>The
event logs contain multiple occurrences of the critical error: -<br>An unexpected error occurred while attempting to modify an entry in the
run map. Timeout occurred waiting for lock. (0xC1090003) <br> <br>This event has also been seen with associated event PCO083101 E-
0210270003: <br>Riposte function RiposteCreateMessageEx<br> Acknowledge Result for OUTLET/CS/nnnnnn reports unexpected error=Riposte

0xC1090003): Timeout occurred waiting for lock. (0xC1090003)<br><br>Also see KEL JSimpkins338Q

Problem

In this case the user was advised to contact NBSC to get CAP extended. <br> <br>Response from Development (Mark Jarosz)<br>"My
assesment of what happened is that on Wednesday ist Nov at 18:32:13 a lock was acquired on the run table which was not released. This
had the subsequent effect of causing may Riposte API calls to fail and hence the applications connected to Riposte could not function
reliably. 1 would speculate that the probable cause was a thread silently failing but have no way of proving this.<br><br>I will check with
Escher to confirm my assesment is reasonable and if not further update this PinICL.<br><br>In the meantime I would recommend that in
future occurences a restart of Riposte should be attempted .<br><br>If the frequency of occurence of such an event becomes significant (>
1 per month) then we will need to create a reproducible case." <br> <br>FAD 334832 cured overnight with ClearDesk (20-Nov-2000)

<br> <br>Another PO reported the same problem. After the reboot they were able to balance and rollover with no further

problems. <br><br>For Acknowledge event Cleardesk and restart of C_HV_POACK processed the acknowledgement.

Solution - Helpdesk

SMC: This problem seems to be cleared by either rebooting the affected counter or Cleardesk running in the morning. <br><br><kel><b>IF
THE EVENT IS SEEN DURING WORKING HOURS OF THE PO, RING THE OFFICE ASAP AND GET THEM TO REBOOT the eventing counter
immediately. If they are doing their balancing (possibly on a different counter) they should stop until the reboot is complete and the counter is
back up (including PMMC login), then recheck the figures befor completing the balance. </b> </kel>.<br><br>For more details see KEL
JSimpkins338Q.

Evidence

NO Evidence required

